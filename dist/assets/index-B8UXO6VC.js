var sD=Object.defineProperty;var aI=n=>{throw TypeError(n)};var oD=(n,e,t)=>e in n?sD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Y=(n,e,t)=>oD(n,typeof e!="symbol"?e+"":e,t),gm=(n,e,t)=>e.has(n)||aI("Cannot "+t);var C=(n,e,t)=>(gm(n,e,"read from private field"),t?t.call(n):e.get(n)),te=(n,e,t)=>e.has(n)?aI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Q=(n,e,t,r)=>(gm(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),le=(n,e,t)=>(gm(n,e,"access private method"),t);var Nd=(n,e,t,r)=>({set _(i){Q(n,e,i,t)},get _(){return C(n,e,r)}});function aD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function lD(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mA={exports:{}},Ff={},gA={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc=Symbol.for("react.element"),uD=Symbol.for("react.portal"),cD=Symbol.for("react.fragment"),dD=Symbol.for("react.strict_mode"),hD=Symbol.for("react.profiler"),fD=Symbol.for("react.provider"),pD=Symbol.for("react.context"),mD=Symbol.for("react.forward_ref"),gD=Symbol.for("react.suspense"),yD=Symbol.for("react.memo"),_D=Symbol.for("react.lazy"),lI=Symbol.iterator;function vD(n){return n===null||typeof n!="object"?null:(n=lI&&n[lI]||n["@@iterator"],typeof n=="function"?n:null)}var yA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_A=Object.assign,vA={};function yl(n,e,t){this.props=n,this.context=e,this.refs=vA,this.updater=t||yA}yl.prototype.isReactComponent={};yl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};yl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function wA(){}wA.prototype=yl.prototype;function E_(n,e,t){this.props=n,this.context=e,this.refs=vA,this.updater=t||yA}var T_=E_.prototype=new wA;T_.constructor=E_;_A(T_,yl.prototype);T_.isPureReactComponent=!0;var uI=Array.isArray,IA=Object.prototype.hasOwnProperty,S_={current:null},EA={key:!0,ref:!0,__self:!0,__source:!0};function TA(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)IA.call(e,r)&&!EA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Bc,type:n,key:s,ref:o,props:i,_owner:S_.current}}function wD(n,e){return{$$typeof:Bc,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function A_(n){return typeof n=="object"&&n!==null&&n.$$typeof===Bc}function ID(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var cI=/\/+/g;function ym(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ID(""+n.key):e.toString(36)}function dh(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Bc:case uD:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+ym(o,0):r,uI(i)?(t="",n!=null&&(t=n.replace(cI,"$&/")+"/"),dh(i,e,t,"",function(c){return c})):i!=null&&(A_(i)&&(i=wD(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(cI,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",uI(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+ym(s,a);o+=dh(s,e,t,l,i)}else if(l=vD(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+ym(s,a++),o+=dh(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Od(n,e,t){if(n==null)return n;var r=[],i=0;return dh(n,r,"","",function(s){return e.call(t,s,i++)}),r}function ED(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var rn={current:null},hh={transition:null},TD={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:hh,ReactCurrentOwner:S_};function SA(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Od,forEach:function(n,e,t){Od(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Od(n,function(){e++}),e},toArray:function(n){return Od(n,function(e){return e})||[]},only:function(n){if(!A_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ce.Component=yl;ce.Fragment=cD;ce.Profiler=hD;ce.PureComponent=E_;ce.StrictMode=dD;ce.Suspense=gD;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TD;ce.act=SA;ce.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=_A({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=S_.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)IA.call(e,l)&&!EA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Bc,type:n.type,key:i,ref:s,props:r,_owner:o}};ce.createContext=function(n){return n={$$typeof:pD,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:fD,_context:n},n.Consumer=n};ce.createElement=TA;ce.createFactory=function(n){var e=TA.bind(null,n);return e.type=n,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(n){return{$$typeof:mD,render:n}};ce.isValidElement=A_;ce.lazy=function(n){return{$$typeof:_D,_payload:{_status:-1,_result:n},_init:ED}};ce.memo=function(n,e){return{$$typeof:yD,type:n,compare:e===void 0?null:e}};ce.startTransition=function(n){var e=hh.transition;hh.transition={};try{n()}finally{hh.transition=e}};ce.unstable_act=SA;ce.useCallback=function(n,e){return rn.current.useCallback(n,e)};ce.useContext=function(n){return rn.current.useContext(n)};ce.useDebugValue=function(){};ce.useDeferredValue=function(n){return rn.current.useDeferredValue(n)};ce.useEffect=function(n,e){return rn.current.useEffect(n,e)};ce.useId=function(){return rn.current.useId()};ce.useImperativeHandle=function(n,e,t){return rn.current.useImperativeHandle(n,e,t)};ce.useInsertionEffect=function(n,e){return rn.current.useInsertionEffect(n,e)};ce.useLayoutEffect=function(n,e){return rn.current.useLayoutEffect(n,e)};ce.useMemo=function(n,e){return rn.current.useMemo(n,e)};ce.useReducer=function(n,e,t){return rn.current.useReducer(n,e,t)};ce.useRef=function(n){return rn.current.useRef(n)};ce.useState=function(n){return rn.current.useState(n)};ce.useSyncExternalStore=function(n,e,t){return rn.current.useSyncExternalStore(n,e,t)};ce.useTransition=function(){return rn.current.useTransition()};ce.version="18.3.1";gA.exports=ce;var L=gA.exports;const AA=lD(L),SD=aD({__proto__:null,default:AA},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AD=L,PD=Symbol.for("react.element"),xD=Symbol.for("react.fragment"),bD=Object.prototype.hasOwnProperty,RD=AD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CD={key:!0,ref:!0,__self:!0,__source:!0};function PA(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bD.call(e,r)&&!CD.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:PD,type:n,key:s,ref:o,props:i,_owner:RD.current}}Ff.Fragment=xD;Ff.jsx=PA;Ff.jsxs=PA;mA.exports=Ff;var E=mA.exports,yg={},xA={exports:{}},bn={},bA={exports:{}},RA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(K,re){var oe=K.length;K.push(re);e:for(;0<oe;){var Le=oe-1>>>1,Se=K[Le];if(0<i(Se,re))K[Le]=re,K[oe]=Se,oe=Le;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var re=K[0],oe=K.pop();if(oe!==re){K[0]=oe;e:for(var Le=0,Se=K.length,tt=Se>>>1;Le<tt;){var br=2*(Le+1)-1,Rr=K[br],Cr=br+1,kr=K[Cr];if(0>i(Rr,oe))Cr<Se&&0>i(kr,Rr)?(K[Le]=kr,K[Cr]=oe,Le=Cr):(K[Le]=Rr,K[br]=oe,Le=br);else if(Cr<Se&&0>i(kr,oe))K[Le]=kr,K[Cr]=oe,Le=Cr;else break e}}return re}function i(K,re){var oe=K.sortIndex-re.sortIndex;return oe!==0?oe:K.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,g=!1,S=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(K){for(var re=t(c);re!==null;){if(re.callback===null)r(c);else if(re.startTime<=K)r(c),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(c)}}function k(K){if(T=!1,y(K),!S)if(t(l)!==null)S=!0,Vl(V);else{var re=t(c);re!==null&&xr(k,re.startTime-K)}}function V(K,re){S=!1,T&&(T=!1,I(v),v=-1),g=!0;var oe=p;try{for(y(re),h=t(l);h!==null&&(!(h.expirationTime>re)||K&&!D());){var Le=h.callback;if(typeof Le=="function"){h.callback=null,p=h.priorityLevel;var Se=Le(h.expirationTime<=re);re=n.unstable_now(),typeof Se=="function"?h.callback=Se:h===t(l)&&r(l),y(re)}else r(l);h=t(l)}if(h!==null)var tt=!0;else{var br=t(c);br!==null&&xr(k,br.startTime-re),tt=!1}return tt}finally{h=null,p=oe,g=!1}}var j=!1,A=null,v=-1,x=5,P=-1;function D(){return!(n.unstable_now()-P<x)}function N(){if(A!==null){var K=n.unstable_now();P=K;var re=!0;try{re=A(!0,K)}finally{re?R():(j=!1,A=null)}}else j=!1}var R;if(typeof _=="function")R=function(){_(N)};else if(typeof MessageChannel<"u"){var Cn=new MessageChannel,ks=Cn.port2;Cn.port1.onmessage=N,R=function(){ks.postMessage(null)}}else R=function(){b(N,0)};function Vl(K){A=K,j||(j=!0,R())}function xr(K,re){v=b(function(){K(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){S||g||(S=!0,Vl(V))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(K){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var oe=p;p=re;try{return K()}finally{p=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var oe=p;p=K;try{return re()}finally{p=oe}},n.unstable_scheduleCallback=function(K,re,oe){var Le=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Le+oe:Le):oe=Le,K){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=oe+Se,K={id:d++,callback:re,priorityLevel:K,startTime:oe,expirationTime:Se,sortIndex:-1},oe>Le?(K.sortIndex=oe,e(c,K),t(l)===null&&K===t(c)&&(T?(I(v),v=-1):T=!0,xr(k,oe-Le))):(K.sortIndex=Se,e(l,K),S||g||(S=!0,Vl(V))),K},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(K){var re=p;return function(){var oe=p;p=re;try{return K.apply(this,arguments)}finally{p=oe}}}})(RA);bA.exports=RA;var kD=bA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DD=L,An=kD;function z(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CA=new Set,Hu={};function No(n,e){qa(n,e),qa(n+"Capture",e)}function qa(n,e){for(Hu[n]=e,n=0;n<e.length;n++)CA.add(e[n])}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_g=Object.prototype.hasOwnProperty,ND=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dI={},hI={};function OD(n){return _g.call(hI,n)?!0:_g.call(dI,n)?!1:ND.test(n)?hI[n]=!0:(dI[n]=!0,!1)}function VD(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function MD(n,e,t,r){if(e===null||typeof e>"u"||VD(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){kt[n]=new sn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];kt[e]=new sn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){kt[n]=new sn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){kt[n]=new sn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){kt[n]=new sn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){kt[n]=new sn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){kt[n]=new sn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){kt[n]=new sn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){kt[n]=new sn(n,5,!1,n.toLowerCase(),null,!1,!1)});var P_=/[\-:]([a-z])/g;function x_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(P_,x_);kt[e]=new sn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(P_,x_);kt[e]=new sn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(P_,x_);kt[e]=new sn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){kt[n]=new sn(n,1,!1,n.toLowerCase(),null,!1,!1)});kt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){kt[n]=new sn(n,1,!1,n.toLowerCase(),null,!0,!0)});function b_(n,e,t,r){var i=kt.hasOwnProperty(e)?kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MD(e,t,i,r)&&(t=null),r||i===null?OD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var si=DD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vd=Symbol.for("react.element"),oa=Symbol.for("react.portal"),aa=Symbol.for("react.fragment"),R_=Symbol.for("react.strict_mode"),vg=Symbol.for("react.profiler"),kA=Symbol.for("react.provider"),DA=Symbol.for("react.context"),C_=Symbol.for("react.forward_ref"),wg=Symbol.for("react.suspense"),Ig=Symbol.for("react.suspense_list"),k_=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),NA=Symbol.for("react.offscreen"),fI=Symbol.iterator;function Ql(n){return n===null||typeof n!="object"?null:(n=fI&&n[fI]||n["@@iterator"],typeof n=="function"?n:null)}var $e=Object.assign,_m;function pu(n){if(_m===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_m=e&&e[1]||""}return`
`+_m+n}var vm=!1;function wm(n,e){if(!n||vm)return"";vm=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{vm=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?pu(n):""}function LD(n){switch(n.tag){case 5:return pu(n.type);case 16:return pu("Lazy");case 13:return pu("Suspense");case 19:return pu("SuspenseList");case 0:case 2:case 15:return n=wm(n.type,!1),n;case 11:return n=wm(n.type.render,!1),n;case 1:return n=wm(n.type,!0),n;default:return""}}function Eg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case aa:return"Fragment";case oa:return"Portal";case vg:return"Profiler";case R_:return"StrictMode";case wg:return"Suspense";case Ig:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case DA:return(n.displayName||"Context")+".Consumer";case kA:return(n._context.displayName||"Context")+".Provider";case C_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k_:return e=n.displayName||null,e!==null?e:Eg(n.type)||"Memo";case Ii:e=n._payload,n=n._init;try{return Eg(n(e))}catch{}}return null}function FD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eg(e);case 8:return e===R_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rs(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function OA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UD(n){var e=OA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Md(n){n._valueTracker||(n._valueTracker=UD(n))}function VA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=OA(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Fh(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Tg(n,e){var t=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function pI(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=rs(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function MA(n,e){e=e.checked,e!=null&&b_(n,"checked",e,!1)}function Sg(n,e){MA(n,e);var t=rs(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Ag(n,e.type,t):e.hasOwnProperty("defaultValue")&&Ag(n,e.type,rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function mI(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Ag(n,e,t){(e!=="number"||Fh(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var mu=Array.isArray;function va(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+rs(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Pg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function gI(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(z(92));if(mu(t)){if(1<t.length)throw Error(z(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:rs(t)}}function LA(n,e){var t=rs(e.value),r=rs(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function yI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function FA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?FA(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ld,UA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ld=Ld||document.createElement("div"),Ld.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ld.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Gu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var xu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jD=["Webkit","ms","Moz","O"];Object.keys(xu).forEach(function(n){jD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),xu[e]=xu[n]})});function jA(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||xu.hasOwnProperty(n)&&xu[n]?(""+e).trim():e+"px"}function BA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=jA(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var BD=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bg(n,e){if(e){if(BD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Rg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cg=null;function D_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var kg=null,wa=null,Ia=null;function _I(n){if(n=qc(n)){if(typeof kg!="function")throw Error(z(280));var e=n.stateNode;e&&(e=zf(e),kg(n.stateNode,n.type,e))}}function $A(n){wa?Ia?Ia.push(n):Ia=[n]:wa=n}function zA(){if(wa){var n=wa,e=Ia;if(Ia=wa=null,_I(n),e)for(n=0;n<e.length;n++)_I(e[n])}}function qA(n,e){return n(e)}function WA(){}var Im=!1;function HA(n,e,t){if(Im)return n(e,t);Im=!0;try{return qA(n,e,t)}finally{Im=!1,(wa!==null||Ia!==null)&&(WA(),zA())}}function Ku(n,e){var t=n.stateNode;if(t===null)return null;var r=zf(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(z(231,e,typeof t));return t}var Dg=!1;if(Yr)try{var Yl={};Object.defineProperty(Yl,"passive",{get:function(){Dg=!0}}),window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{Dg=!1}function $D(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var bu=!1,Uh=null,jh=!1,Ng=null,zD={onError:function(n){bu=!0,Uh=n}};function qD(n,e,t,r,i,s,o,a,l){bu=!1,Uh=null,$D.apply(zD,arguments)}function WD(n,e,t,r,i,s,o,a,l){if(qD.apply(this,arguments),bu){if(bu){var c=Uh;bu=!1,Uh=null}else throw Error(z(198));jh||(jh=!0,Ng=c)}}function Oo(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function GA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function vI(n){if(Oo(n)!==n)throw Error(z(188))}function HD(n){var e=n.alternate;if(!e){if(e=Oo(n),e===null)throw Error(z(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return vI(i),n;if(s===r)return vI(i),e;s=s.sibling}throw Error(z(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(t.alternate!==r)throw Error(z(190))}if(t.tag!==3)throw Error(z(188));return t.stateNode.current===t?n:e}function KA(n){return n=HD(n),n!==null?QA(n):null}function QA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=QA(n);if(e!==null)return e;n=n.sibling}return null}var YA=An.unstable_scheduleCallback,wI=An.unstable_cancelCallback,GD=An.unstable_shouldYield,KD=An.unstable_requestPaint,nt=An.unstable_now,QD=An.unstable_getCurrentPriorityLevel,N_=An.unstable_ImmediatePriority,XA=An.unstable_UserBlockingPriority,Bh=An.unstable_NormalPriority,YD=An.unstable_LowPriority,JA=An.unstable_IdlePriority,Uf=null,yr=null;function XD(n){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Uf,n,void 0,(n.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:eN,JD=Math.log,ZD=Math.LN2;function eN(n){return n>>>=0,n===0?32:31-(JD(n)/ZD|0)|0}var Fd=64,Ud=4194304;function gu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function $h(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=gu(a):(s&=o,s!==0&&(r=gu(s)))}else o=t&~i,o!==0?r=gu(o):s!==0&&(r=gu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Qn(e),i=1<<t,r|=n[t],e&=~i;return r}function tN(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nN(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Qn(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=tN(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Og(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ZA(){var n=Fd;return Fd<<=1,!(Fd&4194240)&&(Fd=64),n}function Em(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function $c(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Qn(e),n[e]=t}function rN(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Qn(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function O_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Qn(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ee=0;function eP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var tP,V_,nP,rP,iP,Vg=!1,jd=[],qi=null,Wi=null,Hi=null,Qu=new Map,Yu=new Map,Ti=[],iN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function II(n,e){switch(n){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Qu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(e.pointerId)}}function Xl(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qc(e),e!==null&&V_(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function sN(n,e,t,r,i){switch(e){case"focusin":return qi=Xl(qi,n,e,t,r,i),!0;case"dragenter":return Wi=Xl(Wi,n,e,t,r,i),!0;case"mouseover":return Hi=Xl(Hi,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Qu.set(s,Xl(Qu.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Yu.set(s,Xl(Yu.get(s)||null,n,e,t,r,i)),!0}return!1}function sP(n){var e=Gs(n.target);if(e!==null){var t=Oo(e);if(t!==null){if(e=t.tag,e===13){if(e=GA(t),e!==null){n.blockedOn=e,iP(n.priority,function(){nP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Mg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Cg=r,t.target.dispatchEvent(r),Cg=null}else return e=qc(t),e!==null&&V_(e),n.blockedOn=t,!1;e.shift()}return!0}function EI(n,e,t){fh(n)&&t.delete(e)}function oN(){Vg=!1,qi!==null&&fh(qi)&&(qi=null),Wi!==null&&fh(Wi)&&(Wi=null),Hi!==null&&fh(Hi)&&(Hi=null),Qu.forEach(EI),Yu.forEach(EI)}function Jl(n,e){n.blockedOn===e&&(n.blockedOn=null,Vg||(Vg=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,oN)))}function Xu(n){function e(i){return Jl(i,n)}if(0<jd.length){Jl(jd[0],n);for(var t=1;t<jd.length;t++){var r=jd[t];r.blockedOn===n&&(r.blockedOn=null)}}for(qi!==null&&Jl(qi,n),Wi!==null&&Jl(Wi,n),Hi!==null&&Jl(Hi,n),Qu.forEach(e),Yu.forEach(e),t=0;t<Ti.length;t++)r=Ti[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ti.length&&(t=Ti[0],t.blockedOn===null);)sP(t),t.blockedOn===null&&Ti.shift()}var Ea=si.ReactCurrentBatchConfig,zh=!0;function aN(n,e,t,r){var i=Ee,s=Ea.transition;Ea.transition=null;try{Ee=1,M_(n,e,t,r)}finally{Ee=i,Ea.transition=s}}function lN(n,e,t,r){var i=Ee,s=Ea.transition;Ea.transition=null;try{Ee=4,M_(n,e,t,r)}finally{Ee=i,Ea.transition=s}}function M_(n,e,t,r){if(zh){var i=Mg(n,e,t,r);if(i===null)Dm(n,e,r,qh,t),II(n,r);else if(sN(i,n,e,t,r))r.stopPropagation();else if(II(n,r),e&4&&-1<iN.indexOf(n)){for(;i!==null;){var s=qc(i);if(s!==null&&tP(s),s=Mg(n,e,t,r),s===null&&Dm(n,e,r,qh,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dm(n,e,r,null,t)}}var qh=null;function Mg(n,e,t,r){if(qh=null,n=D_(r),n=Gs(n),n!==null)if(e=Oo(n),e===null)n=null;else if(t=e.tag,t===13){if(n=GA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return qh=n,null}function oP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QD()){case N_:return 1;case XA:return 4;case Bh:case YD:return 16;case JA:return 536870912;default:return 16}default:return 16}}var Li=null,L_=null,ph=null;function aP(){if(ph)return ph;var n,e=L_,t=e.length,r,i="value"in Li?Li.value:Li.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return ph=i.slice(n,1<r?1-r:void 0)}function mh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Bd(){return!0}function TI(){return!1}function Rn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bd:TI,this.isPropagationStopped=TI,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Bd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Bd)},persist:function(){},isPersistent:Bd}),e}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F_=Rn(_l),zc=$e({},_l,{view:0,detail:0}),uN=Rn(zc),Tm,Sm,Zl,jf=$e({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Zl&&(Zl&&n.type==="mousemove"?(Tm=n.screenX-Zl.screenX,Sm=n.screenY-Zl.screenY):Sm=Tm=0,Zl=n),Tm)},movementY:function(n){return"movementY"in n?n.movementY:Sm}}),SI=Rn(jf),cN=$e({},jf,{dataTransfer:0}),dN=Rn(cN),hN=$e({},zc,{relatedTarget:0}),Am=Rn(hN),fN=$e({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),pN=Rn(fN),mN=$e({},_l,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),gN=Rn(mN),yN=$e({},_l,{data:0}),AI=Rn(yN),_N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=wN[n])?!!e[n]:!1}function U_(){return IN}var EN=$e({},zc,{key:function(n){if(n.key){var e=_N[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=mh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?vN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U_,charCode:function(n){return n.type==="keypress"?mh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?mh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),TN=Rn(EN),SN=$e({},jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PI=Rn(SN),AN=$e({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U_}),PN=Rn(AN),xN=$e({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),bN=Rn(xN),RN=$e({},jf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),CN=Rn(RN),kN=[9,13,27,32],j_=Yr&&"CompositionEvent"in window,Ru=null;Yr&&"documentMode"in document&&(Ru=document.documentMode);var DN=Yr&&"TextEvent"in window&&!Ru,lP=Yr&&(!j_||Ru&&8<Ru&&11>=Ru),xI=" ",bI=!1;function uP(n,e){switch(n){case"keyup":return kN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var la=!1;function NN(n,e){switch(n){case"compositionend":return cP(e);case"keypress":return e.which!==32?null:(bI=!0,xI);case"textInput":return n=e.data,n===xI&&bI?null:n;default:return null}}function ON(n,e){if(la)return n==="compositionend"||!j_&&uP(n,e)?(n=aP(),ph=L_=Li=null,la=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lP&&e.locale!=="ko"?null:e.data;default:return null}}var VN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!VN[n.type]:e==="textarea"}function dP(n,e,t,r){$A(r),e=Wh(e,"onChange"),0<e.length&&(t=new F_("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Cu=null,Ju=null;function MN(n){EP(n,0)}function Bf(n){var e=da(n);if(VA(e))return n}function LN(n,e){if(n==="change")return e}var hP=!1;if(Yr){var Pm;if(Yr){var xm="oninput"in document;if(!xm){var CI=document.createElement("div");CI.setAttribute("oninput","return;"),xm=typeof CI.oninput=="function"}Pm=xm}else Pm=!1;hP=Pm&&(!document.documentMode||9<document.documentMode)}function kI(){Cu&&(Cu.detachEvent("onpropertychange",fP),Ju=Cu=null)}function fP(n){if(n.propertyName==="value"&&Bf(Ju)){var e=[];dP(e,Ju,n,D_(n)),HA(MN,e)}}function FN(n,e,t){n==="focusin"?(kI(),Cu=e,Ju=t,Cu.attachEvent("onpropertychange",fP)):n==="focusout"&&kI()}function UN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bf(Ju)}function jN(n,e){if(n==="click")return Bf(e)}function BN(n,e){if(n==="input"||n==="change")return Bf(e)}function $N(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Jn=typeof Object.is=="function"?Object.is:$N;function Zu(n,e){if(Jn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!_g.call(e,i)||!Jn(n[i],e[i]))return!1}return!0}function DI(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function NI(n,e){var t=DI(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=DI(t)}}function pP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?pP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function mP(){for(var n=window,e=Fh();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Fh(n.document)}return e}function B_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function zN(n){var e=mP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&pP(t.ownerDocument.documentElement,t)){if(r!==null&&B_(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=NI(t,s);var o=NI(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var qN=Yr&&"documentMode"in document&&11>=document.documentMode,ua=null,Lg=null,ku=null,Fg=!1;function OI(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Fg||ua==null||ua!==Fh(r)||(r=ua,"selectionStart"in r&&B_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ku&&Zu(ku,r)||(ku=r,r=Wh(Lg,"onSelect"),0<r.length&&(e=new F_("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ua)))}function $d(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ca={animationend:$d("Animation","AnimationEnd"),animationiteration:$d("Animation","AnimationIteration"),animationstart:$d("Animation","AnimationStart"),transitionend:$d("Transition","TransitionEnd")},bm={},gP={};Yr&&(gP=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function $f(n){if(bm[n])return bm[n];if(!ca[n])return n;var e=ca[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in gP)return bm[n]=e[t];return n}var yP=$f("animationend"),_P=$f("animationiteration"),vP=$f("animationstart"),wP=$f("transitionend"),IP=new Map,VI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(n,e){IP.set(n,e),No(e,[n])}for(var Rm=0;Rm<VI.length;Rm++){var Cm=VI[Rm],WN=Cm.toLowerCase(),HN=Cm[0].toUpperCase()+Cm.slice(1);_s(WN,"on"+HN)}_s(yP,"onAnimationEnd");_s(_P,"onAnimationIteration");_s(vP,"onAnimationStart");_s("dblclick","onDoubleClick");_s("focusin","onFocus");_s("focusout","onBlur");_s(wP,"onTransitionEnd");qa("onMouseEnter",["mouseout","mouseover"]);qa("onMouseLeave",["mouseout","mouseover"]);qa("onPointerEnter",["pointerout","pointerover"]);qa("onPointerLeave",["pointerout","pointerover"]);No("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));No("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));No("onBeforeInput",["compositionend","keypress","textInput","paste"]);No("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));No("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));No("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GN=new Set("cancel close invalid load scroll toggle".split(" ").concat(yu));function MI(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,WD(r,e,void 0,n),n.currentTarget=null}function EP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;MI(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;MI(i,a,c),s=l}}}if(jh)throw n=Ng,jh=!1,Ng=null,n}function Re(n,e){var t=e[zg];t===void 0&&(t=e[zg]=new Set);var r=n+"__bubble";t.has(r)||(TP(e,n,2,!1),t.add(r))}function km(n,e,t){var r=0;e&&(r|=4),TP(t,n,r,e)}var zd="_reactListening"+Math.random().toString(36).slice(2);function ec(n){if(!n[zd]){n[zd]=!0,CA.forEach(function(t){t!=="selectionchange"&&(GN.has(t)||km(t,!1,n),km(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[zd]||(e[zd]=!0,km("selectionchange",!1,e))}}function TP(n,e,t,r){switch(oP(e)){case 1:var i=aN;break;case 4:i=lN;break;default:i=M_}t=i.bind(null,e,t,n),i=void 0,!Dg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Dm(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}HA(function(){var c=s,d=D_(t),h=[];e:{var p=IP.get(n);if(p!==void 0){var g=F_,S=n;switch(n){case"keypress":if(mh(t)===0)break e;case"keydown":case"keyup":g=TN;break;case"focusin":S="focus",g=Am;break;case"focusout":S="blur",g=Am;break;case"beforeblur":case"afterblur":g=Am;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=SI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=dN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=PN;break;case yP:case _P:case vP:g=pN;break;case wP:g=bN;break;case"scroll":g=uN;break;case"wheel":g=CN;break;case"copy":case"cut":case"paste":g=gN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=PI}var T=(e&4)!==0,b=!T&&n==="scroll",I=T?p!==null?p+"Capture":null:p;T=[];for(var _=c,y;_!==null;){y=_;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,I!==null&&(k=Ku(_,I),k!=null&&T.push(tc(_,k,y)))),b)break;_=_.return}0<T.length&&(p=new g(p,S,null,t,d),h.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==Cg&&(S=t.relatedTarget||t.fromElement)&&(Gs(S)||S[Xr]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(S=t.relatedTarget||t.toElement,g=c,S=S?Gs(S):null,S!==null&&(b=Oo(S),S!==b||S.tag!==5&&S.tag!==6)&&(S=null)):(g=null,S=c),g!==S)){if(T=SI,k="onMouseLeave",I="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(T=PI,k="onPointerLeave",I="onPointerEnter",_="pointer"),b=g==null?p:da(g),y=S==null?p:da(S),p=new T(k,_+"leave",g,t,d),p.target=b,p.relatedTarget=y,k=null,Gs(d)===c&&(T=new T(I,_+"enter",S,t,d),T.target=y,T.relatedTarget=b,k=T),b=k,g&&S)t:{for(T=g,I=S,_=0,y=T;y;y=Go(y))_++;for(y=0,k=I;k;k=Go(k))y++;for(;0<_-y;)T=Go(T),_--;for(;0<y-_;)I=Go(I),y--;for(;_--;){if(T===I||I!==null&&T===I.alternate)break t;T=Go(T),I=Go(I)}T=null}else T=null;g!==null&&LI(h,p,g,T,!1),S!==null&&b!==null&&LI(h,b,S,T,!0)}}e:{if(p=c?da(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=LN;else if(RI(p))if(hP)V=BN;else{V=UN;var j=FN}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=jN);if(V&&(V=V(n,c))){dP(h,V,t,d);break e}j&&j(n,p,c),n==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&Ag(p,"number",p.value)}switch(j=c?da(c):window,n){case"focusin":(RI(j)||j.contentEditable==="true")&&(ua=j,Lg=c,ku=null);break;case"focusout":ku=Lg=ua=null;break;case"mousedown":Fg=!0;break;case"contextmenu":case"mouseup":case"dragend":Fg=!1,OI(h,t,d);break;case"selectionchange":if(qN)break;case"keydown":case"keyup":OI(h,t,d)}var A;if(j_)e:{switch(n){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else la?uP(n,t)&&(v="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(v="onCompositionStart");v&&(lP&&t.locale!=="ko"&&(la||v!=="onCompositionStart"?v==="onCompositionEnd"&&la&&(A=aP()):(Li=d,L_="value"in Li?Li.value:Li.textContent,la=!0)),j=Wh(c,v),0<j.length&&(v=new AI(v,n,null,t,d),h.push({event:v,listeners:j}),A?v.data=A:(A=cP(t),A!==null&&(v.data=A)))),(A=DN?NN(n,t):ON(n,t))&&(c=Wh(c,"onBeforeInput"),0<c.length&&(d=new AI("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=A))}EP(h,e)})}function tc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Wh(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ku(n,t),s!=null&&r.unshift(tc(n,s,i)),s=Ku(n,e),s!=null&&r.push(tc(n,s,i))),n=n.return}return r}function Go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function LI(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ku(t,s),l!=null&&o.unshift(tc(t,l,a))):i||(l=Ku(t,s),l!=null&&o.push(tc(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var KN=/\r\n?/g,QN=/\u0000|\uFFFD/g;function FI(n){return(typeof n=="string"?n:""+n).replace(KN,`
`).replace(QN,"")}function qd(n,e,t){if(e=FI(e),FI(n)!==e&&t)throw Error(z(425))}function Hh(){}var Ug=null,jg=null;function Bg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $g=typeof setTimeout=="function"?setTimeout:void 0,YN=typeof clearTimeout=="function"?clearTimeout:void 0,UI=typeof Promise=="function"?Promise:void 0,XN=typeof queueMicrotask=="function"?queueMicrotask:typeof UI<"u"?function(n){return UI.resolve(null).then(n).catch(JN)}:$g;function JN(n){setTimeout(function(){throw n})}function Nm(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Xu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Xu(e)}function Gi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function jI(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var vl=Math.random().toString(36).slice(2),or="__reactFiber$"+vl,nc="__reactProps$"+vl,Xr="__reactContainer$"+vl,zg="__reactEvents$"+vl,ZN="__reactListeners$"+vl,eO="__reactHandles$"+vl;function Gs(n){var e=n[or];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Xr]||t[or]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=jI(n);n!==null;){if(t=n[or])return t;n=jI(n)}return e}n=t,t=n.parentNode}return null}function qc(n){return n=n[or]||n[Xr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function da(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(z(33))}function zf(n){return n[nc]||null}var qg=[],ha=-1;function vs(n){return{current:n}}function ke(n){0>ha||(n.current=qg[ha],qg[ha]=null,ha--)}function Pe(n,e){ha++,qg[ha]=n.current,n.current=e}var is={},Bt=vs(is),gn=vs(!1),po=is;function Wa(n,e){var t=n.type.contextTypes;if(!t)return is;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function yn(n){return n=n.childContextTypes,n!=null}function Gh(){ke(gn),ke(Bt)}function BI(n,e,t){if(Bt.current!==is)throw Error(z(168));Pe(Bt,e),Pe(gn,t)}function SP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,FD(n)||"Unknown",i));return $e({},t,r)}function Kh(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||is,po=Bt.current,Pe(Bt,n),Pe(gn,gn.current),!0}function $I(n,e,t){var r=n.stateNode;if(!r)throw Error(z(169));t?(n=SP(n,e,po),r.__reactInternalMemoizedMergedChildContext=n,ke(gn),ke(Bt),Pe(Bt,n)):ke(gn),Pe(gn,t)}var Lr=null,qf=!1,Om=!1;function AP(n){Lr===null?Lr=[n]:Lr.push(n)}function tO(n){qf=!0,AP(n)}function ws(){if(!Om&&Lr!==null){Om=!0;var n=0,e=Ee;try{var t=Lr;for(Ee=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Lr=null,qf=!1}catch(i){throw Lr!==null&&(Lr=Lr.slice(n+1)),YA(N_,ws),i}finally{Ee=e,Om=!1}}return null}var fa=[],pa=0,Qh=null,Yh=0,Nn=[],On=0,mo=null,Br=1,$r="";function Ls(n,e){fa[pa++]=Yh,fa[pa++]=Qh,Qh=n,Yh=e}function PP(n,e,t){Nn[On++]=Br,Nn[On++]=$r,Nn[On++]=mo,mo=n;var r=Br;n=$r;var i=32-Qn(r)-1;r&=~(1<<i),t+=1;var s=32-Qn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Br=1<<32-Qn(e)+i|t<<i|r,$r=s+n}else Br=1<<s|t<<i|r,$r=n}function $_(n){n.return!==null&&(Ls(n,1),PP(n,1,0))}function z_(n){for(;n===Qh;)Qh=fa[--pa],fa[pa]=null,Yh=fa[--pa],fa[pa]=null;for(;n===mo;)mo=Nn[--On],Nn[On]=null,$r=Nn[--On],Nn[On]=null,Br=Nn[--On],Nn[On]=null}var Sn=null,En=null,Ne=!1,Kn=null;function xP(n,e){var t=Vn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function zI(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Sn=n,En=Gi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Sn=n,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=mo!==null?{id:Br,overflow:$r}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Vn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Sn=n,En=null,!0):!1;default:return!1}}function Wg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Hg(n){if(Ne){var e=En;if(e){var t=e;if(!zI(n,e)){if(Wg(n))throw Error(z(418));e=Gi(t.nextSibling);var r=Sn;e&&zI(n,e)?xP(r,t):(n.flags=n.flags&-4097|2,Ne=!1,Sn=n)}}else{if(Wg(n))throw Error(z(418));n.flags=n.flags&-4097|2,Ne=!1,Sn=n}}}function qI(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Sn=n}function Wd(n){if(n!==Sn)return!1;if(!Ne)return qI(n),Ne=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Bg(n.type,n.memoizedProps)),e&&(e=En)){if(Wg(n))throw bP(),Error(z(418));for(;e;)xP(n,e),e=Gi(e.nextSibling)}if(qI(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(z(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){En=Gi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}En=null}}else En=Sn?Gi(n.stateNode.nextSibling):null;return!0}function bP(){for(var n=En;n;)n=Gi(n.nextSibling)}function Ha(){En=Sn=null,Ne=!1}function q_(n){Kn===null?Kn=[n]:Kn.push(n)}var nO=si.ReactCurrentBatchConfig;function eu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(z(309));var r=t.stateNode}if(!r)throw Error(z(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(z(284));if(!t._owner)throw Error(z(290,n))}return n}function Hd(n,e){throw n=Object.prototype.toString.call(e),Error(z(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function WI(n){var e=n._init;return e(n._payload)}function RP(n){function e(I,_){if(n){var y=I.deletions;y===null?(I.deletions=[_],I.flags|=16):y.push(_)}}function t(I,_){if(!n)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function i(I,_){return I=Xi(I,_),I.index=0,I.sibling=null,I}function s(I,_,y){return I.index=y,n?(y=I.alternate,y!==null?(y=y.index,y<_?(I.flags|=2,_):y):(I.flags|=2,_)):(I.flags|=1048576,_)}function o(I){return n&&I.alternate===null&&(I.flags|=2),I}function a(I,_,y,k){return _===null||_.tag!==6?(_=Bm(y,I.mode,k),_.return=I,_):(_=i(_,y),_.return=I,_)}function l(I,_,y,k){var V=y.type;return V===aa?d(I,_,y.props.children,k,y.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ii&&WI(V)===_.type)?(k=i(_,y.props),k.ref=eu(I,_,y),k.return=I,k):(k=Eh(y.type,y.key,y.props,null,I.mode,k),k.ref=eu(I,_,y),k.return=I,k)}function c(I,_,y,k){return _===null||_.tag!==4||_.stateNode.containerInfo!==y.containerInfo||_.stateNode.implementation!==y.implementation?(_=$m(y,I.mode,k),_.return=I,_):(_=i(_,y.children||[]),_.return=I,_)}function d(I,_,y,k,V){return _===null||_.tag!==7?(_=lo(y,I.mode,k,V),_.return=I,_):(_=i(_,y),_.return=I,_)}function h(I,_,y){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Bm(""+_,I.mode,y),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vd:return y=Eh(_.type,_.key,_.props,null,I.mode,y),y.ref=eu(I,null,_),y.return=I,y;case oa:return _=$m(_,I.mode,y),_.return=I,_;case Ii:var k=_._init;return h(I,k(_._payload),y)}if(mu(_)||Ql(_))return _=lo(_,I.mode,y,null),_.return=I,_;Hd(I,_)}return null}function p(I,_,y,k){var V=_!==null?_.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return V!==null?null:a(I,_,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vd:return y.key===V?l(I,_,y,k):null;case oa:return y.key===V?c(I,_,y,k):null;case Ii:return V=y._init,p(I,_,V(y._payload),k)}if(mu(y)||Ql(y))return V!==null?null:d(I,_,y,k,null);Hd(I,y)}return null}function g(I,_,y,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return I=I.get(y)||null,a(_,I,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Vd:return I=I.get(k.key===null?y:k.key)||null,l(_,I,k,V);case oa:return I=I.get(k.key===null?y:k.key)||null,c(_,I,k,V);case Ii:var j=k._init;return g(I,_,y,j(k._payload),V)}if(mu(k)||Ql(k))return I=I.get(y)||null,d(_,I,k,V,null);Hd(_,k)}return null}function S(I,_,y,k){for(var V=null,j=null,A=_,v=_=0,x=null;A!==null&&v<y.length;v++){A.index>v?(x=A,A=null):x=A.sibling;var P=p(I,A,y[v],k);if(P===null){A===null&&(A=x);break}n&&A&&P.alternate===null&&e(I,A),_=s(P,_,v),j===null?V=P:j.sibling=P,j=P,A=x}if(v===y.length)return t(I,A),Ne&&Ls(I,v),V;if(A===null){for(;v<y.length;v++)A=h(I,y[v],k),A!==null&&(_=s(A,_,v),j===null?V=A:j.sibling=A,j=A);return Ne&&Ls(I,v),V}for(A=r(I,A);v<y.length;v++)x=g(A,I,v,y[v],k),x!==null&&(n&&x.alternate!==null&&A.delete(x.key===null?v:x.key),_=s(x,_,v),j===null?V=x:j.sibling=x,j=x);return n&&A.forEach(function(D){return e(I,D)}),Ne&&Ls(I,v),V}function T(I,_,y,k){var V=Ql(y);if(typeof V!="function")throw Error(z(150));if(y=V.call(y),y==null)throw Error(z(151));for(var j=V=null,A=_,v=_=0,x=null,P=y.next();A!==null&&!P.done;v++,P=y.next()){A.index>v?(x=A,A=null):x=A.sibling;var D=p(I,A,P.value,k);if(D===null){A===null&&(A=x);break}n&&A&&D.alternate===null&&e(I,A),_=s(D,_,v),j===null?V=D:j.sibling=D,j=D,A=x}if(P.done)return t(I,A),Ne&&Ls(I,v),V;if(A===null){for(;!P.done;v++,P=y.next())P=h(I,P.value,k),P!==null&&(_=s(P,_,v),j===null?V=P:j.sibling=P,j=P);return Ne&&Ls(I,v),V}for(A=r(I,A);!P.done;v++,P=y.next())P=g(A,I,v,P.value,k),P!==null&&(n&&P.alternate!==null&&A.delete(P.key===null?v:P.key),_=s(P,_,v),j===null?V=P:j.sibling=P,j=P);return n&&A.forEach(function(N){return e(I,N)}),Ne&&Ls(I,v),V}function b(I,_,y,k){if(typeof y=="object"&&y!==null&&y.type===aa&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Vd:e:{for(var V=y.key,j=_;j!==null;){if(j.key===V){if(V=y.type,V===aa){if(j.tag===7){t(I,j.sibling),_=i(j,y.props.children),_.return=I,I=_;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ii&&WI(V)===j.type){t(I,j.sibling),_=i(j,y.props),_.ref=eu(I,j,y),_.return=I,I=_;break e}t(I,j);break}else e(I,j);j=j.sibling}y.type===aa?(_=lo(y.props.children,I.mode,k,y.key),_.return=I,I=_):(k=Eh(y.type,y.key,y.props,null,I.mode,k),k.ref=eu(I,_,y),k.return=I,I=k)}return o(I);case oa:e:{for(j=y.key;_!==null;){if(_.key===j)if(_.tag===4&&_.stateNode.containerInfo===y.containerInfo&&_.stateNode.implementation===y.implementation){t(I,_.sibling),_=i(_,y.children||[]),_.return=I,I=_;break e}else{t(I,_);break}else e(I,_);_=_.sibling}_=$m(y,I.mode,k),_.return=I,I=_}return o(I);case Ii:return j=y._init,b(I,_,j(y._payload),k)}if(mu(y))return S(I,_,y,k);if(Ql(y))return T(I,_,y,k);Hd(I,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,_!==null&&_.tag===6?(t(I,_.sibling),_=i(_,y),_.return=I,I=_):(t(I,_),_=Bm(y,I.mode,k),_.return=I,I=_),o(I)):t(I,_)}return b}var Ga=RP(!0),CP=RP(!1),Xh=vs(null),Jh=null,ma=null,W_=null;function H_(){W_=ma=Jh=null}function G_(n){var e=Xh.current;ke(Xh),n._currentValue=e}function Gg(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ta(n,e){Jh=n,W_=ma=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(hn=!0),n.firstContext=null)}function Un(n){var e=n._currentValue;if(W_!==n)if(n={context:n,memoizedValue:e,next:null},ma===null){if(Jh===null)throw Error(z(308));ma=n,Jh.dependencies={lanes:0,firstContext:n}}else ma=ma.next=n;return e}var Ks=null;function K_(n){Ks===null?Ks=[n]:Ks.push(n)}function kP(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,K_(e)):(t.next=i.next,i.next=t),e.interleaved=t,Jr(n,r)}function Jr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ei=!1;function Q_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Hr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ki(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jr(n,t)}return i=r.interleaved,i===null?(e.next=e,K_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jr(n,t)}function gh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,O_(n,t)}}function HI(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Zh(n,e,t,r){var i=n.updateQueue;Ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=n,T=a;switch(p=e,g=t,T.tag){case 1:if(S=T.payload,typeof S=="function"){h=S.call(g,h,p);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=T.payload,p=typeof S=="function"?S.call(g,h,p):S,p==null)break e;h=$e({},h,p);break e;case 2:Ei=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yo|=o,n.lanes=o,n.memoizedState=h}}function GI(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Wc={},_r=vs(Wc),rc=vs(Wc),ic=vs(Wc);function Qs(n){if(n===Wc)throw Error(z(174));return n}function Y_(n,e){switch(Pe(ic,e),Pe(rc,n),Pe(_r,Wc),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=xg(e,n)}ke(_r),Pe(_r,e)}function Ka(){ke(_r),ke(rc),ke(ic)}function NP(n){Qs(ic.current);var e=Qs(_r.current),t=xg(e,n.type);e!==t&&(Pe(rc,n),Pe(_r,t))}function X_(n){rc.current===n&&(ke(_r),ke(rc))}var Fe=vs(0);function ef(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vm=[];function J_(){for(var n=0;n<Vm.length;n++)Vm[n]._workInProgressVersionPrimary=null;Vm.length=0}var yh=si.ReactCurrentDispatcher,Mm=si.ReactCurrentBatchConfig,go=0,je=null,dt=null,wt=null,tf=!1,Du=!1,sc=0,rO=0;function Mt(){throw Error(z(321))}function Z_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Jn(n[t],e[t]))return!1;return!0}function ev(n,e,t,r,i,s){if(go=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yh.current=n===null||n.memoizedState===null?aO:lO,n=t(r,i),Du){s=0;do{if(Du=!1,sc=0,25<=s)throw Error(z(301));s+=1,wt=dt=null,e.updateQueue=null,yh.current=uO,n=t(r,i)}while(Du)}if(yh.current=nf,e=dt!==null&&dt.next!==null,go=0,wt=dt=je=null,tf=!1,e)throw Error(z(300));return n}function tv(){var n=sc!==0;return sc=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?je.memoizedState=wt=n:wt=wt.next=n,wt}function jn(){if(dt===null){var n=je.alternate;n=n!==null?n.memoizedState:null}else n=dt.next;var e=wt===null?je.memoizedState:wt.next;if(e!==null)wt=e,dt=n;else{if(n===null)throw Error(z(310));dt=n,n={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},wt===null?je.memoizedState=wt=n:wt=wt.next=n}return wt}function oc(n,e){return typeof e=="function"?e(n):e}function Lm(n){var e=jn(),t=e.queue;if(t===null)throw Error(z(311));t.lastRenderedReducer=n;var r=dt,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((go&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,je.lanes|=d,yo|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Jn(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,je.lanes|=s,yo|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Fm(n){var e=jn(),t=e.queue;if(t===null)throw Error(z(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Jn(s,e.memoizedState)||(hn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function OP(){}function VP(n,e){var t=je,r=jn(),i=e(),s=!Jn(r.memoizedState,i);if(s&&(r.memoizedState=i,hn=!0),r=r.queue,nv(FP.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||wt!==null&&wt.memoizedState.tag&1){if(t.flags|=2048,ac(9,LP.bind(null,t,r,i,e),void 0,null),Et===null)throw Error(z(349));go&30||MP(t,e,i)}return i}function MP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function LP(n,e,t,r){e.value=t,e.getSnapshot=r,UP(e)&&jP(n)}function FP(n,e,t){return t(function(){UP(e)&&jP(n)})}function UP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Jn(n,t)}catch{return!0}}function jP(n){var e=Jr(n,1);e!==null&&Yn(e,n,1,-1)}function KI(n){var e=nr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oc,lastRenderedState:n},e.queue=n,n=n.dispatch=oO.bind(null,je,n),[e.memoizedState,n]}function ac(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function BP(){return jn().memoizedState}function _h(n,e,t,r){var i=nr();je.flags|=n,i.memoizedState=ac(1|e,t,void 0,r===void 0?null:r)}function Wf(n,e,t,r){var i=jn();r=r===void 0?null:r;var s=void 0;if(dt!==null){var o=dt.memoizedState;if(s=o.destroy,r!==null&&Z_(r,o.deps)){i.memoizedState=ac(e,t,s,r);return}}je.flags|=n,i.memoizedState=ac(1|e,t,s,r)}function QI(n,e){return _h(8390656,8,n,e)}function nv(n,e){return Wf(2048,8,n,e)}function $P(n,e){return Wf(4,2,n,e)}function zP(n,e){return Wf(4,4,n,e)}function qP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function WP(n,e,t){return t=t!=null?t.concat([n]):null,Wf(4,4,qP.bind(null,e,n),t)}function rv(){}function HP(n,e){var t=jn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Z_(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function GP(n,e){var t=jn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Z_(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function KP(n,e,t){return go&21?(Jn(t,e)||(t=ZA(),je.lanes|=t,yo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,hn=!0),n.memoizedState=t)}function iO(n,e){var t=Ee;Ee=t!==0&&4>t?t:4,n(!0);var r=Mm.transition;Mm.transition={};try{n(!1),e()}finally{Ee=t,Mm.transition=r}}function QP(){return jn().memoizedState}function sO(n,e,t){var r=Yi(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},YP(n))XP(e,t);else if(t=kP(n,e,t,r),t!==null){var i=Jt();Yn(t,n,r,i),JP(t,e,r)}}function oO(n,e,t){var r=Yi(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(YP(n))XP(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o)){var l=e.interleaved;l===null?(i.next=i,K_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=kP(n,e,i,r),t!==null&&(i=Jt(),Yn(t,n,r,i),JP(t,e,r))}}function YP(n){var e=n.alternate;return n===je||e!==null&&e===je}function XP(n,e){Du=tf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function JP(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,O_(n,t)}}var nf={readContext:Un,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},aO={readContext:Un,useCallback:function(n,e){return nr().memoizedState=[n,e===void 0?null:e],n},useContext:Un,useEffect:QI,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,_h(4194308,4,qP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return _h(4194308,4,n,e)},useInsertionEffect:function(n,e){return _h(4,2,n,e)},useMemo:function(n,e){var t=nr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=nr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=sO.bind(null,je,n),[r.memoizedState,n]},useRef:function(n){var e=nr();return n={current:n},e.memoizedState=n},useState:KI,useDebugValue:rv,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=KI(!1),e=n[0];return n=iO.bind(null,n[1]),nr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=je,i=nr();if(Ne){if(t===void 0)throw Error(z(407));t=t()}else{if(t=e(),Et===null)throw Error(z(349));go&30||MP(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,QI(FP.bind(null,r,s,n),[n]),r.flags|=2048,ac(9,LP.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=nr(),e=Et.identifierPrefix;if(Ne){var t=$r,r=Br;t=(r&~(1<<32-Qn(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=sc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=rO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},lO={readContext:Un,useCallback:HP,useContext:Un,useEffect:nv,useImperativeHandle:WP,useInsertionEffect:$P,useLayoutEffect:zP,useMemo:GP,useReducer:Lm,useRef:BP,useState:function(){return Lm(oc)},useDebugValue:rv,useDeferredValue:function(n){var e=jn();return KP(e,dt.memoizedState,n)},useTransition:function(){var n=Lm(oc)[0],e=jn().memoizedState;return[n,e]},useMutableSource:OP,useSyncExternalStore:VP,useId:QP,unstable_isNewReconciler:!1},uO={readContext:Un,useCallback:HP,useContext:Un,useEffect:nv,useImperativeHandle:WP,useInsertionEffect:$P,useLayoutEffect:zP,useMemo:GP,useReducer:Fm,useRef:BP,useState:function(){return Fm(oc)},useDebugValue:rv,useDeferredValue:function(n){var e=jn();return dt===null?e.memoizedState=n:KP(e,dt.memoizedState,n)},useTransition:function(){var n=Fm(oc)[0],e=jn().memoizedState;return[n,e]},useMutableSource:OP,useSyncExternalStore:VP,useId:QP,unstable_isNewReconciler:!1};function qn(n,e){if(n&&n.defaultProps){e=$e({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Kg(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:$e({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Hf={isMounted:function(n){return(n=n._reactInternals)?Oo(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Jt(),i=Yi(n),s=Hr(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ki(n,s,i),e!==null&&(Yn(e,n,i,r),gh(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Jt(),i=Yi(n),s=Hr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ki(n,s,i),e!==null&&(Yn(e,n,i,r),gh(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Jt(),r=Yi(n),i=Hr(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ki(n,i,r),e!==null&&(Yn(e,n,r,t),gh(e,n,r))}};function YI(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zu(t,r)||!Zu(i,s):!0}function ZP(n,e,t){var r=!1,i=is,s=e.contextType;return typeof s=="object"&&s!==null?s=Un(s):(i=yn(e)?po:Bt.current,r=e.contextTypes,s=(r=r!=null)?Wa(n,i):is),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hf,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function XI(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Hf.enqueueReplaceState(e,e.state,null)}function Qg(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},Q_(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Un(s):(s=yn(e)?po:Bt.current,i.context=Wa(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kg(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Hf.enqueueReplaceState(i,i.state,null),Zh(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Qa(n,e){try{var t="",r=e;do t+=LD(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Um(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Yg(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var cO=typeof WeakMap=="function"?WeakMap:Map;function ex(n,e,t){t=Hr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){sf||(sf=!0,oy=r),Yg(n,e)},t}function tx(n,e,t){t=Hr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Yg(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Yg(n,e),typeof r!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function JI(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new cO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=SO.bind(null,n,e,t),e.then(n,n))}function ZI(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function eE(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Hr(-1,1),e.tag=2,Ki(t,e,1))),t.lanes|=1),n)}var dO=si.ReactCurrentOwner,hn=!1;function Gt(n,e,t,r){e.child=n===null?CP(e,null,t,r):Ga(e,n.child,t,r)}function tE(n,e,t,r,i){t=t.render;var s=e.ref;return Ta(e,i),r=ev(n,e,t,r,s,i),t=tv(),n!==null&&!hn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Zr(n,e,i)):(Ne&&t&&$_(e),e.flags|=1,Gt(n,e,r,i),e.child)}function nE(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!dv(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,nx(n,e,s,r,i)):(n=Eh(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Zu,t(o,r)&&n.ref===e.ref)return Zr(n,e,i)}return e.flags|=1,n=Xi(s,r),n.ref=e.ref,n.return=e,e.child=n}function nx(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Zu(s,r)&&n.ref===e.ref)if(hn=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(hn=!0);else return e.lanes=n.lanes,Zr(n,e,i)}return Xg(n,e,t,r,i)}function rx(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(ya,wn),wn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Pe(ya,wn),wn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Pe(ya,wn),wn|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Pe(ya,wn),wn|=r;return Gt(n,e,i,t),e.child}function ix(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Xg(n,e,t,r,i){var s=yn(t)?po:Bt.current;return s=Wa(e,s),Ta(e,i),t=ev(n,e,t,r,s,i),r=tv(),n!==null&&!hn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Zr(n,e,i)):(Ne&&r&&$_(e),e.flags|=1,Gt(n,e,t,i),e.child)}function rE(n,e,t,r,i){if(yn(t)){var s=!0;Kh(e)}else s=!1;if(Ta(e,i),e.stateNode===null)vh(n,e),ZP(e,t,r),Qg(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Un(c):(c=yn(t)?po:Bt.current,c=Wa(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&XI(e,o,r,c),Ei=!1;var p=e.memoizedState;o.state=p,Zh(e,r,o,i),l=e.memoizedState,a!==r||p!==l||gn.current||Ei?(typeof d=="function"&&(Kg(e,t,d,r),l=e.memoizedState),(a=Ei||YI(e,t,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,DP(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:qn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Un(l):(l=yn(t)?po:Bt.current,l=Wa(e,l));var g=t.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&XI(e,o,r,l),Ei=!1,p=e.memoizedState,o.state=p,Zh(e,r,o,i);var S=e.memoizedState;a!==h||p!==S||gn.current||Ei?(typeof g=="function"&&(Kg(e,t,g,r),S=e.memoizedState),(c=Ei||YI(e,t,c,r,p,S,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return Jg(n,e,t,r,s,i)}function Jg(n,e,t,r,i,s){ix(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&$I(e,t,!1),Zr(n,e,s);r=e.stateNode,dO.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Ga(e,n.child,null,s),e.child=Ga(e,null,a,s)):Gt(n,e,a,s),e.memoizedState=r.state,i&&$I(e,t,!0),e.child}function sx(n){var e=n.stateNode;e.pendingContext?BI(n,e.pendingContext,e.pendingContext!==e.context):e.context&&BI(n,e.context,!1),Y_(n,e.containerInfo)}function iE(n,e,t,r,i){return Ha(),q_(i),e.flags|=256,Gt(n,e,t,r),e.child}var Zg={dehydrated:null,treeContext:null,retryLane:0};function ey(n){return{baseLanes:n,cachePool:null,transitions:null}}function ox(n,e,t){var r=e.pendingProps,i=Fe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Pe(Fe,i&1),n===null)return Hg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qf(o,r,0,null),n=lo(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=ey(t),e.memoizedState=Zg,n):iv(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hO(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xi(a,s):(s=lo(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?ey(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Zg,r}return s=n.child,n=s.sibling,r=Xi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function iv(n,e){return e=Qf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Gd(n,e,t,r){return r!==null&&q_(r),Ga(e,n.child,null,t),n=iv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function hO(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Um(Error(z(422))),Gd(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qf({mode:"visible",children:r.children},i,0,null),s=lo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ga(e,n.child,null,o),e.child.memoizedState=ey(o),e.memoizedState=Zg,s);if(!(e.mode&1))return Gd(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=Um(s,r,void 0),Gd(n,e,o,r)}if(a=(o&n.childLanes)!==0,hn||a){if(r=Et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Jr(n,i),Yn(r,n,i,-1))}return cv(),r=Um(Error(z(421))),Gd(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=AO.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,En=Gi(i.nextSibling),Sn=e,Ne=!0,Kn=null,n!==null&&(Nn[On++]=Br,Nn[On++]=$r,Nn[On++]=mo,Br=n.id,$r=n.overflow,mo=e),e=iv(e,r.children),e.flags|=4096,e)}function sE(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Gg(n.return,e,t)}function jm(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function ax(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gt(n,e,r.children,t),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sE(n,t,e);else if(n.tag===19)sE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Pe(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&ef(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),jm(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&ef(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}jm(e,!0,t,null,s);break;case"together":jm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vh(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Zr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),yo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(z(153));if(e.child!==null){for(n=e.child,t=Xi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Xi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function fO(n,e,t){switch(e.tag){case 3:sx(e),Ha();break;case 5:NP(e);break;case 1:yn(e.type)&&Kh(e);break;case 4:Y_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(Xh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Fe,Fe.current&1),e.flags|=128,null):t&e.child.childLanes?ox(n,e,t):(Pe(Fe,Fe.current&1),n=Zr(n,e,t),n!==null?n.sibling:null);Pe(Fe,Fe.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return ax(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,rx(n,e,t)}return Zr(n,e,t)}var lx,ty,ux,cx;lx=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ty=function(){};ux=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Qs(_r.current);var s=null;switch(t){case"input":i=Tg(n,i),r=Tg(n,r),s=[];break;case"select":i=$e({},i,{value:void 0}),r=$e({},r,{value:void 0}),s=[];break;case"textarea":i=Pg(n,i),r=Pg(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Hh)}bg(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Re("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};cx=function(n,e,t,r){t!==r&&(e.flags|=4)};function tu(n,e){if(!Ne)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Lt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function pO(n,e,t){var r=e.pendingProps;switch(z_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return yn(e.type)&&Gh(),Lt(e),null;case 3:return r=e.stateNode,Ka(),ke(gn),ke(Bt),J_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Wd(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(uy(Kn),Kn=null))),ty(n,e),Lt(e),null;case 5:X_(e);var i=Qs(ic.current);if(t=e.type,n!==null&&e.stateNode!=null)ux(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Lt(e),null}if(n=Qs(_r.current),Wd(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[or]=e,r[nc]=s,n=(e.mode&1)!==0,t){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<yu.length;i++)Re(yu[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":pI(r,s),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Re("invalid",r);break;case"textarea":gI(r,s),Re("invalid",r)}bg(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&qd(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qd(r.textContent,a,n),i=["children",""+a]):Hu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(t){case"input":Md(r),mI(r,s,!0);break;case"textarea":Md(r),yI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Hh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=FA(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[or]=e,n[nc]=r,lx(n,e,!1,!1),e.stateNode=n;e:{switch(o=Rg(t,r),t){case"dialog":Re("cancel",n),Re("close",n),i=r;break;case"iframe":case"object":case"embed":Re("load",n),i=r;break;case"video":case"audio":for(i=0;i<yu.length;i++)Re(yu[i],n);i=r;break;case"source":Re("error",n),i=r;break;case"img":case"image":case"link":Re("error",n),Re("load",n),i=r;break;case"details":Re("toggle",n),i=r;break;case"input":pI(n,r),i=Tg(n,r),Re("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=$e({},r,{value:void 0}),Re("invalid",n);break;case"textarea":gI(n,r),i=Pg(n,r),Re("invalid",n);break;default:i=r}bg(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?BA(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&UA(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Gu(n,l):typeof l=="number"&&Gu(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Re("scroll",n):l!=null&&b_(n,s,l,o))}switch(t){case"input":Md(n),mI(n,r,!1);break;case"textarea":Md(n),yI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+rs(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?va(n,!!r.multiple,s,!1):r.defaultValue!=null&&va(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Hh)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(n&&e.stateNode!=null)cx(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(t=Qs(ic.current),Qs(_r.current),Wd(e)){if(r=e.stateNode,t=e.memoizedProps,r[or]=e,(s=r.nodeValue!==t)&&(n=Sn,n!==null))switch(n.tag){case 3:qd(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&qd(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return Lt(e),null;case 13:if(ke(Fe),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ne&&En!==null&&e.mode&1&&!(e.flags&128))bP(),Ha(),e.flags|=98560,s=!1;else if(s=Wd(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[or]=e}else Ha(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),s=!1}else Kn!==null&&(uy(Kn),Kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Fe.current&1?pt===0&&(pt=3):cv())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Ka(),ty(n,e),n===null&&ec(e.stateNode.containerInfo),Lt(e),null;case 10:return G_(e.type._context),Lt(e),null;case 17:return yn(e.type)&&Gh(),Lt(e),null;case 19:if(ke(Fe),s=e.memoizedState,s===null)return Lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)tu(s,!1);else{if(pt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=ef(n),o!==null){for(e.flags|=128,tu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Pe(Fe,Fe.current&1|2),e.child}n=n.sibling}s.tail!==null&&nt()>Ya&&(e.flags|=128,r=!0,tu(s,!1),e.lanes=4194304)}else{if(!r)if(n=ef(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),tu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return Lt(e),null}else 2*nt()-s.renderingStartTime>Ya&&t!==1073741824&&(e.flags|=128,r=!0,tu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,t=Fe.current,Pe(Fe,r?t&1|2:t&1),e):(Lt(e),null);case 22:case 23:return uv(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function mO(n,e){switch(z_(e),e.tag){case 1:return yn(e.type)&&Gh(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ka(),ke(gn),ke(Bt),J_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return X_(e),null;case 13:if(ke(Fe),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ha()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ke(Fe),null;case 4:return Ka(),null;case 10:return G_(e.type._context),null;case 22:case 23:return uv(),null;case 24:return null;default:return null}}var Kd=!1,jt=!1,gO=typeof WeakSet=="function"?WeakSet:Set,J=null;function ga(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){He(n,e,r)}else t.current=null}function ny(n,e,t){try{t()}catch(r){He(n,e,r)}}var oE=!1;function yO(n,e){if(Ug=zh,n=mP(),B_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,p=null;t:for(;;){for(var g;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(jg={focusedElem:n,selectionRange:t},zh=!1,J=e;J!==null;)if(e=J,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,J=n;else for(;J!==null;){e=J;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var T=S.memoizedProps,b=S.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?T:qn(e.type,T),b);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(k){He(e,e.return,k)}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}return S=oE,oE=!1,S}function Nu(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&ny(e,t,s)}i=i.next}while(i!==r)}}function Gf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function ry(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function dx(n){var e=n.alternate;e!==null&&(n.alternate=null,dx(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[or],delete e[nc],delete e[zg],delete e[ZN],delete e[eO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hx(n){return n.tag===5||n.tag===3||n.tag===4}function aE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function iy(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Hh));else if(r!==4&&(n=n.child,n!==null))for(iy(n,e,t),n=n.sibling;n!==null;)iy(n,e,t),n=n.sibling}function sy(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(sy(n,e,t),n=n.sibling;n!==null;)sy(n,e,t),n=n.sibling}var Pt=null,Gn=!1;function pi(n,e,t){for(t=t.child;t!==null;)fx(n,e,t),t=t.sibling}function fx(n,e,t){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Uf,t)}catch{}switch(t.tag){case 5:jt||ga(t,e);case 6:var r=Pt,i=Gn;Pt=null,pi(n,e,t),Pt=r,Gn=i,Pt!==null&&(Gn?(n=Pt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Pt.removeChild(t.stateNode));break;case 18:Pt!==null&&(Gn?(n=Pt,t=t.stateNode,n.nodeType===8?Nm(n.parentNode,t):n.nodeType===1&&Nm(n,t),Xu(n)):Nm(Pt,t.stateNode));break;case 4:r=Pt,i=Gn,Pt=t.stateNode.containerInfo,Gn=!0,pi(n,e,t),Pt=r,Gn=i;break;case 0:case 11:case 14:case 15:if(!jt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ny(t,e,o),i=i.next}while(i!==r)}pi(n,e,t);break;case 1:if(!jt&&(ga(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){He(t,e,a)}pi(n,e,t);break;case 21:pi(n,e,t);break;case 22:t.mode&1?(jt=(r=jt)||t.memoizedState!==null,pi(n,e,t),jt=r):pi(n,e,t);break;default:pi(n,e,t)}}function lE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new gO),e.forEach(function(r){var i=PO.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function zn(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pt=a.stateNode,Gn=!1;break e;case 3:Pt=a.stateNode.containerInfo,Gn=!0;break e;case 4:Pt=a.stateNode.containerInfo,Gn=!0;break e}a=a.return}if(Pt===null)throw Error(z(160));fx(s,o,i),Pt=null,Gn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){He(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)px(e,n),e=e.sibling}function px(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(zn(e,n),er(n),r&4){try{Nu(3,n,n.return),Gf(3,n)}catch(T){He(n,n.return,T)}try{Nu(5,n,n.return)}catch(T){He(n,n.return,T)}}break;case 1:zn(e,n),er(n),r&512&&t!==null&&ga(t,t.return);break;case 5:if(zn(e,n),er(n),r&512&&t!==null&&ga(t,t.return),n.flags&32){var i=n.stateNode;try{Gu(i,"")}catch(T){He(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&MA(i,s),Rg(a,o);var c=Rg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?BA(i,h):d==="dangerouslySetInnerHTML"?UA(i,h):d==="children"?Gu(i,h):b_(i,d,h,c)}switch(a){case"input":Sg(i,s);break;case"textarea":LA(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?va(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?va(i,!!s.multiple,s.defaultValue,!0):va(i,!!s.multiple,s.multiple?[]:"",!1))}i[nc]=s}catch(T){He(n,n.return,T)}}break;case 6:if(zn(e,n),er(n),r&4){if(n.stateNode===null)throw Error(z(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){He(n,n.return,T)}}break;case 3:if(zn(e,n),er(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Xu(e.containerInfo)}catch(T){He(n,n.return,T)}break;case 4:zn(e,n),er(n);break;case 13:zn(e,n),er(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(av=nt())),r&4&&lE(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(jt=(c=jt)||d,zn(e,n),jt=c):zn(e,n),er(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(J=n,d=n.child;d!==null;){for(h=J=d;J!==null;){switch(p=J,g=p.child,p.tag){case 0:case 11:case 14:case 15:Nu(4,p,p.return);break;case 1:ga(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(T){He(r,t,T)}}break;case 5:ga(p,p.return);break;case 22:if(p.memoizedState!==null){cE(h);continue}}g!==null?(g.return=p,J=g):cE(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=jA("display",o))}catch(T){He(n,n.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){He(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:zn(e,n),er(n),r&4&&lE(n);break;case 21:break;default:zn(e,n),er(n)}}function er(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(hx(t)){var r=t;break e}t=t.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Gu(i,""),r.flags&=-33);var s=aE(n);sy(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=aE(n);iy(n,a,o);break;default:throw Error(z(161))}}catch(l){He(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function _O(n,e,t){J=n,mx(n)}function mx(n,e,t){for(var r=(n.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Kd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jt;a=Kd;var c=jt;if(Kd=o,(jt=l)&&!c)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?dE(i):l!==null?(l.return=o,J=l):dE(i);for(;s!==null;)J=s,mx(s),s=s.sibling;J=i,Kd=a,jt=c}uE(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):uE(n)}}function uE(n){for(;J!==null;){var e=J;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Gf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:qn(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&GI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}GI(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Xu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}jt||e.flags&512&&ry(e)}catch(p){He(e,e.return,p)}}if(e===n){J=null;break}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}}function cE(n){for(;J!==null;){var e=J;if(e===n){J=null;break}var t=e.sibling;if(t!==null){t.return=e.return,J=t;break}J=e.return}}function dE(n){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Gf(4,e)}catch(l){He(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){He(e,i,l)}}var s=e.return;try{ry(e)}catch(l){He(e,s,l)}break;case 5:var o=e.return;try{ry(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===n){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var vO=Math.ceil,rf=si.ReactCurrentDispatcher,sv=si.ReactCurrentOwner,Ln=si.ReactCurrentBatchConfig,me=0,Et=null,ct=null,Rt=0,wn=0,ya=vs(0),pt=0,lc=null,yo=0,Kf=0,ov=0,Ou=null,cn=null,av=0,Ya=1/0,Mr=null,sf=!1,oy=null,Qi=null,Qd=!1,Fi=null,of=0,Vu=0,ay=null,wh=-1,Ih=0;function Jt(){return me&6?nt():wh!==-1?wh:wh=nt()}function Yi(n){return n.mode&1?me&2&&Rt!==0?Rt&-Rt:nO.transition!==null?(Ih===0&&(Ih=ZA()),Ih):(n=Ee,n!==0||(n=window.event,n=n===void 0?16:oP(n.type)),n):1}function Yn(n,e,t,r){if(50<Vu)throw Vu=0,ay=null,Error(z(185));$c(n,t,r),(!(me&2)||n!==Et)&&(n===Et&&(!(me&2)&&(Kf|=t),pt===4&&Si(n,Rt)),_n(n,r),t===1&&me===0&&!(e.mode&1)&&(Ya=nt()+500,qf&&ws()))}function _n(n,e){var t=n.callbackNode;nN(n,e);var r=$h(n,n===Et?Rt:0);if(r===0)t!==null&&wI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&wI(t),e===1)n.tag===0?tO(hE.bind(null,n)):AP(hE.bind(null,n)),XN(function(){!(me&6)&&ws()}),t=null;else{switch(eP(r)){case 1:t=N_;break;case 4:t=XA;break;case 16:t=Bh;break;case 536870912:t=JA;break;default:t=Bh}t=Tx(t,gx.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function gx(n,e){if(wh=-1,Ih=0,me&6)throw Error(z(327));var t=n.callbackNode;if(Sa()&&n.callbackNode!==t)return null;var r=$h(n,n===Et?Rt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=af(n,r);else{e=r;var i=me;me|=2;var s=_x();(Et!==n||Rt!==e)&&(Mr=null,Ya=nt()+500,ao(n,e));do try{EO();break}catch(a){yx(n,a)}while(!0);H_(),rf.current=s,me=i,ct!==null?e=0:(Et=null,Rt=0,e=pt)}if(e!==0){if(e===2&&(i=Og(n),i!==0&&(r=i,e=ly(n,i))),e===1)throw t=lc,ao(n,0),Si(n,r),_n(n,nt()),t;if(e===6)Si(n,r);else{if(i=n.current.alternate,!(r&30)&&!wO(i)&&(e=af(n,r),e===2&&(s=Og(n),s!==0&&(r=s,e=ly(n,s))),e===1))throw t=lc,ao(n,0),Si(n,r),_n(n,nt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Fs(n,cn,Mr);break;case 3:if(Si(n,r),(r&130023424)===r&&(e=av+500-nt(),10<e)){if($h(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Jt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=$g(Fs.bind(null,n,cn,Mr),e);break}Fs(n,cn,Mr);break;case 4:if(Si(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Qn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vO(r/1960))-r,10<r){n.timeoutHandle=$g(Fs.bind(null,n,cn,Mr),r);break}Fs(n,cn,Mr);break;case 5:Fs(n,cn,Mr);break;default:throw Error(z(329))}}}return _n(n,nt()),n.callbackNode===t?gx.bind(null,n):null}function ly(n,e){var t=Ou;return n.current.memoizedState.isDehydrated&&(ao(n,e).flags|=256),n=af(n,e),n!==2&&(e=cn,cn=t,e!==null&&uy(e)),n}function uy(n){cn===null?cn=n:cn.push.apply(cn,n)}function wO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Si(n,e){for(e&=~ov,e&=~Kf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Qn(e),r=1<<t;n[t]=-1,e&=~r}}function hE(n){if(me&6)throw Error(z(327));Sa();var e=$h(n,0);if(!(e&1))return _n(n,nt()),null;var t=af(n,e);if(n.tag!==0&&t===2){var r=Og(n);r!==0&&(e=r,t=ly(n,r))}if(t===1)throw t=lc,ao(n,0),Si(n,e),_n(n,nt()),t;if(t===6)throw Error(z(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fs(n,cn,Mr),_n(n,nt()),null}function lv(n,e){var t=me;me|=1;try{return n(e)}finally{me=t,me===0&&(Ya=nt()+500,qf&&ws())}}function _o(n){Fi!==null&&Fi.tag===0&&!(me&6)&&Sa();var e=me;me|=1;var t=Ln.transition,r=Ee;try{if(Ln.transition=null,Ee=1,n)return n()}finally{Ee=r,Ln.transition=t,me=e,!(me&6)&&ws()}}function uv(){wn=ya.current,ke(ya)}function ao(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,YN(t)),ct!==null)for(t=ct.return;t!==null;){var r=t;switch(z_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gh();break;case 3:Ka(),ke(gn),ke(Bt),J_();break;case 5:X_(r);break;case 4:Ka();break;case 13:ke(Fe);break;case 19:ke(Fe);break;case 10:G_(r.type._context);break;case 22:case 23:uv()}t=t.return}if(Et=n,ct=n=Xi(n.current,null),Rt=wn=e,pt=0,lc=null,ov=Kf=yo=0,cn=Ou=null,Ks!==null){for(e=0;e<Ks.length;e++)if(t=Ks[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Ks=null}return n}function yx(n,e){do{var t=ct;try{if(H_(),yh.current=nf,tf){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}tf=!1}if(go=0,wt=dt=je=null,Du=!1,sc=0,sv.current=null,t===null||t.return===null){pt=1,lc=e,ct=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=ZI(o);if(g!==null){g.flags&=-257,eE(g,o,a,s,e),g.mode&1&&JI(s,c,e),e=g,l=c;var S=e.updateQueue;if(S===null){var T=new Set;T.add(l),e.updateQueue=T}else S.add(l);break e}else{if(!(e&1)){JI(s,c,e),cv();break e}l=Error(z(426))}}else if(Ne&&a.mode&1){var b=ZI(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),eE(b,o,a,s,e),q_(Qa(l,a));break e}}s=l=Qa(l,a),pt!==4&&(pt=2),Ou===null?Ou=[s]:Ou.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=ex(s,l,e);HI(s,I);break e;case 1:a=l;var _=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Qi===null||!Qi.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=tx(s,a,e);HI(s,k);break e}}s=s.return}while(s!==null)}wx(t)}catch(V){e=V,ct===t&&t!==null&&(ct=t=t.return);continue}break}while(!0)}function _x(){var n=rf.current;return rf.current=nf,n===null?nf:n}function cv(){(pt===0||pt===3||pt===2)&&(pt=4),Et===null||!(yo&268435455)&&!(Kf&268435455)||Si(Et,Rt)}function af(n,e){var t=me;me|=2;var r=_x();(Et!==n||Rt!==e)&&(Mr=null,ao(n,e));do try{IO();break}catch(i){yx(n,i)}while(!0);if(H_(),me=t,rf.current=r,ct!==null)throw Error(z(261));return Et=null,Rt=0,pt}function IO(){for(;ct!==null;)vx(ct)}function EO(){for(;ct!==null&&!GD();)vx(ct)}function vx(n){var e=Ex(n.alternate,n,wn);n.memoizedProps=n.pendingProps,e===null?wx(n):ct=e,sv.current=null}function wx(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=mO(t,e),t!==null){t.flags&=32767,ct=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pt=6,ct=null;return}}else if(t=pO(t,e,wn),t!==null){ct=t;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=n}while(e!==null);pt===0&&(pt=5)}function Fs(n,e,t){var r=Ee,i=Ln.transition;try{Ln.transition=null,Ee=1,TO(n,e,t,r)}finally{Ln.transition=i,Ee=r}return null}function TO(n,e,t,r){do Sa();while(Fi!==null);if(me&6)throw Error(z(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(z(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(rN(n,s),n===Et&&(ct=Et=null,Rt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Qd||(Qd=!0,Tx(Bh,function(){return Sa(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ln.transition,Ln.transition=null;var o=Ee;Ee=1;var a=me;me|=4,sv.current=null,yO(n,t),px(t,n),zN(jg),zh=!!Ug,jg=Ug=null,n.current=t,_O(t),KD(),me=a,Ee=o,Ln.transition=s}else n.current=t;if(Qd&&(Qd=!1,Fi=n,of=i),s=n.pendingLanes,s===0&&(Qi=null),XD(t.stateNode),_n(n,nt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(sf)throw sf=!1,n=oy,oy=null,n;return of&1&&n.tag!==0&&Sa(),s=n.pendingLanes,s&1?n===ay?Vu++:(Vu=0,ay=n):Vu=0,ws(),null}function Sa(){if(Fi!==null){var n=eP(of),e=Ln.transition,t=Ee;try{if(Ln.transition=null,Ee=16>n?16:n,Fi===null)var r=!1;else{if(n=Fi,Fi=null,of=0,me&6)throw Error(z(331));var i=me;for(me|=4,J=n.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:Nu(8,d,s)}var h=d.child;if(h!==null)h.return=d,J=h;else for(;J!==null;){d=J;var p=d.sibling,g=d.return;if(dx(d),d===c){J=null;break}if(p!==null){p.return=g,J=p;break}J=g}}}var S=s.alternate;if(S!==null){var T=S.child;if(T!==null){S.child=null;do{var b=T.sibling;T.sibling=null,T=b}while(T!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nu(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,J=I;break e}J=s.return}}var _=n.current;for(J=_;J!==null;){o=J;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,J=y;else e:for(o=_;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gf(9,a)}}catch(V){He(a,a.return,V)}if(a===o){J=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,J=k;break e}J=a.return}}if(me=i,ws(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Uf,n)}catch{}r=!0}return r}finally{Ee=t,Ln.transition=e}}return!1}function fE(n,e,t){e=Qa(t,e),e=ex(n,e,1),n=Ki(n,e,1),e=Jt(),n!==null&&($c(n,1,e),_n(n,e))}function He(n,e,t){if(n.tag===3)fE(n,n,t);else for(;e!==null;){if(e.tag===3){fE(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qi===null||!Qi.has(r))){n=Qa(t,n),n=tx(e,n,1),e=Ki(e,n,1),n=Jt(),e!==null&&($c(e,1,n),_n(e,n));break}}e=e.return}}function SO(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Jt(),n.pingedLanes|=n.suspendedLanes&t,Et===n&&(Rt&t)===t&&(pt===4||pt===3&&(Rt&130023424)===Rt&&500>nt()-av?ao(n,0):ov|=t),_n(n,e)}function Ix(n,e){e===0&&(n.mode&1?(e=Ud,Ud<<=1,!(Ud&130023424)&&(Ud=4194304)):e=1);var t=Jt();n=Jr(n,e),n!==null&&($c(n,e,t),_n(n,t))}function AO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Ix(n,t)}function PO(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Ix(n,t)}var Ex;Ex=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||gn.current)hn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return hn=!1,fO(n,e,t);hn=!!(n.flags&131072)}else hn=!1,Ne&&e.flags&1048576&&PP(e,Yh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vh(n,e),n=e.pendingProps;var i=Wa(e,Bt.current);Ta(e,t),i=ev(null,e,r,n,i,t);var s=tv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(r)?(s=!0,Kh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Q_(e),i.updater=Hf,e.stateNode=i,i._reactInternals=e,Qg(e,r,n,t),e=Jg(null,e,r,!0,s,t)):(e.tag=0,Ne&&s&&$_(e),Gt(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(vh(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bO(r),n=qn(r,n),i){case 0:e=Xg(null,e,r,n,t);break e;case 1:e=rE(null,e,r,n,t);break e;case 11:e=tE(null,e,r,n,t);break e;case 14:e=nE(null,e,r,qn(r.type,n),t);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),Xg(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),rE(n,e,r,i,t);case 3:e:{if(sx(e),n===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,DP(n,e),Zh(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qa(Error(z(423)),e),e=iE(n,e,r,t,i);break e}else if(r!==i){i=Qa(Error(z(424)),e),e=iE(n,e,r,t,i);break e}else for(En=Gi(e.stateNode.containerInfo.firstChild),Sn=e,Ne=!0,Kn=null,t=CP(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ha(),r===i){e=Zr(n,e,t);break e}Gt(n,e,r,t)}e=e.child}return e;case 5:return NP(e),n===null&&Hg(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Bg(r,i)?o=null:s!==null&&Bg(r,s)&&(e.flags|=32),ix(n,e),Gt(n,e,o,t),e.child;case 6:return n===null&&Hg(e),null;case 13:return ox(n,e,t);case 4:return Y_(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Ga(e,null,r,t):Gt(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),tE(n,e,r,i,t);case 7:return Gt(n,e,e.pendingProps,t),e.child;case 8:return Gt(n,e,e.pendingProps.children,t),e.child;case 12:return Gt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Pe(Xh,r._currentValue),r._currentValue=o,s!==null)if(Jn(s.value,o)){if(s.children===i.children&&!gn.current){e=Zr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Hr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Gg(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Gg(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gt(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ta(e,t),i=Un(i),r=r(i),e.flags|=1,Gt(n,e,r,t),e.child;case 14:return r=e.type,i=qn(r,e.pendingProps),i=qn(r.type,i),nE(n,e,r,i,t);case 15:return nx(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qn(r,i),vh(n,e),e.tag=1,yn(r)?(n=!0,Kh(e)):n=!1,Ta(e,t),ZP(e,r,i),Qg(e,r,i,t),Jg(null,e,r,!0,n,t);case 19:return ax(n,e,t);case 22:return rx(n,e,t)}throw Error(z(156,e.tag))};function Tx(n,e){return YA(n,e)}function xO(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,e,t,r){return new xO(n,e,t,r)}function dv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bO(n){if(typeof n=="function")return dv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===C_)return 11;if(n===k_)return 14}return 2}function Xi(n,e){var t=n.alternate;return t===null?(t=Vn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Eh(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")dv(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case aa:return lo(t.children,i,s,e);case R_:o=8,i|=8;break;case vg:return n=Vn(12,t,e,i|2),n.elementType=vg,n.lanes=s,n;case wg:return n=Vn(13,t,e,i),n.elementType=wg,n.lanes=s,n;case Ig:return n=Vn(19,t,e,i),n.elementType=Ig,n.lanes=s,n;case NA:return Qf(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case kA:o=10;break e;case DA:o=9;break e;case C_:o=11;break e;case k_:o=14;break e;case Ii:o=16,r=null;break e}throw Error(z(130,n==null?n:typeof n,""))}return e=Vn(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function lo(n,e,t,r){return n=Vn(7,n,r,e),n.lanes=t,n}function Qf(n,e,t,r){return n=Vn(22,n,r,e),n.elementType=NA,n.lanes=t,n.stateNode={isHidden:!1},n}function Bm(n,e,t){return n=Vn(6,n,null,e),n.lanes=t,n}function $m(n,e,t){return e=Vn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function RO(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Em(0),this.expirationTimes=Em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Em(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hv(n,e,t,r,i,s,o,a,l){return n=new RO(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Vn(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q_(s),n}function CO(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oa,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Sx(n){if(!n)return is;n=n._reactInternals;e:{if(Oo(n)!==n||n.tag!==1)throw Error(z(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(n.tag===1){var t=n.type;if(yn(t))return SP(n,t,e)}return e}function Ax(n,e,t,r,i,s,o,a,l){return n=hv(t,r,!0,n,i,s,o,a,l),n.context=Sx(null),t=n.current,r=Jt(),i=Yi(t),s=Hr(r,i),s.callback=e??null,Ki(t,s,i),n.current.lanes=i,$c(n,i,r),_n(n,r),n}function Yf(n,e,t,r){var i=e.current,s=Jt(),o=Yi(i);return t=Sx(t),e.context===null?e.context=t:e.pendingContext=t,e=Hr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ki(i,e,o),n!==null&&(Yn(n,i,o,s),gh(n,i,o)),o}function lf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function pE(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function fv(n,e){pE(n,e),(n=n.alternate)&&pE(n,e)}function kO(){return null}var Px=typeof reportError=="function"?reportError:function(n){console.error(n)};function pv(n){this._internalRoot=n}Xf.prototype.render=pv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(z(409));Yf(n,e,null,null)};Xf.prototype.unmount=pv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;_o(function(){Yf(null,n,null,null)}),e[Xr]=null}};function Xf(n){this._internalRoot=n}Xf.prototype.unstable_scheduleHydration=function(n){if(n){var e=rP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ti.length&&e!==0&&e<Ti[t].priority;t++);Ti.splice(t,0,n),t===0&&sP(n)}};function mv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Jf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function mE(){}function DO(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=lf(o);s.call(c)}}var o=Ax(e,r,n,0,null,!1,!1,"",mE);return n._reactRootContainer=o,n[Xr]=o.current,ec(n.nodeType===8?n.parentNode:n),_o(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=lf(l);a.call(c)}}var l=hv(n,0,!1,null,null,!1,!1,"",mE);return n._reactRootContainer=l,n[Xr]=l.current,ec(n.nodeType===8?n.parentNode:n),_o(function(){Yf(e,l,t,r)}),l}function Zf(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=lf(o);a.call(l)}}Yf(e,o,n,i)}else o=DO(t,e,n,i,r);return lf(o)}tP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=gu(e.pendingLanes);t!==0&&(O_(e,t|1),_n(e,nt()),!(me&6)&&(Ya=nt()+500,ws()))}break;case 13:_o(function(){var r=Jr(n,1);if(r!==null){var i=Jt();Yn(r,n,1,i)}}),fv(n,1)}};V_=function(n){if(n.tag===13){var e=Jr(n,134217728);if(e!==null){var t=Jt();Yn(e,n,134217728,t)}fv(n,134217728)}};nP=function(n){if(n.tag===13){var e=Yi(n),t=Jr(n,e);if(t!==null){var r=Jt();Yn(t,n,e,r)}fv(n,e)}};rP=function(){return Ee};iP=function(n,e){var t=Ee;try{return Ee=n,e()}finally{Ee=t}};kg=function(n,e,t){switch(e){case"input":if(Sg(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=zf(r);if(!i)throw Error(z(90));VA(r),Sg(r,i)}}}break;case"textarea":LA(n,t);break;case"select":e=t.value,e!=null&&va(n,!!t.multiple,e,!1)}};qA=lv;WA=_o;var NO={usingClientEntryPoint:!1,Events:[qc,da,zf,$A,zA,lv]},nu={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OO={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=KA(n),n===null?null:n.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||kO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{Uf=Yd.inject(OO),yr=Yd}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NO;bn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mv(e))throw Error(z(200));return CO(n,e,null,t)};bn.createRoot=function(n,e){if(!mv(n))throw Error(z(299));var t=!1,r="",i=Px;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hv(n,1,!1,null,null,t,!1,r,i),n[Xr]=e.current,ec(n.nodeType===8?n.parentNode:n),new pv(e)};bn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(z(188)):(n=Object.keys(n).join(","),Error(z(268,n)));return n=KA(e),n=n===null?null:n.stateNode,n};bn.flushSync=function(n){return _o(n)};bn.hydrate=function(n,e,t){if(!Jf(e))throw Error(z(200));return Zf(null,n,e,!0,t)};bn.hydrateRoot=function(n,e,t){if(!mv(n))throw Error(z(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Px;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Ax(e,null,n,1,t??null,i,!1,s,o),n[Xr]=e.current,ec(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Xf(e)};bn.render=function(n,e,t){if(!Jf(e))throw Error(z(200));return Zf(null,n,e,!1,t)};bn.unmountComponentAtNode=function(n){if(!Jf(n))throw Error(z(40));return n._reactRootContainer?(_o(function(){Zf(null,null,n,!1,function(){n._reactRootContainer=null,n[Xr]=null})}),!0):!1};bn.unstable_batchedUpdates=lv;bn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Jf(t))throw Error(z(200));if(n==null||n._reactInternals===void 0)throw Error(z(38));return Zf(n,e,t,!1,r)};bn.version="18.3.1-next-f1338f8080-20240426";function xx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xx)}catch(n){console.error(n)}}xx(),xA.exports=bn;var VO=xA.exports,gE=VO;yg.createRoot=gE.createRoot,yg.hydrateRoot=gE.hydrateRoot;var wl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vo=typeof window>"u"||"Deno"in globalThis;function Qt(){}function MO(n,e){return typeof n=="function"?n(e):n}function cy(n){return typeof n=="number"&&n>=0&&n!==1/0}function bx(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Ji(n,e){return typeof n=="function"?n(e):n}function Dn(n,e){return typeof n=="function"?n(e):n}function yE(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==gv(o,e.options))return!1}else if(!uc(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function _E(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(wo(e.options.mutationKey)!==wo(s))return!1}else if(!uc(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function gv(n,e){return((e==null?void 0:e.queryKeyHashFn)||wo)(n)}function wo(n){return JSON.stringify(n,(e,t)=>dy(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function uc(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>uc(n[t],e[t])):!1}function Rx(n,e){if(n===e)return n;const t=vE(n)&&vE(e);if(t||dy(n)&&dy(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{},l=new Set(r);let c=0;for(let d=0;d<o;d++){const h=t?d:s[d];(!t&&l.has(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=Rx(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function uf(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function vE(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function dy(n){if(!wE(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!wE(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function wE(n){return Object.prototype.toString.call(n)==="[object Object]"}function LO(n){return new Promise(e=>{setTimeout(e,n)})}function hy(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Rx(n,e):e}function FO(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function UO(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var yv=Symbol();function Cx(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===yv?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function kx(n,e){return typeof n=="function"?n(...e):!!n}var Zs,bi,ka,sA,jO=(sA=class extends wl{constructor(){super();te(this,Zs);te(this,bi);te(this,ka);Q(this,ka,e=>{if(!vo&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){C(this,bi)||this.setEventListener(C(this,ka))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,bi))==null||e.call(this),Q(this,bi,void 0))}setEventListener(e){var t;Q(this,ka,e),(t=C(this,bi))==null||t.call(this),Q(this,bi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){C(this,Zs)!==e&&(Q(this,Zs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof C(this,Zs)=="boolean"?C(this,Zs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Zs=new WeakMap,bi=new WeakMap,ka=new WeakMap,sA),_v=new jO,Da,Ri,Na,oA,BO=(oA=class extends wl{constructor(){super();te(this,Da,!0);te(this,Ri);te(this,Na);Q(this,Na,e=>{if(!vo&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){C(this,Ri)||this.setEventListener(C(this,Na))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,Ri))==null||e.call(this),Q(this,Ri,void 0))}setEventListener(e){var t;Q(this,Na,e),(t=C(this,Ri))==null||t.call(this),Q(this,Ri,e(this.setOnline.bind(this)))}setOnline(e){C(this,Da)!==e&&(Q(this,Da,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return C(this,Da)}},Da=new WeakMap,Ri=new WeakMap,Na=new WeakMap,oA),cf=new BO;function fy(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function $O(n){return Math.min(1e3*2**n,3e4)}function Dx(n){return(n??"online")==="online"?cf.isOnline():!0}var Nx=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Ox(n){let e=!1,t=0,r;const i=fy(),s=()=>i.status!=="pending",o=T=>{var b;s()||(p(new Nx(T)),(b=n.abort)==null||b.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>_v.isFocused()&&(n.networkMode==="always"||cf.isOnline())&&n.canRun(),d=()=>Dx(n.networkMode)&&n.canRun(),h=T=>{s()||(r==null||r(),i.resolve(T))},p=T=>{s()||(r==null||r(),i.reject(T))},g=()=>new Promise(T=>{var b;r=I=>{(s()||c())&&T(I)},(b=n.onPause)==null||b.call(n)}).then(()=>{var T;r=void 0,s()||(T=n.onContinue)==null||T.call(n)}),S=()=>{if(s())return;let T;const b=t===0?n.initialPromise:void 0;try{T=b??n.fn()}catch(I){T=Promise.reject(I)}Promise.resolve(T).then(h).catch(I=>{var j;if(s())return;const _=n.retry??(vo?0:3),y=n.retryDelay??$O,k=typeof y=="function"?y(t,I):y,V=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,I);if(e||!V){p(I);return}t++,(j=n.onFail)==null||j.call(n,t,I),LO(k).then(()=>c()?void 0:g()).then(()=>{e?p(I):S()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?S():g().then(S),i)}}var zO=n=>setTimeout(n,0);function qO(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=zO;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var ht=qO(),eo,aA,Vx=(aA=class{constructor(){te(this,eo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),cy(this.gcTime)&&Q(this,eo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(vo?1/0:5*60*1e3))}clearGcTimeout(){C(this,eo)&&(clearTimeout(C(this,eo)),Q(this,eo,void 0))}},eo=new WeakMap,aA),Oa,Va,kn,to,_t,Lc,no,Wn,Vr,lA,WO=(lA=class extends Vx{constructor(t){super();te(this,Wn);te(this,Oa);te(this,Va);te(this,kn);te(this,to);te(this,_t);te(this,Lc);te(this,no);Q(this,no,!1),Q(this,Lc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Q(this,to,t.client),Q(this,kn,C(this,to).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Q(this,Oa,HO(this.options)),this.state=t.state??C(this,Oa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=C(this,_t))==null?void 0:t.promise}setOptions(t){this.options={...C(this,Lc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,kn).remove(this)}setData(t,r){const i=hy(this.state.data,t,this.options);return le(this,Wn,Vr).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){le(this,Wn,Vr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,s;const r=(i=C(this,_t))==null?void 0:i.promise;return(s=C(this,_t))==null||s.cancel(t),r?r.then(Qt).catch(Qt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,Oa))}isActive(){return this.observers.some(t=>Dn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ji(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!bx(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=C(this,_t))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=C(this,_t))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),C(this,kn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(C(this,_t)&&(C(this,no)?C(this,_t).cancel({revert:!0}):C(this,_t).cancelRetry()),this.scheduleGc()),C(this,kn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||le(this,Wn,Vr).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,h,p,g,S,T,b,I,_,y,k;if(this.state.fetchStatus!=="idle"&&((c=C(this,_t))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(C(this,_t))return C(this,_t).continueRetry(),C(this,_t).promise}if(t&&this.setOptions(t),!this.options.queryFn){const V=this.observers.find(j=>j.options.queryFn);V&&this.setOptions(V.options)}const i=new AbortController,s=V=>{Object.defineProperty(V,"signal",{enumerable:!0,get:()=>(Q(this,no,!0),i.signal)})},o=()=>{const V=Cx(this.options,r),A=(()=>{const v={client:C(this,to),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return Q(this,no,!1),this.options.persister?this.options.persister(V,A,this):V(A)},l=(()=>{const V={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:C(this,to),state:this.state,fetchFn:o};return s(V),V})();(d=this.options.behavior)==null||d.onFetch(l,this),Q(this,Va,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&le(this,Wn,Vr).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Q(this,_t,Ox({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onFail:(V,j)=>{le(this,Wn,Vr).call(this,{type:"failed",failureCount:V,error:j})},onPause:()=>{le(this,Wn,Vr).call(this,{type:"pause"})},onContinue:()=>{le(this,Wn,Vr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const V=await C(this,_t).start();if(V===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(V),(S=(g=C(this,kn).config).onSuccess)==null||S.call(g,V,this),(b=(T=C(this,kn).config).onSettled)==null||b.call(T,V,this.state.error,this),V}catch(V){if(V instanceof Nx){if(V.silent)return C(this,_t).promise;if(V.revert){if(this.setState({...C(this,Va),fetchStatus:"idle"}),this.state.data===void 0)throw V;return this.state.data}}throw le(this,Wn,Vr).call(this,{type:"error",error:V}),(_=(I=C(this,kn).config).onError)==null||_.call(I,V,this),(k=(y=C(this,kn).config).onSettled)==null||k.call(y,this.state.data,V,this),V}finally{this.scheduleGc()}}},Oa=new WeakMap,Va=new WeakMap,kn=new WeakMap,to=new WeakMap,_t=new WeakMap,Lc=new WeakMap,no=new WeakMap,Wn=new WeakSet,Vr=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Mx(i.data,this.options),fetchMeta:t.meta??null};case"success":const s={...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Q(this,Va,t.manual?s:void 0),s;case"error":const o=t.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),ht.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),C(this,kn).notify({query:this,type:"updated",action:t})})},lA);function Mx(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Dx(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function HO(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var rr,uA,GO=(uA=class extends wl{constructor(e={}){super();te(this,rr);this.config=e,Q(this,rr,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??gv(i,t);let o=this.get(s);return o||(o=new WO({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){C(this,rr).has(e.queryHash)||(C(this,rr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=C(this,rr).get(e.queryHash);t&&(e.destroy(),t===e&&C(this,rr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return C(this,rr).get(e)}getAll(){return[...C(this,rr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>yE(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>yE(e,r)):t}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},rr=new WeakMap,uA),ir,Wt,ro,sr,wi,cA,KO=(cA=class extends Vx{constructor(t){super();te(this,sr);te(this,ir);te(this,Wt);te(this,ro);this.mutationId=t.mutationId,Q(this,Wt,t.mutationCache),Q(this,ir,[]),this.state=t.state||Lx(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){C(this,ir).includes(t)||(C(this,ir).push(t),this.clearGcTimeout(),C(this,Wt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Q(this,ir,C(this,ir).filter(r=>r!==t)),this.scheduleGc(),C(this,Wt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){C(this,ir).length||(this.state.status==="pending"?this.scheduleGc():C(this,Wt).remove(this))}continue(){var t;return((t=C(this,ro))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,c,d,h,p,g,S,T,b,I,_,y,k,V,j,A,v,x;const r=()=>{le(this,sr,wi).call(this,{type:"continue"})};Q(this,ro,Ox({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,D)=>{le(this,sr,wi).call(this,{type:"failed",failureCount:P,error:D})},onPause:()=>{le(this,sr,wi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,Wt).canRun(this)}));const i=this.state.status==="pending",s=!C(this,ro).canStart();try{if(i)r();else{le(this,sr,wi).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(o=C(this,Wt).config).onMutate)==null?void 0:a.call(o,t,this));const D=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));D!==this.state.context&&le(this,sr,wi).call(this,{type:"pending",context:D,variables:t,isPaused:s})}const P=await C(this,ro).start();return await((h=(d=C(this,Wt).config).onSuccess)==null?void 0:h.call(d,P,t,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,P,t,this.state.context)),await((T=(S=C(this,Wt).config).onSettled)==null?void 0:T.call(S,P,null,this.state.variables,this.state.context,this)),await((I=(b=this.options).onSettled)==null?void 0:I.call(b,P,null,t,this.state.context)),le(this,sr,wi).call(this,{type:"success",data:P}),P}catch(P){try{throw await((y=(_=C(this,Wt).config).onError)==null?void 0:y.call(_,P,t,this.state.context,this)),await((V=(k=this.options).onError)==null?void 0:V.call(k,P,t,this.state.context)),await((A=(j=C(this,Wt).config).onSettled)==null?void 0:A.call(j,void 0,P,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,void 0,P,t,this.state.context)),P}finally{le(this,sr,wi).call(this,{type:"error",error:P})}}finally{C(this,Wt).runNext(this)}}},ir=new WeakMap,Wt=new WeakMap,ro=new WeakMap,sr=new WeakSet,wi=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ht.batch(()=>{C(this,ir).forEach(i=>{i.onMutationUpdate(t)}),C(this,Wt).notify({mutation:this,type:"updated",action:t})})},cA);function Lx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fr,Hn,Fc,dA,QO=(dA=class extends wl{constructor(e={}){super();te(this,Fr);te(this,Hn);te(this,Fc);this.config=e,Q(this,Fr,new Set),Q(this,Hn,new Map),Q(this,Fc,0)}build(e,t,r){const i=new KO({mutationCache:this,mutationId:++Nd(this,Fc)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){C(this,Fr).add(e);const t=Xd(e);if(typeof t=="string"){const r=C(this,Hn).get(t);r?r.push(e):C(this,Hn).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(C(this,Fr).delete(e)){const t=Xd(e);if(typeof t=="string"){const r=C(this,Hn).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&C(this,Hn).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Xd(e);if(typeof t=="string"){const r=C(this,Hn).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=Xd(e);if(typeof t=="string"){const i=(r=C(this,Hn).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ht.batch(()=>{C(this,Fr).forEach(e=>{this.notify({type:"removed",mutation:e})}),C(this,Fr).clear(),C(this,Hn).clear()})}getAll(){return Array.from(C(this,Fr))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>_E(t,r))}findAll(e={}){return this.getAll().filter(t=>_E(e,t))}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ht.batch(()=>Promise.all(e.map(t=>t.continue().catch(Qt))))}},Fr=new WeakMap,Hn=new WeakMap,Fc=new WeakMap,dA);function Xd(n){var e;return(e=n.options.scope)==null?void 0:e.id}function IE(n){return{onFetch:(e,t)=>{var d,h,p,g,S;const r=e.options,i=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,s=((g=e.state.data)==null?void 0:g.pages)||[],o=((S=e.state.data)==null?void 0:S.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let T=!1;const b=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?T=!0:e.signal.addEventListener("abort",()=>{T=!0}),e.signal)})},I=Cx(e.options,e.fetchOptions),_=async(y,k,V)=>{if(T)return Promise.reject();if(k==null&&y.pages.length)return Promise.resolve(y);const A=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:k,direction:V?"backward":"forward",meta:e.options.meta};return b(D),D})(),v=await I(A),{maxPages:x}=e.options,P=V?UO:FO;return{pages:P(y.pages,v,x),pageParams:P(y.pageParams,k,x)}};if(i&&s.length){const y=i==="backward",k=y?YO:EE,V={pages:s,pageParams:o},j=k(r,V);a=await _(V,j,y)}else{const y=n??s.length;do{const k=l===0?o[0]??r.initialPageParam:EE(r,a);if(l>0&&k==null)break;a=await _(a,k),l++}while(l<y)}return a};e.options.persister?e.fetchFn=()=>{var T,b;return(b=(T=e.options).persister)==null?void 0:b.call(T,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function EE(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function YO(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var We,Ci,ki,Ma,La,Di,Fa,Ua,hA,XO=(hA=class{constructor(n={}){te(this,We);te(this,Ci);te(this,ki);te(this,Ma);te(this,La);te(this,Di);te(this,Fa);te(this,Ua);Q(this,We,n.queryCache||new GO),Q(this,Ci,n.mutationCache||new QO),Q(this,ki,n.defaultOptions||{}),Q(this,Ma,new Map),Q(this,La,new Map),Q(this,Di,0)}mount(){Nd(this,Di)._++,C(this,Di)===1&&(Q(this,Fa,_v.subscribe(async n=>{n&&(await this.resumePausedMutations(),C(this,We).onFocus())})),Q(this,Ua,cf.subscribe(async n=>{n&&(await this.resumePausedMutations(),C(this,We).onOnline())})))}unmount(){var n,e;Nd(this,Di)._--,C(this,Di)===0&&((n=C(this,Fa))==null||n.call(this),Q(this,Fa,void 0),(e=C(this,Ua))==null||e.call(this),Q(this,Ua,void 0))}isFetching(n){return C(this,We).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return C(this,Ci).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=C(this,We).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=C(this,We).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Ji(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return C(this,We).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=C(this,We).get(r.queryHash),s=i==null?void 0:i.state.data,o=MO(e,s);if(o!==void 0)return C(this,We).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return ht.batch(()=>C(this,We).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=C(this,We).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=C(this,We);ht.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=C(this,We);return ht.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=ht.batch(()=>C(this,We).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(Qt).catch(Qt)}invalidateQueries(n,e={}){return ht.batch(()=>(C(this,We).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=ht.batch(()=>C(this,We).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(Qt)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Qt)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=C(this,We).build(this,e);return t.isStaleByTime(Ji(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Qt).catch(Qt)}fetchInfiniteQuery(n){return n.behavior=IE(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Qt).catch(Qt)}ensureInfiniteQueryData(n){return n.behavior=IE(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return cf.isOnline()?C(this,Ci).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,We)}getMutationCache(){return C(this,Ci)}getDefaultOptions(){return C(this,ki)}setDefaultOptions(n){Q(this,ki,n)}setQueryDefaults(n,e){C(this,Ma).set(wo(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...C(this,Ma).values()],t={};return e.forEach(r=>{uc(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){C(this,La).set(wo(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...C(this,La).values()],t={};return e.forEach(r=>{uc(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...C(this,ki).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=gv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yv&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...C(this,ki).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){C(this,We).clear(),C(this,Ci).clear()}},We=new WeakMap,Ci=new WeakMap,ki=new WeakMap,Ma=new WeakMap,La=new WeakMap,Di=new WeakMap,Fa=new WeakMap,Ua=new WeakMap,hA),on,fe,Uc,Ht,io,ja,Ur,Ni,jc,Ba,$a,so,oo,Oi,za,ve,_u,py,my,gy,yy,_y,vy,wy,Fx,fA,JO=(fA=class extends wl{constructor(e,t){super();te(this,ve);te(this,on);te(this,fe);te(this,Uc);te(this,Ht);te(this,io);te(this,ja);te(this,Ur);te(this,Ni);te(this,jc);te(this,Ba);te(this,$a);te(this,so);te(this,oo);te(this,Oi);te(this,za,new Set);this.options=t,Q(this,on,e),Q(this,Ni,null),Q(this,Ur,fy()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,fe).addObserver(this),TE(C(this,fe),this.options)?le(this,ve,_u).call(this):this.updateResult(),le(this,ve,yy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Iy(C(this,fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Iy(C(this,fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,le(this,ve,_y).call(this),le(this,ve,vy).call(this),C(this,fe).removeObserver(this)}setOptions(e){const t=this.options,r=C(this,fe);if(this.options=C(this,on).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Dn(this.options.enabled,C(this,fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");le(this,ve,wy).call(this),C(this,fe).setOptions(this.options),t._defaulted&&!uf(this.options,t)&&C(this,on).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,fe),observer:this});const i=this.hasListeners();i&&SE(C(this,fe),r,this.options,t)&&le(this,ve,_u).call(this),this.updateResult(),i&&(C(this,fe)!==r||Dn(this.options.enabled,C(this,fe))!==Dn(t.enabled,C(this,fe))||Ji(this.options.staleTime,C(this,fe))!==Ji(t.staleTime,C(this,fe)))&&le(this,ve,py).call(this);const s=le(this,ve,my).call(this);i&&(C(this,fe)!==r||Dn(this.options.enabled,C(this,fe))!==Dn(t.enabled,C(this,fe))||s!==C(this,Oi))&&le(this,ve,gy).call(this,s)}getOptimisticResult(e){const t=C(this,on).getQueryCache().build(C(this,on),e),r=this.createResult(t,e);return e2(this,r)&&(Q(this,Ht,r),Q(this,ja,this.options),Q(this,io,C(this,fe).state)),r}getCurrentResult(){return C(this,Ht)}trackResult(e,t){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),t==null||t(i),i==="promise"&&!this.options.experimental_prefetchInRender&&C(this,Ur).status==="pending"&&C(this,Ur).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,i))})}trackProp(e){C(this,za).add(e)}getCurrentQuery(){return C(this,fe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=C(this,on).defaultQueryOptions(e),r=C(this,on).getQueryCache().build(C(this,on),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return le(this,ve,_u).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,Ht)))}createResult(e,t){var x;const r=C(this,fe),i=this.options,s=C(this,Ht),o=C(this,io),a=C(this,ja),c=e!==r?e.state:C(this,Uc),{state:d}=e;let h={...d},p=!1,g;if(t._optimisticResults){const P=this.hasListeners(),D=!P&&TE(e,t),N=P&&SE(e,r,t,i);(D||N)&&(h={...h,...Mx(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:S,errorUpdatedAt:T,status:b}=h;g=h.data;let I=!1;if(t.placeholderData!==void 0&&g===void 0&&b==="pending"){let P;s!=null&&s.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(P=s.data,I=!0):P=typeof t.placeholderData=="function"?t.placeholderData((x=C(this,$a))==null?void 0:x.state.data,C(this,$a)):t.placeholderData,P!==void 0&&(b="success",g=hy(s==null?void 0:s.data,P,t),p=!0)}if(t.select&&g!==void 0&&!I)if(s&&g===(o==null?void 0:o.data)&&t.select===C(this,jc))g=C(this,Ba);else try{Q(this,jc,t.select),g=t.select(g),g=hy(s==null?void 0:s.data,g,t),Q(this,Ba,g),Q(this,Ni,null)}catch(P){Q(this,Ni,P)}C(this,Ni)&&(S=C(this,Ni),g=C(this,Ba),T=Date.now(),b="error");const _=h.fetchStatus==="fetching",y=b==="pending",k=b==="error",V=y&&_,j=g!==void 0,v={status:b,fetchStatus:h.fetchStatus,isPending:y,isSuccess:b==="success",isError:k,isInitialLoading:V,isLoading:V,data:g,dataUpdatedAt:h.dataUpdatedAt,error:S,errorUpdatedAt:T,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:_,isRefetching:_&&!y,isLoadingError:k&&!j,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:k&&j,isStale:vv(e,t),refetch:this.refetch,promise:C(this,Ur),isEnabled:Dn(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=R=>{v.status==="error"?R.reject(v.error):v.data!==void 0&&R.resolve(v.data)},D=()=>{const R=Q(this,Ur,v.promise=fy());P(R)},N=C(this,Ur);switch(N.status){case"pending":e.queryHash===r.queryHash&&P(N);break;case"fulfilled":(v.status==="error"||v.data!==N.value)&&D();break;case"rejected":(v.status!=="error"||v.error!==N.reason)&&D();break}}return v}updateResult(){const e=C(this,Ht),t=this.createResult(C(this,fe),this.options);if(Q(this,io,C(this,fe).state),Q(this,ja,this.options),C(this,io).data!==void 0&&Q(this,$a,C(this,fe)),uf(t,e))return;Q(this,Ht,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!C(this,za).size)return!0;const o=new Set(s??C(this,za));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,Ht)).some(a=>{const l=a;return C(this,Ht)[l]!==e[l]&&o.has(l)})};le(this,ve,Fx).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&le(this,ve,yy).call(this)}},on=new WeakMap,fe=new WeakMap,Uc=new WeakMap,Ht=new WeakMap,io=new WeakMap,ja=new WeakMap,Ur=new WeakMap,Ni=new WeakMap,jc=new WeakMap,Ba=new WeakMap,$a=new WeakMap,so=new WeakMap,oo=new WeakMap,Oi=new WeakMap,za=new WeakMap,ve=new WeakSet,_u=function(e){le(this,ve,wy).call(this);let t=C(this,fe).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Qt)),t},py=function(){le(this,ve,_y).call(this);const e=Ji(this.options.staleTime,C(this,fe));if(vo||C(this,Ht).isStale||!cy(e))return;const r=bx(C(this,Ht).dataUpdatedAt,e)+1;Q(this,so,setTimeout(()=>{C(this,Ht).isStale||this.updateResult()},r))},my=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,fe)):this.options.refetchInterval)??!1},gy=function(e){le(this,ve,vy).call(this),Q(this,Oi,e),!(vo||Dn(this.options.enabled,C(this,fe))===!1||!cy(C(this,Oi))||C(this,Oi)===0)&&Q(this,oo,setInterval(()=>{(this.options.refetchIntervalInBackground||_v.isFocused())&&le(this,ve,_u).call(this)},C(this,Oi)))},yy=function(){le(this,ve,py).call(this),le(this,ve,gy).call(this,le(this,ve,my).call(this))},_y=function(){C(this,so)&&(clearTimeout(C(this,so)),Q(this,so,void 0))},vy=function(){C(this,oo)&&(clearInterval(C(this,oo)),Q(this,oo,void 0))},wy=function(){const e=C(this,on).getQueryCache().build(C(this,on),this.options);if(e===C(this,fe))return;const t=C(this,fe);Q(this,fe,e),Q(this,Uc,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Fx=function(e){ht.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(C(this,Ht))}),C(this,on).getQueryCache().notify({query:C(this,fe),type:"observerResultsUpdated"})})},fA);function ZO(n,e){return Dn(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function TE(n,e){return ZO(n,e)||n.state.data!==void 0&&Iy(n,e,e.refetchOnMount)}function Iy(n,e,t){if(Dn(e.enabled,n)!==!1&&Ji(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&vv(n,e)}return!1}function SE(n,e,t,r){return(n!==e||Dn(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&vv(n,t)}function vv(n,e){return Dn(e.enabled,n)!==!1&&n.isStaleByTime(Ji(e.staleTime,n))}function e2(n,e){return!uf(n.getCurrentResult(),e)}var Vi,Mi,an,jr,Qr,Th,Ey,pA,t2=(pA=class extends wl{constructor(t,r){super();te(this,Qr);te(this,Vi);te(this,Mi);te(this,an);te(this,jr);Q(this,Vi,t),this.setOptions(r),this.bindMethods(),le(this,Qr,Th).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const r=this.options;this.options=C(this,Vi).defaultMutationOptions(t),uf(this.options,r)||C(this,Vi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,an),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&wo(r.mutationKey)!==wo(this.options.mutationKey)?this.reset():((i=C(this,an))==null?void 0:i.state.status)==="pending"&&C(this,an).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=C(this,an))==null||t.removeObserver(this)}onMutationUpdate(t){le(this,Qr,Th).call(this),le(this,Qr,Ey).call(this,t)}getCurrentResult(){return C(this,Mi)}reset(){var t;(t=C(this,an))==null||t.removeObserver(this),Q(this,an,void 0),le(this,Qr,Th).call(this),le(this,Qr,Ey).call(this)}mutate(t,r){var i;return Q(this,jr,r),(i=C(this,an))==null||i.removeObserver(this),Q(this,an,C(this,Vi).getMutationCache().build(C(this,Vi),this.options)),C(this,an).addObserver(this),C(this,an).execute(t)}},Vi=new WeakMap,Mi=new WeakMap,an=new WeakMap,jr=new WeakMap,Qr=new WeakSet,Th=function(){var r;const t=((r=C(this,an))==null?void 0:r.state)??Lx();Q(this,Mi,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Ey=function(t){ht.batch(()=>{var r,i,s,o,a,l,c,d;if(C(this,jr)&&this.hasListeners()){const h=C(this,Mi).variables,p=C(this,Mi).context;(t==null?void 0:t.type)==="success"?((i=(r=C(this,jr)).onSuccess)==null||i.call(r,t.data,h,p),(o=(s=C(this,jr)).onSettled)==null||o.call(s,t.data,null,h,p)):(t==null?void 0:t.type)==="error"&&((l=(a=C(this,jr)).onError)==null||l.call(a,t.error,h,p),(d=(c=C(this,jr)).onSettled)==null||d.call(c,void 0,t.error,h,p))}this.listeners.forEach(h=>{h(C(this,Mi))})})},pA),Ux=L.createContext(void 0),ep=n=>{const e=L.useContext(Ux);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},n2=({client:n,children:e})=>(L.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),E.jsx(Ux.Provider,{value:n,children:e})),jx=L.createContext(!1),r2=()=>L.useContext(jx);jx.Provider;function i2(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var s2=L.createContext(i2()),o2=()=>L.useContext(s2),a2=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},l2=n=>{L.useEffect(()=>{n.clearReset()},[n])},u2=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||kx(t,[n.error,r])),c2=n=>{if(n.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...r)=>e(t(...r)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},d2=(n,e)=>n.isLoading&&n.isFetching&&!e,h2=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,AE=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function f2(n,e,t){var h,p,g,S,T;const r=r2(),i=o2(),s=ep(),o=s.defaultQueryOptions(n);(p=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",c2(o),a2(o,i),l2(i);const a=!s.getQueryCache().get(o.queryHash),[l]=L.useState(()=>new e(s,o)),c=l.getOptimisticResult(o),d=!r&&n.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(b=>{const I=d?l.subscribe(ht.batchCalls(b)):Qt;return l.updateResult(),I},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),L.useEffect(()=>{l.setOptions(o)},[o,l]),h2(o,c))throw AE(o,l,i);if(u2({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((S=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||S.call(g,o,c),o.experimental_prefetchInRender&&!vo&&d2(c,r)){const b=a?AE(o,l,i):(T=s.getQueryCache().get(o.queryHash))==null?void 0:T.promise;b==null||b.catch(Qt).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function Bx(n,e){return f2(n,JO)}function zm(n,e){const t=ep(),[r]=L.useState(()=>new t2(t,n));L.useEffect(()=>{r.setOptions(n)},[r,n]);const i=L.useSyncExternalStore(L.useCallback(o=>r.subscribe(ht.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=L.useCallback((o,a)=>{r.mutate(o,a).catch(Qt)},[r]);if(i.error&&kx(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cc.apply(this,arguments)}var Ui;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ui||(Ui={}));const PE="popstate";function p2(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Ty("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:df(i)}return g2(e,t,null,n)}function Qe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $x(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function m2(){return Math.random().toString(36).substr(2,8)}function xE(n,e){return{usr:n.state,key:n.key,idx:e}}function Ty(n,e,t,r){return t===void 0&&(t=null),cc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Il(e):e,{state:t,key:e&&e.key||r||m2()})}function df(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Il(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function g2(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ui.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(cc({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ui.Pop;let b=d(),I=b==null?null:b-c;c=b,l&&l({action:a,location:T.location,delta:I})}function p(b,I){a=Ui.Push;let _=Ty(T.location,b,I);c=d()+1;let y=xE(_,c),k=T.createHref(_);try{o.pushState(y,"",k)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(k)}s&&l&&l({action:a,location:T.location,delta:1})}function g(b,I){a=Ui.Replace;let _=Ty(T.location,b,I);c=d();let y=xE(_,c),k=T.createHref(_);o.replaceState(y,"",k),s&&l&&l({action:a,location:T.location,delta:0})}function S(b){let I=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof b=="string"?b:df(b);return _=_.replace(/ $/,"%20"),Qe(I,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,I)}let T={get action(){return a},get location(){return n(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(PE,h),l=b,()=>{i.removeEventListener(PE,h),l=null}},createHref(b){return e(i,b)},createURL:S,encodeLocation(b){let I=S(b);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:p,replace:g,go(b){return o.go(b)}};return T}var bE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(bE||(bE={}));function y2(n,e,t){return t===void 0&&(t="/"),_2(n,e,t)}function _2(n,e,t,r){let i=typeof e=="string"?Il(e):e,s=Xa(i.pathname||"/",t);if(s==null)return null;let o=zx(n);v2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=C2(s);a=b2(o[l],c)}return a}function zx(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Zi([r,l.relativePath]),d=t.concat(l);s.children&&s.children.length>0&&(Qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),zx(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:P2(c,s.index),routesMeta:d})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of qx(s.path))i(s,o,l)}),e}function qx(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=qx(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function v2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:x2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const w2=/^:[\w-]+$/,I2=3,E2=2,T2=1,S2=10,A2=-2,RE=n=>n==="*";function P2(n,e){let t=n.split("/"),r=t.length;return t.some(RE)&&(r+=A2),e&&(r+=E2),t.filter(i=>!RE(i)).reduce((i,s)=>i+(w2.test(s)?I2:s===""?T2:S2),r)}function x2(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function b2(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Sy({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Zi([s,h.pathname]),pathnameBase:O2(Zi([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Zi([s,h.pathnameBase]))}return o}function Sy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=R2(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let T=a[h]||"";o=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const S=a[h];return g&&!S?c[p]=void 0:c[p]=(S||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function R2(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),$x(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function C2(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $x(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Xa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function k2(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Il(n):n;return{pathname:t?t.startsWith("/")?t:D2(t,e):e,search:V2(r),hash:M2(i)}}function D2(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qm(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function N2(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wx(n,e){let t=N2(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Hx(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Il(n):(i=cc({},n),Qe(!i.pathname||!i.pathname.includes("?"),qm("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),qm("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),qm("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=k2(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Zi=n=>n.join("/").replace(/\/\/+/g,"/"),O2=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),V2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,M2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function L2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Gx=["post","put","patch","delete"];new Set(Gx);const F2=["get",...Gx];new Set(F2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dc.apply(this,arguments)}const tp=L.createContext(null),Kx=L.createContext(null),Is=L.createContext(null),np=L.createContext(null),Es=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Qx=L.createContext(null);function U2(n,e){let{relative:t}=e===void 0?{}:e;Hc()||Qe(!1);let{basename:r,navigator:i}=L.useContext(Is),{hash:s,pathname:o,search:a}=ip(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:Zi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Hc(){return L.useContext(np)!=null}function El(){return Hc()||Qe(!1),L.useContext(np).location}function Yx(n){L.useContext(Is).static||L.useLayoutEffect(n)}function rp(){let{isDataRoute:n}=L.useContext(Es);return n?Z2():j2()}function j2(){Hc()||Qe(!1);let n=L.useContext(tp),{basename:e,future:t,navigator:r}=L.useContext(Is),{matches:i}=L.useContext(Es),{pathname:s}=El(),o=JSON.stringify(Wx(i,t.v7_relativeSplatPath)),a=L.useRef(!1);return Yx(()=>{a.current=!0}),L.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Hx(c,JSON.parse(o),s,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Zi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,n])}function B2(){let{matches:n}=L.useContext(Es),e=n[n.length-1];return e?e.params:{}}function ip(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=L.useContext(Is),{matches:i}=L.useContext(Es),{pathname:s}=El(),o=JSON.stringify(Wx(i,r.v7_relativeSplatPath));return L.useMemo(()=>Hx(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function $2(n,e){return z2(n,e)}function z2(n,e,t,r){Hc()||Qe(!1);let{navigator:i}=L.useContext(Is),{matches:s}=L.useContext(Es),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=El(),d;if(e){var h;let b=typeof e=="string"?Il(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Qe(!1),d=b}else d=c;let p=d.pathname||"/",g=p;if(l!=="/"){let b=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let S=y2(n,{pathname:g}),T=K2(S&&S.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Zi([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Zi([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,t,r);return e&&T?L.createElement(np.Provider,{value:{location:dc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ui.Pop}},T):T}function q2(){let n=J2(),e=L2(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:i},t):null,null)}const W2=L.createElement(q2,null);class H2 extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(Es.Provider,{value:this.props.routeContext},L.createElement(Qx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G2(n){let{routeContext:e,match:t,children:r}=n,i=L.useContext(tp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(Es.Provider,{value:e},r)}function K2(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Qe(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:g}=t,S=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||S){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let g,S=!1,T=null,b=null;t&&(g=a&&h.route.id?a[h.route.id]:void 0,T=h.route.errorElement||W2,l&&(c<0&&p===0?(eV("route-fallback"),S=!0,b=null):c===p&&(S=!0,b=h.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,p+1)),_=()=>{let y;return g?y=T:S?y=b:h.route.Component?y=L.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,L.createElement(G2,{match:h,routeContext:{outlet:d,matches:I,isDataRoute:t!=null},children:y})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?L.createElement(H2,{location:t.location,revalidation:t.revalidation,component:T,error:g,children:_(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):_()},null)}var Xx=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Xx||{}),Jx=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Jx||{});function Q2(n){let e=L.useContext(tp);return e||Qe(!1),e}function Y2(n){let e=L.useContext(Kx);return e||Qe(!1),e}function X2(n){let e=L.useContext(Es);return e||Qe(!1),e}function Zx(n){let e=X2(),t=e.matches[e.matches.length-1];return t.route.id||Qe(!1),t.route.id}function J2(){var n;let e=L.useContext(Qx),t=Y2(),r=Zx();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Z2(){let{router:n}=Q2(Xx.UseNavigateStable),e=Zx(Jx.UseNavigateStable),t=L.useRef(!1);return Yx(()=>{t.current=!0}),L.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,dc({fromRouteId:e},s)))},[n,e])}const CE={};function eV(n,e,t){CE[n]||(CE[n]=!0)}function tV(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function tr(n){Qe(!1)}function nV(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Ui.Pop,navigator:s,static:o=!1,future:a}=n;Hc()&&Qe(!1);let l=e.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:l,navigator:s,static:o,future:dc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Il(r));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:S="default"}=r,T=L.useMemo(()=>{let b=Xa(d,l);return b==null?null:{location:{pathname:b,search:h,hash:p,state:g,key:S},navigationType:i}},[l,d,h,p,g,S,i]);return T==null?null:L.createElement(Is.Provider,{value:c},L.createElement(np.Provider,{children:t,value:T}))}function kE(n){let{children:e,location:t}=n;return $2(Ay(e),t)}new Promise(()=>{});function Ay(n,e){e===void 0&&(e=[]);let t=[];return L.Children.forEach(n,(r,i)=>{if(!L.isValidElement(r))return;let s=[...e,i];if(r.type===L.Fragment){t.push.apply(t,Ay(r.props.children,s));return}r.type!==tr&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ay(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hf(){return hf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hf.apply(this,arguments)}function eb(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function rV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iV(n,e){return n.button===0&&(!e||e==="_self")&&!rV(n)}function Py(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function sV(n,e){let t=Py(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}const oV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],aV=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],lV="6";try{window.__reactRouterVersion=lV}catch{}const uV=L.createContext({isTransitioning:!1}),cV="startTransition",DE=SD[cV];function dV(n){let{basename:e,children:t,future:r,window:i}=n,s=L.useRef();s.current==null&&(s.current=p2({window:i,v5Compat:!0}));let o=s.current,[a,l]=L.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=L.useCallback(h=>{c&&DE?DE(()=>l(h)):l(h)},[l,c]);return L.useLayoutEffect(()=>o.listen(d),[o,d]),L.useEffect(()=>tV(r),[r]),L.createElement(nV,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const hV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gr=L.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,p=eb(e,oV),{basename:g}=L.useContext(Is),S,T=!1;if(typeof c=="string"&&fV.test(c)&&(S=c,hV))try{let y=new URL(window.location.href),k=c.startsWith("//")?new URL(y.protocol+c):new URL(c),V=Xa(k.pathname,g);k.origin===y.origin&&V!=null?c=V+k.search+k.hash:T=!0}catch{}let b=U2(c,{relative:i}),I=mV(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function _(y){r&&r(y),y.defaultPrevented||I(y)}return L.createElement("a",hf({},p,{href:S||b,onClick:T||s?r:_,ref:t,target:l}))}),ji=L.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=eb(e,aV),p=ip(l,{relative:h.relative}),g=El(),S=L.useContext(Kx),{navigator:T,basename:b}=L.useContext(Is),I=S!=null&&yV(p)&&c===!0,_=T.encodeLocation?T.encodeLocation(p).pathname:p.pathname,y=g.pathname,k=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(y=y.toLowerCase(),k=k?k.toLowerCase():null,_=_.toLowerCase()),k&&b&&(k=Xa(k,b)||k);const V=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let j=y===_||!o&&y.startsWith(_)&&y.charAt(V)==="/",A=k!=null&&(k===_||!o&&k.startsWith(_)&&k.charAt(_.length)==="/"),v={isActive:j,isPending:A,isTransitioning:I},x=j?r:void 0,P;typeof s=="function"?P=s(v):P=[s,j?"active":null,A?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(v):a;return L.createElement(Gr,hf({},h,{"aria-current":x,className:P,ref:t,style:D,to:l,viewTransition:c}),typeof d=="function"?d(v):d)});var xy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(xy||(xy={}));var NE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(NE||(NE={}));function pV(n){let e=L.useContext(tp);return e||Qe(!1),e}function mV(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=rp(),c=El(),d=ip(n,{relative:o});return L.useCallback(h=>{if(iV(h,t)){h.preventDefault();let p=r!==void 0?r:df(c)===df(d);l(n,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,i,t,n,s,o,a])}function gV(n){let e=L.useRef(Py(n)),t=L.useRef(!1),r=El(),i=L.useMemo(()=>sV(r.search,t.current?null:e.current),[r.search]),s=rp(),o=L.useCallback((a,l)=>{const c=Py(typeof a=="function"?a(i):a);t.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function yV(n,e){e===void 0&&(e={});let t=L.useContext(uV);t==null&&Qe(!1);let{basename:r}=pV(xy.useViewTransitionState),i=ip(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Xa(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Xa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Sy(i.pathname,o)!=null||Sy(i.pathname,s)!=null}let _V={data:""},vV=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||_V,wV=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,IV=/\/\*[^]*?\*\/|  +/g,OE=/\n+/g,Ai=(n,e)=>{let t="",r="",i="";for(let s in n){let o=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":r+=s[1]=="f"?Ai(o,s):s+"{"+Ai(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ai(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ai.p?Ai.p(s,o):s+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+r},Or={},tb=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+tb(n[t]);return e}return n},EV=(n,e,t,r,i)=>{let s=tb(n),o=Or[s]||(Or[s]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(s));if(!Or[o]){let l=s!==n?n:(c=>{let d,h,p=[{}];for(;d=wV.exec(c.replace(IV,""));)d[4]?p.shift():d[3]?(h=d[3].replace(OE," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][d[1]]=d[2].replace(OE," ").trim();return p[0]})(n);Or[o]=Ai(i?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&Or.g?Or.g:null;return t&&(Or.g=Or[o]),((l,c,d,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Or[o],e,r,a),o},TV=(n,e,t)=>n.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ai(a,""):a===!1?"":a}return r+i+(o??"")},"");function sp(n){let e=this||{},t=n.call?n(e.p):n;return EV(t.unshift?t.raw?TV(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,vV(e.target),e.g,e.o,e.k)}let nb,by,Ry;sp.bind({g:1});let ei=sp.bind({k:1});function SV(n,e,t,r){Ai.p=e,nb=n,by=t,Ry=r}function Ts(n,e){let t=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;t.p=Object.assign({theme:by&&by()},a),t.o=/ *go\d+/.test(l),a.className=sp.apply(t,r)+(l?" "+l:"");let c=n;return n[0]&&(c=a.as||n,delete a.as),Ry&&c[0]&&Ry(a),nb(c,a)}return i}}var AV=n=>typeof n=="function",ff=(n,e)=>AV(n)?n(e):n,PV=(()=>{let n=0;return()=>(++n).toString()})(),rb=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),xV=20,wv="default",ib=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return ib(n,{type:n.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let s=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},Sh=[],sb={toasts:[],pausedAt:void 0,settings:{toastLimit:xV}},fr={},ob=(n,e=wv)=>{fr[e]=ib(fr[e]||sb,n),Sh.forEach(([t,r])=>{t===e&&r(fr[e])})},ab=n=>Object.keys(fr).forEach(e=>ob(n,e)),bV=n=>Object.keys(fr).find(e=>fr[e].toasts.some(t=>t.id===n)),op=(n=wv)=>e=>{ob(e,n)},RV={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CV=(n={},e=wv)=>{let[t,r]=L.useState(fr[e]||sb),i=L.useRef(fr[e]);L.useEffect(()=>(i.current!==fr[e]&&r(fr[e]),Sh.push([e,r]),()=>{let o=Sh.findIndex(([a])=>a===e);o>-1&&Sh.splice(o,1)}),[e]);let s=t.toasts.map(o=>{var a,l,c;return{...n,...n[o.type],...o,removeDelay:o.removeDelay||((a=n[o.type])==null?void 0:a.removeDelay)||(n==null?void 0:n.removeDelay),duration:o.duration||((l=n[o.type])==null?void 0:l.duration)||(n==null?void 0:n.duration)||RV[o.type],style:{...n.style,...(c=n[o.type])==null?void 0:c.style,...o.style}}});return{...t,toasts:s}},kV=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||PV()}),Gc=n=>(e,t)=>{let r=kV(e,n,t);return op(r.toasterId||bV(r.id))({type:2,toast:r}),r.id},ft=(n,e)=>Gc("blank")(n,e);ft.error=Gc("error");ft.success=Gc("success");ft.loading=Gc("loading");ft.custom=Gc("custom");ft.dismiss=(n,e)=>{let t={type:3,toastId:n};e?op(e)(t):ab(t)};ft.dismissAll=n=>ft.dismiss(void 0,n);ft.remove=(n,e)=>{let t={type:4,toastId:n};e?op(e)(t):ab(t)};ft.removeAll=n=>ft.remove(void 0,n);ft.promise=(n,e,t)=>{let r=ft.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let s=e.success?ff(e.success,i):void 0;return s?ft.success(s,{id:r,...t,...t==null?void 0:t.success}):ft.dismiss(r),i}).catch(i=>{let s=e.error?ff(e.error,i):void 0;s?ft.error(s,{id:r,...t,...t==null?void 0:t.error}):ft.dismiss(r)}),n};var DV=1e3,NV=(n,e="default")=>{let{toasts:t,pausedAt:r}=CV(n,e),i=L.useRef(new Map).current,s=L.useCallback((h,p=DV)=>{if(i.has(h))return;let g=setTimeout(()=>{i.delete(h),o({type:4,toastId:h})},p);i.set(h,g)},[]);L.useEffect(()=>{if(r)return;let h=Date.now(),p=t.map(g=>{if(g.duration===1/0)return;let S=(g.duration||0)+g.pauseDuration-(h-g.createdAt);if(S<0){g.visible&&ft.dismiss(g.id);return}return setTimeout(()=>ft.dismiss(g.id,e),S)});return()=>{p.forEach(g=>g&&clearTimeout(g))}},[t,r,e]);let o=L.useCallback(op(e),[e]),a=L.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=L.useCallback((h,p)=>{o({type:1,toast:{id:h,height:p}})},[o]),c=L.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),d=L.useCallback((h,p)=>{let{reverseOrder:g=!1,gutter:S=8,defaultPosition:T}=p||{},b=t.filter(y=>(y.position||T)===(h.position||T)&&y.height),I=b.findIndex(y=>y.id===h.id),_=b.filter((y,k)=>k<I&&y.visible).length;return b.filter(y=>y.visible).slice(...g?[_+1]:[0,_]).reduce((y,k)=>y+(k.height||0)+S,0)},[t]);return L.useEffect(()=>{t.forEach(h=>{if(h.dismissed)s(h.id,h.removeDelay);else{let p=i.get(h.id);p&&(clearTimeout(p),i.delete(h.id))}})},[t,s]),{toasts:t,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:d}}},OV=ei`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,VV=ei`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,MV=ei`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,LV=Ts("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${OV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${VV} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${MV} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,FV=ei`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,UV=Ts("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${FV} 1s linear infinite;
`,jV=ei`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,BV=ei`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,$V=Ts("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${BV} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zV=Ts("div")`
  position: absolute;
`,qV=Ts("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,WV=ei`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HV=Ts("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${WV} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,GV=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?L.createElement(HV,null,e):e:t==="blank"?null:L.createElement(qV,null,L.createElement(UV,{...r}),t!=="loading"&&L.createElement(zV,null,t==="error"?L.createElement(LV,{...r}):L.createElement($V,{...r})))},KV=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,QV=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,YV="0%{opacity:0;} 100%{opacity:1;}",XV="0%{opacity:1;} 100%{opacity:0;}",JV=Ts("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ZV=Ts("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,eM=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=rb()?[YV,XV]:[KV(t),QV(t)];return{animation:e?`${ei(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ei(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},tM=L.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?eM(n.position||e||"top-center",n.visible):{opacity:0},s=L.createElement(GV,{toast:n}),o=L.createElement(ZV,{...n.ariaProps},ff(n.message,n));return L.createElement(JV,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:s,message:o}):L.createElement(L.Fragment,null,s,o))});SV(L.createElement);var nM=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let s=L.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(n,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return L.createElement("div",{ref:s,className:e,style:t},i)},rM=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:rb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},iM=sp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jd=16,sM=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=NV(t,s);return L.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:Jd,left:Jd,right:Jd,bottom:Jd,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let h=d.position||e,p=c.calculateOffset(d,{reverseOrder:n,gutter:r,defaultPosition:e}),g=rM(h,p);return L.createElement(nM,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?iM:"",style:g},d.type==="custom"?ff(d.message,d):i?i(d):L.createElement(tM,{toast:d,position:h}))}))},mt=ft,VE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},oM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ub={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(t[d],t[h],t[p],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):oM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new aM;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const S=c<<6&192|h;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class aM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lM=function(n){const e=lb(n);return ub.encodeByteArray(e,!0)},pf=function(n){return lM(n).replace(/\./g,"")},cb=function(n){try{return ub.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mf(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!uM(t)||(n[t]=mf(n[t],e[t]));return n}function uM(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=()=>db().__FIREBASE_DEFAULTS__,dM=()=>{if(typeof process>"u"||typeof VE>"u")return;const n=VE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},hM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cb(n[1]);return e&&JSON.parse(e)},Iv=()=>{try{return cM()||dM()||hM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hb=()=>{var n;return(n=Iv())===null||n===void 0?void 0:n.config},fM=n=>{var e;return(e=Iv())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[pf(JSON.stringify(t)),pf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Ev(){var n;const e=(n=Iv())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yM(){return typeof window<"u"||fb()}function fb(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function _M(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Tv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mb(){const n=ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gb(){return!Ev()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hc(){try{return typeof indexedDB=="object"}catch{return!1}}function vM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="FirebaseError";class Zt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wM,Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vo.prototype.create)}}class Vo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?IM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zt(i,a,r)}}function IM(n,e){return n.replace(EM,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function TM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(LE(s)&&LE(o)){if(!fc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function LE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _a(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function vu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yb(n,e){const t=new SM(n,e);return t.subscribe.bind(t)}class SM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");AM(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Wm),i.error===void 0&&(i.error=Wm),i.complete===void 0&&(i.complete=Wm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(n){return n&&n._delegate?n._delegate:n}class Er{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new pM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bM(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xM(n){return n===Us?void 0:n}function bM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new PM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=[];var ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ue||(ue={}));const vb={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},RM=ue.INFO,CM={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},kM=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=CM[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ap{constructor(e){this.name=e,this._logLevel=RM,this._logHandler=kM,this._userLogHandler=null,Sv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}function DM(n){Sv.forEach(e=>{e.setLogLevel(n)})}function NM(n,e){for(const t of Sv){let r=null;e&&e.level&&(r=vb[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:ue[s].toLowerCase(),message:a,args:o,type:i.name})}}}const OM=(n,e)=>e.some(t=>n instanceof t);let FE,UE;function VM(){return FE||(FE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MM(){return UE||(UE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wb=new WeakMap,Cy=new WeakMap,Ib=new WeakMap,Hm=new WeakMap,Av=new WeakMap;function LM(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(es(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&wb.set(t,n)}).catch(()=>{}),Av.set(e,n),e}function FM(n){if(Cy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Cy.set(n,e)}let ky={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ib.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return es(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UM(n){ky=n(ky)}function jM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Gm(this),e,...t);return Ib.set(r,e.sort?e.sort():[e]),es(r)}:MM().includes(n)?function(...e){return n.apply(Gm(this),e),es(wb.get(this))}:function(...e){return es(n.apply(Gm(this),e))}}function BM(n){return typeof n=="function"?jM(n):(n instanceof IDBTransaction&&FM(n),OM(n,VM())?new Proxy(n,ky):n)}function es(n){if(n instanceof IDBRequest)return LM(n);if(Hm.has(n))return Hm.get(n);const e=BM(n);return e!==n&&(Hm.set(n,e),Av.set(e,n)),e}const Gm=n=>Av.get(n);function $M(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=es(o);return r&&o.addEventListener("upgradeneeded",l=>{r(es(o.result),l.oldVersion,l.newVersion,es(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const zM=["get","getKey","getAll","getAllKeys","count"],qM=["put","add","delete","clear"],Km=new Map;function jE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Km.get(e))return Km.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=qM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zM.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return Km.set(e,s),s}UM(n=>({...n,get:(e,t,r)=>jE(e,t)||n.get(e,t,r),has:(e,t)=>!!jE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function HM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gf="@firebase/app",Dy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new ap("@firebase/app"),GM="@firebase/app-compat",KM="@firebase/analytics-compat",QM="@firebase/analytics",YM="@firebase/app-check-compat",XM="@firebase/app-check",JM="@firebase/auth",ZM="@firebase/auth-compat",eL="@firebase/database",tL="@firebase/data-connect",nL="@firebase/database-compat",rL="@firebase/functions",iL="@firebase/functions-compat",sL="@firebase/installations",oL="@firebase/installations-compat",aL="@firebase/messaging",lL="@firebase/messaging-compat",uL="@firebase/performance",cL="@firebase/performance-compat",dL="@firebase/remote-config",hL="@firebase/remote-config-compat",fL="@firebase/storage",pL="@firebase/storage-compat",mL="@firebase/firestore",gL="@firebase/vertexai-preview",yL="@firebase/firestore-compat",_L="firebase",vL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]",wL={[gf]:"fire-core",[GM]:"fire-core-compat",[QM]:"fire-analytics",[KM]:"fire-analytics-compat",[XM]:"fire-app-check",[YM]:"fire-app-check-compat",[JM]:"fire-auth",[ZM]:"fire-auth-compat",[eL]:"fire-rtdb",[tL]:"fire-data-connect",[nL]:"fire-rtdb-compat",[rL]:"fire-fn",[iL]:"fire-fn-compat",[sL]:"fire-iid",[oL]:"fire-iid-compat",[aL]:"fire-fcm",[lL]:"fire-fcm-compat",[uL]:"fire-perf",[cL]:"fire-perf-compat",[dL]:"fire-rc",[hL]:"fire-rc-compat",[fL]:"fire-gcs",[pL]:"fire-gcs-compat",[mL]:"fire-fst",[yL]:"fire-fst-compat",[gL]:"fire-vertex","fire-js":"fire-js",[_L]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new Map,Ja=new Map,Za=new Map;function pc(n,e){try{n.container.addComponent(e)}catch(t){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Eb(n,e){n.container.addOrOverwriteComponent(e)}function as(n){const e=n.name;if(Za.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;Za.set(e,n);for(const t of os.values())pc(t,n);for(const t of Ja.values())pc(t,n);return!0}function Tb(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function IL(n,e,t=ss){Tb(n,e).clearInstance(t)}function Sb(n){return n.options!==void 0}function Ke(n){return n.settings!==void 0}function EL(){Za.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new Vo("app","Firebase",TL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ab=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL extends Ab{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Xn(gf,Dy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){xv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=vL;function Pv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ss,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fn.create("bad-app-name",{appName:String(i)});if(t||(t=hb()),!t)throw Fn.create("no-options");const s=os.get(i);if(s){if(fc(t,s.options)&&fc(r,s.config))return s;throw Fn.create("duplicate-app",{appName:i})}const o=new _b(i);for(const l of Za.values())o.addComponent(l);const a=new Ab(t,r,o);return os.set(i,a),a}function AL(n,e){if(yM()&&!fb())throw Fn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Sb(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Fn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Ja.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new _b(s);for(const c of Za.values())a.addComponent(c);const l=new SL(t,e,s,a);return Ja.set(s,l),l}function PL(n=ss){const e=os.get(n);if(!e&&n===ss&&hb())return Pv();if(!e)throw Fn.create("no-app",{appName:n});return e}function xL(){return Array.from(os.values())}async function xv(n){let e=!1;const t=n.name;os.has(t)?(e=!0,os.delete(t)):Ja.has(t)&&n.decRefCount()<=0&&(Ja.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Xn(n,e,t){var r;let i=(r=wL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(a.join(" "));return}as(new Er(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Pb(n,e){if(n!==null&&typeof n!="function")throw Fn.create("invalid-log-argument");NM(n,e)}function xb(n){DM(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="firebase-heartbeat-database",RL=1,mc="firebase-heartbeat-store";let Qm=null;function bb(){return Qm||(Qm=$M(bL,RL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fn.create("idb-open",{originalErrorMessage:n.message})})),Qm}async function CL(n){try{const t=(await bb()).transaction(mc),r=await t.objectStore(mc).get(Rb(n));return await t.done,r}catch(e){if(e instanceof Zt)ti.warn(e.message);else{const t=Fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ti.warn(t.message)}}}async function BE(n,e){try{const r=(await bb()).transaction(mc,"readwrite");await r.objectStore(mc).put(e,Rb(n)),await r.done}catch(t){if(t instanceof Zt)ti.warn(t.message);else{const r=Fn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ti.warn(r.message)}}}function Rb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=1024,DL=30*24*60*60*1e3;class NL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$E();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=DL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ti.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$E(),{heartbeatsToSend:r,unsentEntries:i}=OL(this._heartbeatsCache.heartbeats),s=pf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ti.warn(t),""}}}function $E(){return new Date().toISOString().substring(0,10)}function OL(n,e=kL){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zE(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),zE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class VL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hc()?vM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return BE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return BE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zE(n){return pf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(n){as(new Er("platform-logger",e=>new WM(e),"PRIVATE")),as(new Er("heartbeat",e=>new NL(e),"PRIVATE")),Xn(gf,Dy,n),Xn(gf,Dy,"esm2017"),Xn("fire-js","")}ML("");const LL=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Zt,SDK_VERSION:Ss,_DEFAULT_ENTRY_NAME:ss,_addComponent:pc,_addOrOverwriteComponent:Eb,_apps:os,_clearComponents:EL,_components:Za,_getProvider:Tb,_isFirebaseApp:Sb,_isFirebaseServerApp:Ke,_registerComponent:as,_removeServiceInstance:IL,_serverApps:Ja,deleteApp:xv,getApp:PL,getApps:xL,initializeApp:Pv,initializeServerApp:AL,onLog:Pb,registerVersion:Xn,setLogLevel:xb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,t){this._delegate=e,this.firebase=t,pc(e,new Er("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),xv(this._delegate)))}_getService(e,t=ss){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=ss){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){pc(this._delegate,e)}_addOrOverwriteComponent(e){Eb(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},qE=new Vo("app-compat","Firebase",UL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:Xn,setLogLevel:xb,onLog:Pb,apps:null,SDK_VERSION:Ss,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:LL}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||ss,!ME(e,c))throw qE.create("no-app",{appName:c});return e[c]}i.App=n;function s(c,d={}){const h=Pv(c,d);if(ME(e,h.name))return e[h.name];const p=new n(h,t);return e[h.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,h=d.replace("-compat","");if(as(c)&&c.type==="PUBLIC"){const p=(g=i())=>{if(typeof g[h]!="function")throw qE.create("invalid-app-argument",{appName:d});return g[h]()};c.serviceProps!==void 0&&mf(p,c.serviceProps),t[h]=p,n.prototype[h]=function(...g){return this._getService.bind(this,d).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?t[h]:null}function l(c,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(){const n=jL(FL);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:Cb,extendNamespace:e,createSubscribe:yb,ErrorFactory:Vo,deepExtend:mf});function e(t){mf(n,t)}return n}const BL=Cb();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=new ap("@firebase/app-compat"),$L="@firebase/app-compat",zL="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(n){Xn($L,zL,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=db();if(n.firebase!==void 0){WE.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&WE.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const vr=BL;qL();var WL="firebase",HL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr.registerVersion(WL,HL,"app-compat");function bv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const ru={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ko={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KL=GL,QL=kb,Db=new Vo("auth","Firebase",kb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new ap("@firebase/auth");function YL(n,...e){yf.logLevel<=ue.WARN&&yf.warn(`Auth (${Ss}): ${n}`,...e)}function Ah(n,...e){yf.logLevel<=ue.ERROR&&yf.error(`Auth (${Ss}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,...e){throw Cv(n,...e)}function gt(n,...e){return Cv(n,...e)}function Rv(n,e,t){const r=Object.assign(Object.assign({},QL()),{[e]:t});return new Vo("auth","Firebase",r).create(e,{appName:n.name})}function Tt(n){return Rv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sl(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dt(n,"argument-error"),Rv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Db.create(n,...e)}function q(n,e,...t){if(!n)throw Cv(e,...t)}function pr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ah(e),new Error(e)}function Zn(n,e){n||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function kv(){return HE()==="http:"||HE()==="https:"}function HE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kv()||pb()||"connection"in navigator)?navigator.onLine:!0}function JL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zn(t>e,"Short delay should be less than long delay!"),this.isMobile=gM()||Tv()}get(){return XL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(n,e){Zn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=new Kc(3e4,6e4);function Ze(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function et(n,e,t,r,i={}){return Ob(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Tl(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return _M()||(c.referrerPolicy="no-referrer"),Nb.fetch()(Vb(n,n.config.apiHost,t,a),c)})}async function Ob(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZL),e);try{const i=new nF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw wu(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wu(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wu(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw wu(n,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Rv(n,d,c);Dt(n,d)}}catch(i){if(i instanceof Zt)throw i;Dt(n,"network-request-failed",{message:String(i)})}}async function oi(n,e,t,r,i={}){const s=await et(n,e,t,r,i);return"mfaPendingCredential"in s&&Dt(n,"multi-factor-auth-required",{_serverResponse:s}),s}function Vb(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Dv(n.config,i):`${n.config.apiScheme}://${i}`}function tF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gt(this.auth,"network-request-failed")),eF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=gt(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(n){return n!==void 0&&n.getResponse!==void 0}function KE(n){return n!==void 0&&n.enterprise!==void 0}class rF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(n){return(await et(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function sF(n,e){return et(n,"GET","/v2/recaptchaConfig",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(n,e){return et(n,"POST","/v1/accounts:delete",e)}async function aF(n,e){return et(n,"POST","/v1/accounts:update",e)}async function Mb(n,e){return et(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lF(n,e=!1){const t=ne(n),r=await t.getIdToken(e),i=lp(r);q(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Mu(Ym(i.auth_time)),issuedAtTime:Mu(Ym(i.iat)),expirationTime:Mu(Ym(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ym(n){return Number(n)*1e3}function lp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const i=cb(t);return i?JSON.parse(i):(Ah("Failed to decode base64 JWT payload"),null)}catch(i){return Ah("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function QE(n){const e=lp(n);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Zt&&uF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function uF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ni(n,Mb(t,{idToken:r}));q(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Lb(s.providerUserInfo):[],a=hF(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ny(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,h)}async function dF(n){const e=ne(n);await yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Lb(n){return n.map(e=>{var{providerId:t}=e,r=bv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(n,e){const t=await Ob(n,{},async()=>{const r=Tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Vb(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Nb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pF(n,e){return et(n,"POST","/v2/accounts:revokeToken",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){q(e.length!==0,"internal-error");const t=QE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await fF(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Aa;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Aa,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,e){q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ny(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ni(this,this.stsTokenManager.getToken(this.auth,e));return q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lF(this,e)}reload(){return dF(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await yc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ke(this.auth.app))return Promise.reject(Tt(this.auth));const e=await this.getIdToken();return await ni(this,oF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,d;const h=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=t.photoURL)!==null&&o!==void 0?o:void 0,T=(a=t.tenantId)!==null&&a!==void 0?a:void 0,b=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,I=(c=t.createdAt)!==null&&c!==void 0?c:void 0,_=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:y,emailVerified:k,isAnonymous:V,providerData:j,stsTokenManager:A}=t;q(y&&A,e,"internal-error");const v=Aa.fromJSON(this.name,A);q(typeof y=="string",e,"internal-error"),mi(h,e.name),mi(p,e.name),q(typeof k=="boolean",e,"internal-error"),q(typeof V=="boolean",e,"internal-error"),mi(g,e.name),mi(S,e.name),mi(T,e.name),mi(b,e.name),mi(I,e.name),mi(_,e.name);const x=new zr({uid:y,auth:e,email:p,emailVerified:k,displayName:h,isAnonymous:V,photoURL:S,phoneNumber:g,tenantId:T,stsTokenManager:v,createdAt:I,lastLoginAt:_});return j&&Array.isArray(j)&&(x.providerData=j.map(P=>Object.assign({},P))),b&&(x._redirectEventId=b),x}static async _fromIdTokenResponse(e,t,r=!1){const i=new Aa;i.updateFromServerResponse(t);const s=new zr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await yc(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];q(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Lb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Aa;a.updateFromIdToken(r);const l=new zr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ny(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;function Tn(n){Zn(n instanceof Function,"Expected a class definition");let e=YE.get(n);return e?(Zn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,YE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fb.type="NONE";const el=Fb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(n,e,t){return`firebase:${n}:${e}:${t}`}class Pa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=uo(this.userKey,i.apiKey,s),this.fullPersistenceKey=uo("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Pa(Tn(el),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Tn(el);const o=uo(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){const h=zr._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Pa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Pa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($b(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ub(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zb(e))return"Blackberry";if(qb(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||Bb(e))&&!e.includes("edge/"))return"Chrome";if(Qc(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ub(n=ze()){return/firefox\//i.test(n)}function jb(n=ze()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bb(n=ze()){return/crios\//i.test(n)}function $b(n=ze()){return/iemobile/i.test(n)}function Qc(n=ze()){return/android/i.test(n)}function zb(n=ze()){return/blackberry/i.test(n)}function qb(n=ze()){return/webos/i.test(n)}function Yc(n=ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mF(n=ze()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function gF(n=ze()){var e;return Yc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yF(){return mb()&&document.documentMode===10}function Wb(n=ze()){return Yc(n)||Qc(n)||qb(n)||zb(n)||/windows phone/i.test(n)||$b(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n,e=[]){let t;switch(n){case"Browser":t=XE(ze());break;case"Worker":t=`${XE(ze())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vF(n,e={}){return et(n,"GET","/v2/passwordPolicy",Ze(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=6;class IF{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:wF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JE(this),this.idTokenSubscription=new JE(this),this.beforeStateQueue=new _F(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Db,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tn(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mb(this,{idToken:e}),r=await zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ke(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ke(this.app))return Promise.reject(Tt(this));const t=e?ne(e):null;return t&&q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ke(this.app)?Promise.reject(Tt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ke(this.app)?Promise.reject(Tt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vF(this),t=new IF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await pF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tn(e)||this._popupRedirectResolver;q(t,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[Tn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&YL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ye(n){return ne(n)}class JE{constructor(e){this.auth=e,this.observer=null,this.addObserver=yb(t=>this.observer=t)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TF(n){Xc=n}function Nv(n){return Xc.loadJS(n)}function SF(){return Xc.recaptchaV2Script}function AF(){return Xc.recaptchaEnterpriseScript}function PF(){return Xc.gapiScript}function Gb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const xF="recaptcha-enterprise",bF="NO_RECAPTCHA";class RF{constructor(e){this.type=xF,this.auth=Ye(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{sF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new rF(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;KE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(bF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&KE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=AF();l.length!==0&&(l+=a),Nv(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function ZE(n,e,t,r=!1){const i=new RF(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _c(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ZE(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ZE(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}function CF(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Tn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kF(n,e,t){const r=Ye(n);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=Kb(e),{host:o,port:a}=DF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||NF()}function Kb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DF(n){const e=Kb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:eT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:eT(o)}}}function eT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function NF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,t){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(n,e){return et(n,"POST","/v1/accounts:resetPassword",Ze(n,e))}async function OF(n,e){return et(n,"POST","/v1/accounts:update",e)}async function VF(n,e){return et(n,"POST","/v1/accounts:signUp",e)}async function MF(n,e){return et(n,"POST","/v1/accounts:update",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(n,e){return oi(n,"POST","/v1/accounts:signInWithPassword",Ze(n,e))}async function up(n,e){return et(n,"POST","/v1/accounts:sendOobCode",Ze(n,e))}async function FF(n,e){return up(n,e)}async function UF(n,e){return up(n,e)}async function jF(n,e){return up(n,e)}async function BF(n,e){return up(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $F(n,e){return oi(n,"POST","/v1/accounts:signInWithEmailLink",Ze(n,e))}async function zF(n,e){return oi(n,"POST","/v1/accounts:signInWithEmailLink",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Al{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new vc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _c(e,t,"signInWithPassword",LF);case"emailLink":return $F(e,{email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _c(e,r,"signUpPassword",VF);case"emailLink":return zF(e,{idToken:t,email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kr(n,e){return oi(n,"POST","/v1/accounts:signInWithIdp",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="http://localhost";class Tr extends Al{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=bv(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Tr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Kr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Kr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}buildRequest(){const e={requestUri:qF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WF(n,e){return et(n,"POST","/v1/accounts:sendVerificationCode",Ze(n,e))}async function HF(n,e){return oi(n,"POST","/v1/accounts:signInWithPhoneNumber",Ze(n,e))}async function GF(n,e){const t=await oi(n,"POST","/v1/accounts:signInWithPhoneNumber",Ze(n,e));if(t.temporaryProof)throw wu(n,"account-exists-with-different-credential",t);return t}const KF={USER_NOT_FOUND:"user-not-found"};async function QF(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return oi(n,"POST","/v1/accounts:signInWithPhoneNumber",Ze(n,t),KF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends Al{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new co({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new co({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return HF(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return GF(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return QF(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new co({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XF(n){const e=_a(vu(n)).link,t=e?_a(vu(e)).deep_link_id:null,r=_a(vu(n)).deep_link_id;return(r?_a(vu(r)).link:null)||r||t||e||n}class cp{constructor(e){var t,r,i,s,o,a;const l=_a(vu(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=YF((i=l.mode)!==null&&i!==void 0?i:null);q(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=XF(e);try{return new cp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.providerId=As.PROVIDER_ID}static credential(e,t){return vc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cp.parseLink(t);return q(r,"argument-error"),vc._fromEmailAndCode(e,r.code,r.tenantId)}}As.PROVIDER_ID="password";As.EMAIL_PASSWORD_SIGN_IN_METHOD="password";As.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends ai{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xa extends Pl{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return q("providerId"in t&&"signInMethod"in t,"argument-error"),Tr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return q(e.idToken||e.accessToken,"argument-error"),Tr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return xa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!t&&!s||!a)return null;try{return new xa(a)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Pl{constructor(){super("facebook.com")}static credential(e){return Tr._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Tr._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return lr.credential(t,r)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Pl{constructor(){super("github.com")}static credential(e){return Tr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="http://localhost";class tl extends Al{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Kr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Kr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new tl(r,s)}static _create(e,t){return new tl(e,t)}buildRequest(){return{requestUri:JF,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="saml.";class _f extends ai{constructor(e){q(e.startsWith(ZF),"argument-error"),super(e)}static credentialFromResult(e){return _f.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return _f.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=tl.fromJSON(e);return q(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return tl._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Pl{constructor(){super("twitter.com")}static credential(e,t){return Tr._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return cr.credential(t,r)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(n,e){return oi(n,"POST","/v1/accounts:signUp",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await zr._fromIdTokenResponse(e,r,i),o=tT(r);return new Bn({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=tT(r);return new Bn({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function tT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(n){var e;if(Ke(n.app))return Promise.reject(Tt(n));const t=Ye(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Bn({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await Yb(t,{returnSecureToken:!0}),i=await Bn._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends Zt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new vf(e,t,r,i)}}function Xb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(n,e){const t=ne(n);await dp(!0,t,e);const{providerUserInfo:r}=await aF(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Jb(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Ov(n,e,t=!1){const r=await ni(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Bn._forOperation(n,"link",r)}async function dp(n,e,t){await yc(e);const r=Jb(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";q(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(n,e,t=!1){const{auth:r}=n;if(Ke(r.app))return Promise.reject(Tt(r));const i="reauthenticate";try{const s=await ni(n,Xb(r,i,e,n),t);q(s.idToken,r,"internal-error");const o=lp(s.idToken);q(o,r,"internal-error");const{sub:a}=o;return q(n.uid===a,r,"user-mismatch"),Bn._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(n,e,t=!1){if(Ke(n.app))return Promise.reject(Tt(n));const r="signIn",i=await Xb(n,r,e),s=await Bn._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function hp(n,e){return eR(Ye(n),e)}async function tR(n,e){const t=ne(n);return await dp(!1,t,e.providerId),Ov(t,e)}async function nR(n,e){return Zb(ne(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(n,e){return oi(n,"POST","/v1/accounts:signInWithCustomToken",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(n,e){if(Ke(n.app))return Promise.reject(Tt(n));const t=Ye(n),r=await nU(t,{token:e,returnSecureToken:!0}),i=await Bn._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Vv._fromServerResponse(e,t):"totpInfo"in t?Mv._fromServerResponse(e,t):Dt(e,"internal-error")}}class Vv extends Jc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Vv(t)}}class Mv extends Jc{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Mv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n,e,t){var r;q(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),q(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(q(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(q(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lv(n){const e=Ye(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iU(n,e,t){const r=Ye(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&fp(r,i,t),await _c(r,i,"getOobCode",UF)}async function sU(n,e,t){await Qb(ne(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Lv(n),r})}async function oU(n,e){await MF(ne(n),{oobCode:e})}async function rR(n,e){const t=ne(n),r=await Qb(t,{oobCode:e}),i=r.requestType;switch(q(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(r.mfaInfo,t,"internal-error");default:q(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=Jc._fromServerResponse(Ye(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function aU(n,e){const{data:t}=await rR(ne(n),e);return t.email}async function lU(n,e,t){if(Ke(n.app))return Promise.reject(Tt(n));const r=Ye(n),o=await _c(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yb).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Lv(n),l}),a=await Bn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function uU(n,e,t){return Ke(n.app)?Promise.reject(Tt(n)):hp(ne(n),As.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Lv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(n,e,t){const r=Ye(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){q(a.handleCodeInApp,r,"argument-error"),a&&fp(r,o,a)}s(i,t),await _c(r,i,"getOobCode",jF)}function dU(n,e){const t=cp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function hU(n,e,t){if(Ke(n.app))return Promise.reject(Tt(n));const r=ne(n),i=As.credentialWithLink(e,t||gc());return q(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),hp(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(n,e){return et(n,"POST","/v1/accounts:createAuthUri",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(n,e){const t=kv()?gc():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await fU(ne(n),r);return i||[]}async function mU(n,e){const t=ne(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&fp(t.auth,i,e);const{email:s}=await FF(t.auth,i);s!==n.email&&await n.reload()}async function gU(n,e,t){const r=ne(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&fp(r.auth,s,t);const{email:o}=await BF(r.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(n,e){return et(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _U(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ne(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await ni(r,yU(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function vU(n,e){const t=ne(n);return Ke(t.auth.app)?Promise.reject(Tt(t.auth)):iR(t,e,null)}function wU(n,e){return iR(ne(n),null,e)}async function iR(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await ni(n,OF(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=lp(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ba(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new EU(s,i);case"github.com":return new TU(s,i);case"google.com":return new SU(s,i);case"twitter.com":return new AU(s,i,n.screenName||null);case"custom":case"anonymous":return new ba(s,null);default:return new ba(s,r,i)}}class ba{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class sR extends ba{constructor(e,t,r,i){super(e,t,r),this.username=i}}class EU extends ba{constructor(e,t){super(e,"facebook.com",t)}}class TU extends sR{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class SU extends ba{constructor(e,t){super(e,"google.com",t)}}class AU extends sR{constructor(e,t,r){super(e,"twitter.com",t,r)}}function PU(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:IU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Ys("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ys("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Ys._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ys._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Ye(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Jc._fromServerResponse(r,a));q(i.mfaPendingCredential,r,"internal-error");const o=Ys._fromMfaPendingCredential(i.mfaPendingCredential);return new Fv(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const d=await Bn._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return q(t.user,r,"internal-error"),Bn._forOperation(t.user,t.operationType,c);default:Dt(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function xU(n,e){var t;const r=ne(n),i=e;return q(e.customData.operationType,r,"argument-error"),q((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),Fv._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(n,e){return et(n,"POST","/v2/accounts/mfaEnrollment:start",Ze(n,e))}function RU(n,e){return et(n,"POST","/v2/accounts/mfaEnrollment:finalize",Ze(n,e))}function CU(n,e){return et(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Ze(n,e))}class Uv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Jc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Uv(e)}async getSession(){return Ys._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await ni(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ni(this.user,CU(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Xm=new WeakMap;function kU(n){const e=ne(n);return Xm.has(e)||Xm.set(e,Uv._fromUser(e)),Xm.get(e)}const wf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=1e3,NU=10;class aR extends oR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);yF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NU):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},DU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aR.type="LOCAL";const jv=aR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR extends oR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lR.type="SESSION";const Io=lR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new pp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await OU(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Zc("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return window}function MU(n){ut().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function LU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function UU(){return Bv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebaseLocalStorageDb",jU=1,If="firebaseLocalStorage",cR="fbase_key";class ed{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mp(n,e){return n.transaction([If],e?"readwrite":"readonly").objectStore(If)}function BU(){const n=indexedDB.deleteDatabase(uR);return new ed(n).toPromise()}function Oy(){const n=indexedDB.open(uR,jU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(If,{keyPath:cR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(If)?e(r):(r.close(),await BU(),e(await Oy()))})})}async function nT(n,e,t){const r=mp(n,!0).put({[cR]:e,value:t});return new ed(r).toPromise()}async function $U(n,e){const t=mp(n,!1).get(e),r=await new ed(t).toPromise();return r===void 0?null:r.value}function rT(n,e){const t=mp(n,!0).delete(e);return new ed(t).toPromise()}const zU=800,qU=3;class dR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Oy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>qU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pp._getInstance(UU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await LU(),!this.activeServiceWorker)return;this.sender=new VU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oy();return await nT(e,wf,"1"),await rT(e,wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>nT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>$U(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mp(i,!1).getAll();return new ed(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dR.type="LOCAL";const wc=dR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n,e){return et(n,"POST","/v2/accounts/mfaSignIn:start",Ze(n,e))}function HU(n,e){return et(n,"POST","/v2/accounts/mfaSignIn:finalize",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=500,KU=6e4,Zd=1e12;class QU{constructor(e){this.auth=e,this.counter=Zd,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new YU(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Zd;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Zd;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Zd;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class YU{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;q(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=XU(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},KU)},GU))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function XU(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=Gb("rcb"),JU=new Kc(3e4,6e4);class ZU{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return q(e4(t),e,"argument-error"),this.shouldResolveImmediately(t)&&GE(ut().grecaptcha)?Promise.resolve(ut().grecaptcha):new Promise((r,i)=>{const s=ut().setTimeout(()=>{i(gt(e,"network-request-failed"))},JU.get());ut()[Jm]=()=>{ut().clearTimeout(s),delete ut()[Jm];const a=ut().grecaptcha;if(!a||!GE(a)){i(gt(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const h=l(c,d);return this.counter++,h},this.hostLanguage=t,r(a)};const o=`${SF()}?${Tl({onload:Jm,render:"explicit",hl:t})}`;Nv(o).catch(()=>{clearTimeout(s),i(gt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=ut().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function e4(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class t4{async load(e){return new QU(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="recaptcha",n4={theme:"light",type:"image"};let r4=class{constructor(e,t,r=Object.assign({},n4)){this.parameters=r,this.type=hR,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ye(e),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;q(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new t4:new ZU,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=ut()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(kv()&&!Bv(),this.auth,"internal-error"),await i4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await iF(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function i4(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=co._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function s4(n,e,t){if(Ke(n.app))return Promise.reject(Tt(n));const r=Ye(n),i=await gp(r,e,ne(t));return new $v(i,s=>hp(r,s))}async function o4(n,e,t){const r=ne(n);await dp(!1,r,"phone");const i=await gp(r.auth,e,ne(t));return new $v(i,s=>tR(r,s))}async function a4(n,e,t){const r=ne(n);if(Ke(r.auth.app))return Promise.reject(Tt(r.auth));const i=await gp(r.auth,e,ne(t));return new $v(i,s=>nR(r,s))}async function gp(n,e,t){var r;const i=await t.verify();try{q(typeof i=="string",n,"argument-error"),q(t.type===hR,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return q(o.type==="enroll",n,"internal-error"),(await bU(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{q(o.type==="signin",n,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return q(a,n,"missing-multi-factor-info"),(await WU(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await WF(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}async function l4(n,e){const t=ne(n);if(Ke(t.auth.app))return Promise.reject(Tt(t.auth));await Ov(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo=class Ph{constructor(e){this.providerId=Ph.PROVIDER_ID,this.auth=Ye(e)}verifyPhoneNumber(e,t){return gp(this.auth,e,ne(t))}static credential(e,t){return co._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ph.credentialFromTaggedObject(t)}static credentialFromError(e){return Ph.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?co._fromTokenResponse(t,r):null}};Eo.PROVIDER_ID="phone";Eo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(n,e){return e?Tn(e):(q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends Al{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function u4(n){return eR(n.auth,new zv(n),n.bypassAuthState)}function c4(n){const{auth:e,user:t}=n;return q(t,e,"internal-error"),Zb(t,new zv(n),n.bypassAuthState)}async function d4(n){const{auth:e,user:t}=n;return q(t,e,"internal-error"),Ov(t,new zv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u4;case"linkViaPopup":case"linkViaRedirect":return d4;case"reauthViaPopup":case"reauthViaRedirect":return c4;default:Dt(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Kc(2e3,1e4);async function f4(n,e,t){if(Ke(n.app))return Promise.reject(gt(n,"operation-not-supported-in-this-environment"));const r=Ye(n);Sl(n,e,ai);const i=Mo(r,t);return new qr(r,"signInViaPopup",e,i).executeNotNull()}async function p4(n,e,t){const r=ne(n);if(Ke(r.auth.app))return Promise.reject(gt(r.auth,"operation-not-supported-in-this-environment"));Sl(r.auth,e,ai);const i=Mo(r.auth,t);return new qr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function m4(n,e,t){const r=ne(n);Sl(r.auth,e,ai);const i=Mo(r.auth,t);return new qr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class qr extends fR{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,qr.currentPopupAction&&qr.currentPopupAction.cancel(),qr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=Zc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h4.get())};e()}}qr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4="pendingRedirect",Lu=new Map;class y4 extends fR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Lu.get(this.auth._key());if(!e){try{const r=await _4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Lu.set(this.auth._key(),e)}return this.bypassAuthState||Lu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _4(n,e){const t=mR(e),r=pR(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function qv(n,e){return pR(n)._set(mR(e),"true")}function v4(){Lu.clear()}function Wv(n,e){Lu.set(n._key(),e)}function pR(n){return Tn(n._redirectPersistence)}function mR(n){return uo(g4,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(n,e,t){return I4(n,e,t)}async function I4(n,e,t){if(Ke(n.app))return Promise.reject(Tt(n));const r=Ye(n);Sl(n,e,ai),await r._initializationPromise;const i=Mo(r,t);return await qv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function E4(n,e,t){return T4(n,e,t)}async function T4(n,e,t){const r=ne(n);if(Sl(r.auth,e,ai),Ke(r.auth.app))return Promise.reject(Tt(r.auth));await r.auth._initializationPromise;const i=Mo(r.auth,t);await qv(i,r.auth);const s=await gR(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function S4(n,e,t){return A4(n,e,t)}async function A4(n,e,t){const r=ne(n);Sl(r.auth,e,ai),await r.auth._initializationPromise;const i=Mo(r.auth,t);await dp(!1,r,e.providerId),await qv(i,r.auth);const s=await gR(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function P4(n,e){return await Ye(n)._initializationPromise,yp(n,e,!1)}async function yp(n,e,t=!1){if(Ke(n.app))return Promise.reject(Tt(n));const r=Ye(n),i=Mo(r,e),o=await new y4(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function gR(n){const e=Zc(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=10*60*1e3;class yR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_R(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(gt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x4&&this.cachedEventUids.clear(),this.cachedEventUids.has(iT(e))}saveEventToCache(e){this.cachedEventUids.add(iT(e)),this.lastProcessedEventTime=Date.now()}}function iT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _R({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _R(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(n,e={}){return et(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C4=/^https?/;async function k4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await vR(n);for(const t of e)try{if(D4(t))return}catch{}Dt(n,"unauthorized-domain")}function D4(n){const e=gc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!C4.test(t))return!1;if(R4.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new Kc(3e4,6e4);function sT(){const n=ut().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function O4(n){return new Promise((e,t)=>{var r,i,s;function o(){sT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sT(),t(gt(n,"network-request-failed"))},timeout:N4.get()})}if(!((i=(r=ut().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ut().gapi)===null||s===void 0)&&s.load)o();else{const a=Gb("iframefcb");return ut()[a]=()=>{gapi.load?o():t(gt(n,"network-request-failed"))},Nv(`${PF()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw xh=null,e})}let xh=null;function V4(n){return xh=xh||O4(n),xh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new Kc(5e3,15e3),L4="__/auth/iframe",F4="emulator/auth/iframe",U4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B4(n){const e=n.config;q(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dv(e,F4):`https://${n.config.authDomain}/${L4}`,r={apiKey:e.apiKey,appName:n.name,v:Ss},i=j4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Tl(r).slice(1)}`}async function $4(n){const e=await V4(n),t=ut().gapi;return q(t,n,"internal-error"),e.open({where:document.body,url:B4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=gt(n,"network-request-failed"),a=ut().setTimeout(()=>{s(o)},M4.get());function l(){ut().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q4=500,W4=600,H4="_blank",G4="http://localhost";class oT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K4(n,e,t,r=q4,i=W4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},z4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ze().toLowerCase();t&&(a=Bb(c)?H4:t),Ub(c)&&(e=e||G4,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,S])=>`${p}${g}=${S},`,"");if(gF(c)&&a!=="_self")return Q4(e||"",a),new oT(null);const h=window.open(e||"",a,d);q(h,n,"popup-blocked");try{h.focus()}catch{}return new oT(h)}function Q4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="__/auth/handler",X4="emulator/auth/handler",J4=encodeURIComponent("fac");async function Vy(n,e,t,r,i,s){q(n.config.authDomain,n,"auth-domain-config-required"),q(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ss,eventId:i};if(e instanceof ai){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",TM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Pl){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${J4}=${encodeURIComponent(l)}`:"";return`${Z4(n)}?${Tl(a).slice(1)}${c}`}function Z4({config:n}){return n.emulator?Dv(n,X4):`https://${n.authDomain}/${Y4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="webStorageSupport";class ej{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Io,this._completeRedirectFn=yp,this._overrideRedirectResult=Wv}async _openPopup(e,t,r,i){var s;Zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Vy(e,t,r,gc(),i);return K4(e,o,Zc())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Vy(e,t,r,gc(),i);return MU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Zn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await $4(e),r=new yR(e);return t.register("authEvent",i=>(q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zm,{type:Zm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Zm];o!==void 0&&t(!!o),Dt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=k4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Wb()||jb()||Yc()}}const tj=ej;class nj{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return pr("unexpected MultiFactorSessionType")}}}class Hv extends nj{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Hv(e)}_finalizeEnroll(e,t,r){return RU(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return HU(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class wR{constructor(){}static assertion(e){return Hv._fromCredential(e)}}wR.FACTOR_ID="phone";var aT="@firebase/auth",lT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sj(n){as(new Er("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hb(n)},c=new EF(r,i,s,l);return CF(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),as(new Er("auth-internal",e=>{const t=Ye(e.getProvider("auth").getImmediate());return(r=>new rj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(aT,lT,ij(n)),Xn(aT,lT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=5*60;fM("authIdTokenMaxAge");function aj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}TF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=gt("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",aj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sj("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=2e3;async function uj(n,e,t){var r;const{BuildInfo:i}=To();Zn(e.sessionId,"AuthEvent did not contain a session ID");const s=await pj(e.sessionId),o={};return Yc()?o.ibi=i.packageName:Qc()?o.apn=i.packageName:Dt(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Vy(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function cj(n){const{BuildInfo:e}=To(),t={};Yc()?t.iosBundleId=e.packageName:Qc()?t.androidPackageName=e.packageName:Dt(n,"operation-not-supported-in-this-environment"),await vR(n,t)}function dj(n){const{cordova:e}=To();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,mF()?"_blank":"_system","location=yes"),t(i)})})}async function hj(n,e,t){const{cordova:r}=To();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const p=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof p=="function"&&p(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){a||(a=window.setTimeout(()=>{o(gt(n,"redirect-cancelled-by-user"))},lj))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Qc()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function fj(n){var e,t,r,i,s,o,a,l,c,d;const h=To();q(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof((t=h==null?void 0:h.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function pj(n){const e=mj(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function mj(n){if(Zn(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=20;class yj extends yR{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function _j(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:Ij(),postBody:null,tenantId:n.tenantId,error:gt(n,"no-auth-event")}}function vj(n,e){return My()._set(Ly(n),e)}async function uT(n){const e=await My()._get(Ly(n));return e&&await My()._remove(Ly(n)),e}function wj(n,e){var t,r;const i=Tj(e);if(i.includes("/__/auth/callback")){const s=bh(i),o=s.firebaseError?Ej(decodeURIComponent(s.firebaseError)):null,a=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=a?gt(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function Ij(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<gj;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function My(){return Tn(jv)}function Ly(n){return uo("authEvent",n.config.apiKey,n.name)}function Ej(n){try{return JSON.parse(n)}catch{return null}}function Tj(n){const e=bh(n),t=e.link?decodeURIComponent(e.link):void 0,r=bh(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return bh(i).link||i||r||t||n}function bh(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return _a(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=500;class Aj{constructor(){this._redirectPersistence=Io,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yp,this._overrideRedirectResult=Wv}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new yj(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Dt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){fj(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),v4(),await this._originValidation(e);const o=_j(e,r,i);await vj(e,o);const a=await uj(e,o,t),l=await dj(a);return hj(e,s,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cj(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=To(),o=setTimeout(async()=>{await uT(e),t.onEvent(cT())},Sj),a=async d=>{clearTimeout(o);const h=await uT(e);let p=null;h&&(d!=null&&d.url)&&(p=wj(h,d.url)),t.onEvent(p||cT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;To().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const Pj=Aj;function cT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:gt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(n,e){Ye(n)._logFramework(e)}var bj="@firebase/auth-compat",Rj="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=1e3;function Fu(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function kj(){return Fu()==="http:"||Fu()==="https:"}function IR(n=ze()){return!!((Fu()==="file:"||Fu()==="ionic:"||Fu()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dj(){return Tv()||Ev()}function Nj(){return mb()&&(document==null?void 0:document.documentMode)===11}function Oj(n=ze()){return/Edge\/\d+/.test(n)}function Vj(n=ze()){return Nj()||Oj(n)}function ER(){try{const n=self.localStorage,e=Zc();if(n)return n.setItem(e,"1"),n.removeItem(e),Vj()?hc():!0}catch{return Gv()&&hc()}return!1}function Gv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function eg(){return(kj()||pb()||IR())&&!Dj()&&ER()&&!Gv()}function TR(){return IR()&&typeof document<"u"}async function Mj(){return TR()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},Cj);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function Lj(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In={LOCAL:"local",NONE:"none",SESSION:"session"},iu=q,SR="persistence";function Fj(n,e){if(iu(Object.values(In).includes(e),n,"invalid-persistence-type"),Tv()){iu(e!==In.SESSION,n,"unsupported-persistence-type");return}if(Ev()){iu(e===In.NONE,n,"unsupported-persistence-type");return}if(Gv()){iu(e===In.NONE||e===In.LOCAL&&hc(),n,"unsupported-persistence-type");return}iu(e===In.NONE||ER(),n,"unsupported-persistence-type")}async function Fy(n){await n._initializationPromise;const e=AR(),t=uo(SR,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function Uj(n,e){const t=AR();if(!t)return[];const r=uo(SR,n,e);switch(t.getItem(r)){case In.NONE:return[el];case In.LOCAL:return[wc,Io];case In.SESSION:return[Io];default:return[]}}function AR(){var n;try{return((n=Lj())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=q;class Bi{constructor(){this.browserResolver=Tn(tj),this.cordovaResolver=Tn(Pj),this.underlyingResolver=null,this._redirectPersistence=Io,this._completeRedirectFn=yp,this._overrideRedirectResult=Wv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return TR()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jj(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Mj();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(n){return n.unwrap()}function Bj(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(n){return xR(n)}function zj(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new qj(n,xU(n,e))}else if(r){const i=xR(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function xR(n){const{_tokenResponse:e}=n instanceof Zt?n.customData:n;if(!e)return null;if(!(n instanceof Zt)&&"temporaryProof"in e&&"phoneNumber"in e)return Eo.credentialFromResult(n);const t=e.providerId;if(!t||t===ru.PASSWORD)return null;let r;switch(t){case ru.GOOGLE:r=lr;break;case ru.FACEBOOK:r=ar;break;case ru.GITHUB:r=ur;break;case ru.TWITTER:r=cr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?t.startsWith("saml.")?tl._create(t,a):Tr._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:i,accessToken:s}):new xa(t).credential({idToken:i,accessToken:s,rawNonce:l})}return n instanceof Zt?r.credentialFromError(n):r.credentialFromResult(n)}function ln(n,e){return e.catch(t=>{throw t instanceof Zt&&zj(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:$j(t),additionalUserInfo:PU(t),user:_p.getOrCreate(i)}})}async function Uy(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>ln(n,t.confirm(r))}}class qj{constructor(e,t){this.resolver=t,this.auth=Bj(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ln(PR(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _p=class Iu{constructor(e){this._delegate=e,this.multiFactor=kU(e)}static getOrCreate(e){return Iu.USER_MAP.has(e)||Iu.USER_MAP.set(e,new Iu(e)),Iu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ln(this.auth,tR(this._delegate,e))}async linkWithPhoneNumber(e,t){return Uy(this.auth,o4(this._delegate,e,t))}async linkWithPopup(e){return ln(this.auth,m4(this._delegate,e,Bi))}async linkWithRedirect(e){return await Fy(Ye(this.auth)),S4(this._delegate,e,Bi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ln(this.auth,nR(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Uy(this.auth,a4(this._delegate,e,t))}reauthenticateWithPopup(e){return ln(this.auth,p4(this._delegate,e,Bi))}async reauthenticateWithRedirect(e){return await Fy(Ye(this.auth)),E4(this._delegate,e,Bi)}sendEmailVerification(e){return mU(this._delegate,e)}async unlink(e){return await tU(this._delegate,e),this}updateEmail(e){return vU(this._delegate,e)}updatePassword(e){return wU(this._delegate,e)}updatePhoneNumber(e){return l4(this._delegate,e)}updateProfile(e){return _U(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return gU(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};_p.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=q;let jy=class{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;su(r,"invalid-api-key",{appName:e.name}),su(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Bi:void 0;this._delegate=t.initialize({options:{persistence:Wj(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(KL),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_p.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){kF(this._delegate,e,t)}applyActionCode(e){return oU(this._delegate,e)}checkActionCode(e){return rR(this._delegate,e)}confirmPasswordReset(e,t){return sU(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return ln(this._delegate,lU(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return pU(this._delegate,e)}isSignInWithEmailLink(e){return dU(this._delegate,e)}async getRedirectResult(){su(eg(),this._delegate,"operation-not-supported-in-this-environment");const e=await P4(this._delegate,Bi);return e?ln(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){xj(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:o}=dT(e,t,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:o}=dT(e,t,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,t){return cU(this._delegate,e,t)}sendPasswordResetEmail(e,t){return iU(this._delegate,e,t||void 0)}async setPersistence(e){Fj(this._delegate,e);let t;switch(e){case In.SESSION:t=Io;break;case In.LOCAL:t=await Tn(wc)._isAvailable()?wc:jv;break;case In.NONE:t=el;break;default:return Dt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ln(this._delegate,eU(this._delegate))}signInWithCredential(e){return ln(this._delegate,hp(this._delegate,e))}signInWithCustomToken(e){return ln(this._delegate,rU(this._delegate,e))}signInWithEmailAndPassword(e,t){return ln(this._delegate,uU(this._delegate,e,t))}signInWithEmailLink(e,t){return ln(this._delegate,hU(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Uy(this._delegate,s4(this._delegate,e,t))}async signInWithPopup(e){return su(eg(),this._delegate,"operation-not-supported-in-this-environment"),ln(this._delegate,f4(this._delegate,e,Bi))}async signInWithRedirect(e){return su(eg(),this._delegate,"operation-not-supported-in-this-environment"),await Fy(this._delegate),w4(this._delegate,e,Bi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return aU(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}};jy.Persistence=In;function dT(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&_p.getOrCreate(o)),error:e,complete:t}}function Wj(n,e){const t=Uj(n,e);if(typeof self<"u"&&!t.includes(wc)&&t.push(wc),typeof window<"u")for(const r of[jv,Io])t.includes(r)||t.push(r);return t.includes(el)||t.push(el),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.providerId="phone",this._delegate=new Eo(PR(vr.auth()))}static credential(e,t){return Eo.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Kv.PHONE_SIGN_IN_METHOD=Eo.PHONE_SIGN_IN_METHOD;Kv.PROVIDER_ID=Eo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=q;class Gj{constructor(e,t,r=vr.app()){var i;Hj((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new r4(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="auth-compat";function Qj(n){n.INTERNAL.registerComponent(new Er(Kj,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new jy(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ko.EMAIL_SIGNIN,PASSWORD_RESET:Ko.PASSWORD_RESET,RECOVER_EMAIL:Ko.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ko.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ko.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ko.VERIFY_EMAIL}},EmailAuthProvider:As,FacebookAuthProvider:ar,GithubAuthProvider:ur,GoogleAuthProvider:lr,OAuthProvider:xa,SAMLAuthProvider:_f,PhoneAuthProvider:Kv,PhoneMultiFactorGenerator:wR,RecaptchaVerifier:Gj,TwitterAuthProvider:cr,Auth:jy,AuthCredential:Al,Error:Zt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(bj,Rj)}Qj(vr);var hT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ho,bR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,v){function x(){}x.prototype=v.prototype,A.D=v.prototype,A.prototype=new x,A.prototype.constructor=A,A.C=function(P,D,N){for(var R=Array(arguments.length-2),Cn=2;Cn<arguments.length;Cn++)R[Cn-2]=arguments[Cn];return v.prototype[D].apply(P,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,v,x){x||(x=0);var P=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)P[D]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(D=0;16>D;++D)P[D]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=A.g[0],x=A.g[1],D=A.g[2];var N=A.g[3],R=v+(N^x&(D^N))+P[0]+3614090360&4294967295;v=x+(R<<7&4294967295|R>>>25),R=N+(D^v&(x^D))+P[1]+3905402710&4294967295,N=v+(R<<12&4294967295|R>>>20),R=D+(x^N&(v^x))+P[2]+606105819&4294967295,D=N+(R<<17&4294967295|R>>>15),R=x+(v^D&(N^v))+P[3]+3250441966&4294967295,x=D+(R<<22&4294967295|R>>>10),R=v+(N^x&(D^N))+P[4]+4118548399&4294967295,v=x+(R<<7&4294967295|R>>>25),R=N+(D^v&(x^D))+P[5]+1200080426&4294967295,N=v+(R<<12&4294967295|R>>>20),R=D+(x^N&(v^x))+P[6]+2821735955&4294967295,D=N+(R<<17&4294967295|R>>>15),R=x+(v^D&(N^v))+P[7]+4249261313&4294967295,x=D+(R<<22&4294967295|R>>>10),R=v+(N^x&(D^N))+P[8]+1770035416&4294967295,v=x+(R<<7&4294967295|R>>>25),R=N+(D^v&(x^D))+P[9]+2336552879&4294967295,N=v+(R<<12&4294967295|R>>>20),R=D+(x^N&(v^x))+P[10]+4294925233&4294967295,D=N+(R<<17&4294967295|R>>>15),R=x+(v^D&(N^v))+P[11]+2304563134&4294967295,x=D+(R<<22&4294967295|R>>>10),R=v+(N^x&(D^N))+P[12]+1804603682&4294967295,v=x+(R<<7&4294967295|R>>>25),R=N+(D^v&(x^D))+P[13]+4254626195&4294967295,N=v+(R<<12&4294967295|R>>>20),R=D+(x^N&(v^x))+P[14]+2792965006&4294967295,D=N+(R<<17&4294967295|R>>>15),R=x+(v^D&(N^v))+P[15]+1236535329&4294967295,x=D+(R<<22&4294967295|R>>>10),R=v+(D^N&(x^D))+P[1]+4129170786&4294967295,v=x+(R<<5&4294967295|R>>>27),R=N+(x^D&(v^x))+P[6]+3225465664&4294967295,N=v+(R<<9&4294967295|R>>>23),R=D+(v^x&(N^v))+P[11]+643717713&4294967295,D=N+(R<<14&4294967295|R>>>18),R=x+(N^v&(D^N))+P[0]+3921069994&4294967295,x=D+(R<<20&4294967295|R>>>12),R=v+(D^N&(x^D))+P[5]+3593408605&4294967295,v=x+(R<<5&4294967295|R>>>27),R=N+(x^D&(v^x))+P[10]+38016083&4294967295,N=v+(R<<9&4294967295|R>>>23),R=D+(v^x&(N^v))+P[15]+3634488961&4294967295,D=N+(R<<14&4294967295|R>>>18),R=x+(N^v&(D^N))+P[4]+3889429448&4294967295,x=D+(R<<20&4294967295|R>>>12),R=v+(D^N&(x^D))+P[9]+568446438&4294967295,v=x+(R<<5&4294967295|R>>>27),R=N+(x^D&(v^x))+P[14]+3275163606&4294967295,N=v+(R<<9&4294967295|R>>>23),R=D+(v^x&(N^v))+P[3]+4107603335&4294967295,D=N+(R<<14&4294967295|R>>>18),R=x+(N^v&(D^N))+P[8]+1163531501&4294967295,x=D+(R<<20&4294967295|R>>>12),R=v+(D^N&(x^D))+P[13]+2850285829&4294967295,v=x+(R<<5&4294967295|R>>>27),R=N+(x^D&(v^x))+P[2]+4243563512&4294967295,N=v+(R<<9&4294967295|R>>>23),R=D+(v^x&(N^v))+P[7]+1735328473&4294967295,D=N+(R<<14&4294967295|R>>>18),R=x+(N^v&(D^N))+P[12]+2368359562&4294967295,x=D+(R<<20&4294967295|R>>>12),R=v+(x^D^N)+P[5]+4294588738&4294967295,v=x+(R<<4&4294967295|R>>>28),R=N+(v^x^D)+P[8]+2272392833&4294967295,N=v+(R<<11&4294967295|R>>>21),R=D+(N^v^x)+P[11]+1839030562&4294967295,D=N+(R<<16&4294967295|R>>>16),R=x+(D^N^v)+P[14]+4259657740&4294967295,x=D+(R<<23&4294967295|R>>>9),R=v+(x^D^N)+P[1]+2763975236&4294967295,v=x+(R<<4&4294967295|R>>>28),R=N+(v^x^D)+P[4]+1272893353&4294967295,N=v+(R<<11&4294967295|R>>>21),R=D+(N^v^x)+P[7]+4139469664&4294967295,D=N+(R<<16&4294967295|R>>>16),R=x+(D^N^v)+P[10]+3200236656&4294967295,x=D+(R<<23&4294967295|R>>>9),R=v+(x^D^N)+P[13]+681279174&4294967295,v=x+(R<<4&4294967295|R>>>28),R=N+(v^x^D)+P[0]+3936430074&4294967295,N=v+(R<<11&4294967295|R>>>21),R=D+(N^v^x)+P[3]+3572445317&4294967295,D=N+(R<<16&4294967295|R>>>16),R=x+(D^N^v)+P[6]+76029189&4294967295,x=D+(R<<23&4294967295|R>>>9),R=v+(x^D^N)+P[9]+3654602809&4294967295,v=x+(R<<4&4294967295|R>>>28),R=N+(v^x^D)+P[12]+3873151461&4294967295,N=v+(R<<11&4294967295|R>>>21),R=D+(N^v^x)+P[15]+530742520&4294967295,D=N+(R<<16&4294967295|R>>>16),R=x+(D^N^v)+P[2]+3299628645&4294967295,x=D+(R<<23&4294967295|R>>>9),R=v+(D^(x|~N))+P[0]+4096336452&4294967295,v=x+(R<<6&4294967295|R>>>26),R=N+(x^(v|~D))+P[7]+1126891415&4294967295,N=v+(R<<10&4294967295|R>>>22),R=D+(v^(N|~x))+P[14]+2878612391&4294967295,D=N+(R<<15&4294967295|R>>>17),R=x+(N^(D|~v))+P[5]+4237533241&4294967295,x=D+(R<<21&4294967295|R>>>11),R=v+(D^(x|~N))+P[12]+1700485571&4294967295,v=x+(R<<6&4294967295|R>>>26),R=N+(x^(v|~D))+P[3]+2399980690&4294967295,N=v+(R<<10&4294967295|R>>>22),R=D+(v^(N|~x))+P[10]+4293915773&4294967295,D=N+(R<<15&4294967295|R>>>17),R=x+(N^(D|~v))+P[1]+2240044497&4294967295,x=D+(R<<21&4294967295|R>>>11),R=v+(D^(x|~N))+P[8]+1873313359&4294967295,v=x+(R<<6&4294967295|R>>>26),R=N+(x^(v|~D))+P[15]+4264355552&4294967295,N=v+(R<<10&4294967295|R>>>22),R=D+(v^(N|~x))+P[6]+2734768916&4294967295,D=N+(R<<15&4294967295|R>>>17),R=x+(N^(D|~v))+P[13]+1309151649&4294967295,x=D+(R<<21&4294967295|R>>>11),R=v+(D^(x|~N))+P[4]+4149444226&4294967295,v=x+(R<<6&4294967295|R>>>26),R=N+(x^(v|~D))+P[11]+3174756917&4294967295,N=v+(R<<10&4294967295|R>>>22),R=D+(v^(N|~x))+P[2]+718787259&4294967295,D=N+(R<<15&4294967295|R>>>17),R=x+(N^(D|~v))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+v&4294967295,A.g[1]=A.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+N&4294967295}r.prototype.u=function(A,v){v===void 0&&(v=A.length);for(var x=v-this.blockSize,P=this.B,D=this.h,N=0;N<v;){if(D==0)for(;N<=x;)i(this,A,N),N+=this.blockSize;if(typeof A=="string"){for(;N<v;)if(P[D++]=A.charCodeAt(N++),D==this.blockSize){i(this,P),D=0;break}}else for(;N<v;)if(P[D++]=A[N++],D==this.blockSize){i(this,P),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var v=1;v<A.length-8;++v)A[v]=0;var x=8*this.o;for(v=A.length-8;v<A.length;++v)A[v]=x&255,x/=256;for(this.u(A),A=Array(16),v=x=0;4>v;++v)for(var P=0;32>P;P+=8)A[x++]=this.g[v]>>>P&255;return A};function s(A,v){var x=a;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=v(A)}function o(A,v){this.h=v;for(var x=[],P=!0,D=A.length-1;0<=D;D--){var N=A[D]|0;P&&N==v||(x[D]=N,P=!1)}this.g=x}var a={};function l(A){return-128<=A&&128>A?s(A,function(v){return new o([v|0],0>v?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return b(c(-A));for(var v=[],x=1,P=0;A>=x;P++)v[P]=A/x|0,x*=4294967296;return new o(v,0)}function d(A,v){if(A.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(A.charAt(0)=="-")return b(d(A.substring(1),v));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(v,8)),P=h,D=0;D<A.length;D+=8){var N=Math.min(8,A.length-D),R=parseInt(A.substring(D,D+N),v);8>N?(N=c(Math.pow(v,N)),P=P.j(N).add(c(R))):(P=P.j(x),P=P.add(c(R)))}return P}var h=l(0),p=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(T(this))return-b(this).m();for(var A=0,v=1,x=0;x<this.g.length;x++){var P=this.i(x);A+=(0<=P?P:4294967296+P)*v,v*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(T(this))return"-"+b(this).toString(A);for(var v=c(Math.pow(A,6)),x=this,P="";;){var D=k(x,v).g;x=I(x,D.j(v));var N=((0<x.g.length?x.g[0]:x.h)>>>0).toString(A);if(x=D,S(x))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var v=0;v<A.g.length;v++)if(A.g[v]!=0)return!1;return!0}function T(A){return A.h==-1}n.l=function(A){return A=I(this,A),T(A)?-1:S(A)?0:1};function b(A){for(var v=A.g.length,x=[],P=0;P<v;P++)x[P]=~A.g[P];return new o(x,~A.h).add(p)}n.abs=function(){return T(this)?b(this):this},n.add=function(A){for(var v=Math.max(this.g.length,A.g.length),x=[],P=0,D=0;D<=v;D++){var N=P+(this.i(D)&65535)+(A.i(D)&65535),R=(N>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);P=R>>>16,N&=65535,R&=65535,x[D]=R<<16|N}return new o(x,x[x.length-1]&-2147483648?-1:0)};function I(A,v){return A.add(b(v))}n.j=function(A){if(S(this)||S(A))return h;if(T(this))return T(A)?b(this).j(b(A)):b(b(this).j(A));if(T(A))return b(this.j(b(A)));if(0>this.l(g)&&0>A.l(g))return c(this.m()*A.m());for(var v=this.g.length+A.g.length,x=[],P=0;P<2*v;P++)x[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<A.g.length;D++){var N=this.i(P)>>>16,R=this.i(P)&65535,Cn=A.i(D)>>>16,ks=A.i(D)&65535;x[2*P+2*D]+=R*ks,_(x,2*P+2*D),x[2*P+2*D+1]+=N*ks,_(x,2*P+2*D+1),x[2*P+2*D+1]+=R*Cn,_(x,2*P+2*D+1),x[2*P+2*D+2]+=N*Cn,_(x,2*P+2*D+2)}for(P=0;P<v;P++)x[P]=x[2*P+1]<<16|x[2*P];for(P=v;P<2*v;P++)x[P]=0;return new o(x,0)};function _(A,v){for(;(A[v]&65535)!=A[v];)A[v+1]+=A[v]>>>16,A[v]&=65535,v++}function y(A,v){this.g=A,this.h=v}function k(A,v){if(S(v))throw Error("division by zero");if(S(A))return new y(h,h);if(T(A))return v=k(b(A),v),new y(b(v.g),b(v.h));if(T(v))return v=k(A,b(v)),new y(b(v.g),v.h);if(30<A.g.length){if(T(A)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var x=p,P=v;0>=P.l(A);)x=V(x),P=V(P);var D=j(x,1),N=j(P,1);for(P=j(P,2),x=j(x,2);!S(P);){var R=N.add(P);0>=R.l(A)&&(D=D.add(x),N=R),P=j(P,1),x=j(x,1)}return v=I(A,D.j(v)),new y(D,v)}for(D=h;0<=A.l(v);){for(x=Math.max(1,Math.floor(A.m()/v.m())),P=Math.ceil(Math.log(x)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(x),R=N.j(v);T(R)||0<R.l(A);)x-=P,N=c(x),R=N.j(v);S(N)&&(N=p),D=D.add(N),A=I(A,R)}return new y(D,A)}n.A=function(A){return k(this,A).h},n.and=function(A){for(var v=Math.max(this.g.length,A.g.length),x=[],P=0;P<v;P++)x[P]=this.i(P)&A.i(P);return new o(x,this.h&A.h)},n.or=function(A){for(var v=Math.max(this.g.length,A.g.length),x=[],P=0;P<v;P++)x[P]=this.i(P)|A.i(P);return new o(x,this.h|A.h)},n.xor=function(A){for(var v=Math.max(this.g.length,A.g.length),x=[],P=0;P<v;P++)x[P]=this.i(P)^A.i(P);return new o(x,this.h^A.h)};function V(A){for(var v=A.g.length+1,x=[],P=0;P<v;P++)x[P]=A.i(P)<<1|A.i(P-1)>>>31;return new o(x,A.h)}function j(A,v){var x=v>>5;v%=32;for(var P=A.g.length-x,D=[],N=0;N<P;N++)D[N]=0<v?A.i(N+x)>>>v|A.i(N+x+1)<<32-v:A.i(N+x);return new o(D,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ho=o}).apply(typeof hT<"u"?hT:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RR,Eu,CR,Rh,By,kR,DR,NR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var O=u[w];if(!(O in m))break e;m=m[O]}u=u[u.length-1],w=m[u],f=f(w),f!=w&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,w=!1,O={next:function(){if(!w&&m<u.length){var U=m++;return{value:f(U,u[U]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,m){return u.call.apply(u.bind,arguments)}function h(u,f,m){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,w),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function S(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(w,O,U){for(var W=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)W[Ae-2]=arguments[Ae];return f.prototype[O].apply(w,W)}}function T(u){const f=u.length;if(0<f){const m=Array(f);for(let w=0;w<f;w++)m[w]=u[w];return m}return[]}function b(u,f){for(let m=1;m<arguments.length;m++){const w=arguments[m];if(l(w)){const O=u.length||0,U=w.length||0;u.length=O+U;for(let W=0;W<U;W++)u[O+W]=w[W]}else u.push(w)}}class I{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(u){return/^[\s\xa0]*$/.test(u)}function y(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var V=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function j(u,f,m){for(const w in u)f.call(m,u[w],w,u)}function A(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function v(u){const f={};for(const m in u)f[m]=u[m];return f}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,f){let m,w;for(let O=1;O<arguments.length;O++){w=arguments[O];for(m in w)u[m]=w[m];for(let U=0;U<x.length;U++)m=x[U],Object.prototype.hasOwnProperty.call(w,m)&&(u[m]=w[m])}}function D(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function R(){var u=re;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Cn{constructor(){this.h=this.g=null}add(f,m){const w=ks.get();w.set(f,m),this.h?this.h.next=w:this.g=w,this.h=w}}var ks=new I(()=>new Vl,u=>u.reset());class Vl{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let xr,K=!1,re=new Cn,oe=()=>{const u=a.Promise.resolve(void 0);xr=()=>{u.then(Le)}};var Le=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(m){N(m)}var f=ks;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}K=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var br=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Rr(u,f){if(tt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(V){e:{try{k(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Cr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Rr.aa.h.call(this)}}S(Rr,tt);var Cr={2:"touch",3:"pen",4:"mouse"};Rr.prototype.h=function(){Rr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var kr="closure_listenable_"+(1e6*Math.random()|0),bk=0;function Rk(u,f,m,w,O){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!w,this.ha=O,this.key=++bk,this.da=this.fa=!1}function md(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function gd(u){this.src=u,this.g={},this.h=0}gd.prototype.add=function(u,f,m,w,O){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var W=Kp(u,f,w,O);return-1<W?(f=u[W],m||(f.fa=!1)):(f=new Rk(f,this.src,U,!!w,O),f.fa=m,u.push(f)),f};function Gp(u,f){var m=f.type;if(m in u.g){var w=u.g[m],O=Array.prototype.indexOf.call(w,f,void 0),U;(U=0<=O)&&Array.prototype.splice.call(w,O,1),U&&(md(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Kp(u,f,m,w){for(var O=0;O<u.length;++O){var U=u[O];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==w)return O}return-1}var Qp="closure_lm_"+(1e6*Math.random()|0),Yp={};function l0(u,f,m,w,O){if(Array.isArray(f)){for(var U=0;U<f.length;U++)l0(u,f[U],m,w,O);return null}return m=d0(m),u&&u[kr]?u.K(f,m,c(w)?!!w.capture:!1,O):Ck(u,f,m,!1,w,O)}function Ck(u,f,m,w,O,U){if(!f)throw Error("Invalid event type");var W=c(O)?!!O.capture:!!O,Ae=Jp(u);if(Ae||(u[Qp]=Ae=new gd(u)),m=Ae.add(f,m,w,W,U),m.proxy)return m;if(w=kk(),m.proxy=w,w.src=u,w.listener=m,u.addEventListener)br||(O=W),O===void 0&&(O=!1),u.addEventListener(f.toString(),w,O);else if(u.attachEvent)u.attachEvent(c0(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function kk(){function u(m){return f.call(u.src,u.listener,m)}const f=Dk;return u}function u0(u,f,m,w,O){if(Array.isArray(f))for(var U=0;U<f.length;U++)u0(u,f[U],m,w,O);else w=c(w)?!!w.capture:!!w,m=d0(m),u&&u[kr]?(u=u.i,f=String(f).toString(),f in u.g&&(U=u.g[f],m=Kp(U,m,w,O),-1<m&&(md(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete u.g[f],u.h--)))):u&&(u=Jp(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Kp(f,m,w,O)),(m=-1<u?f[u]:null)&&Xp(m))}function Xp(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[kr])Gp(f.i,u);else{var m=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(m,w,u.capture):f.detachEvent?f.detachEvent(c0(m),w):f.addListener&&f.removeListener&&f.removeListener(w),(m=Jp(f))?(Gp(m,u),m.h==0&&(m.src=null,f[Qp]=null)):md(u)}}}function c0(u){return u in Yp?Yp[u]:Yp[u]="on"+u}function Dk(u,f){if(u.da)u=!0;else{f=new Rr(f,this);var m=u.listener,w=u.ha||u.src;u.fa&&Xp(u),u=m.call(w,f)}return u}function Jp(u){return u=u[Qp],u instanceof gd?u:null}var Zp="__closure_events_fn_"+(1e9*Math.random()>>>0);function d0(u){return typeof u=="function"?u:(u[Zp]||(u[Zp]=function(f){return u.handleEvent(f)}),u[Zp])}function Nt(){Se.call(this),this.i=new gd(this),this.M=this,this.F=null}S(Nt,Se),Nt.prototype[kr]=!0,Nt.prototype.removeEventListener=function(u,f,m,w){u0(this,u,f,m,w)};function zt(u,f){var m,w=u.F;if(w)for(m=[];w;w=w.F)m.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new tt(f,u);else if(f instanceof tt)f.target=f.target||u;else{var O=f;f=new tt(w,u),P(f,O)}if(O=!0,m)for(var U=m.length-1;0<=U;U--){var W=f.g=m[U];O=yd(W,w,!0,f)&&O}if(W=f.g=u,O=yd(W,w,!0,f)&&O,O=yd(W,w,!1,f)&&O,m)for(U=0;U<m.length;U++)W=f.g=m[U],O=yd(W,w,!1,f)&&O}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],w=0;w<m.length;w++)md(m[w]);delete u.g[f],u.h--}}this.F=null},Nt.prototype.K=function(u,f,m,w){return this.i.add(String(u),f,!1,m,w)},Nt.prototype.L=function(u,f,m,w){return this.i.add(String(u),f,!0,m,w)};function yd(u,f,m,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,U=0;U<f.length;++U){var W=f[U];if(W&&!W.da&&W.capture==m){var Ae=W.listener,St=W.ha||W.src;W.fa&&Gp(u.i,W),O=Ae.call(St,w)!==!1&&O}}return O&&!w.defaultPrevented}function h0(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function f0(u){u.g=h0(()=>{u.g=null,u.i&&(u.i=!1,f0(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Nk extends Se{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:f0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ml(u){Se.call(this),this.h=u,this.g={}}S(Ml,Se);var p0=[];function m0(u){j(u.g,function(f,m){this.g.hasOwnProperty(m)&&Xp(f)},u),u.g={}}Ml.prototype.N=function(){Ml.aa.N.call(this),m0(this)},Ml.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var em=a.JSON.stringify,Ok=a.JSON.parse,Vk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function tm(){}tm.prototype.h=null;function g0(u){return u.h||(u.h=u.i())}function y0(){}var Ll={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nm(){tt.call(this,"d")}S(nm,tt);function rm(){tt.call(this,"c")}S(rm,tt);var Ds={},_0=null;function _d(){return _0=_0||new Nt}Ds.La="serverreachability";function v0(u){tt.call(this,Ds.La,u)}S(v0,tt);function Fl(u){const f=_d();zt(f,new v0(f))}Ds.STAT_EVENT="statevent";function w0(u,f){tt.call(this,Ds.STAT_EVENT,u),this.stat=f}S(w0,tt);function qt(u){const f=_d();zt(f,new w0(f,u))}Ds.Ma="timingevent";function I0(u,f){tt.call(this,Ds.Ma,u),this.size=f}S(I0,tt);function Ul(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function jl(){this.g=!0}jl.prototype.xa=function(){this.g=!1};function Mk(u,f,m,w,O,U){u.info(function(){if(u.g)if(U)for(var W="",Ae=U.split("&"),St=0;St<Ae.length;St++){var ge=Ae[St].split("=");if(1<ge.length){var Ot=ge[0];ge=ge[1];var Vt=Ot.split("_");W=2<=Vt.length&&Vt[1]=="type"?W+(Ot+"="+ge+"&"):W+(Ot+"=redacted&")}}else W=null;else W=U;return"XMLHTTP REQ ("+w+") [attempt "+O+"]: "+f+`
`+m+`
`+W})}function Lk(u,f,m,w,O,U,W){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+O+"]: "+f+`
`+m+`
`+U+" "+W})}function zo(u,f,m,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Uk(u,m)+(w?" "+w:"")})}function Fk(u,f){u.info(function(){return"TIMEOUT: "+f})}jl.prototype.info=function(){};function Uk(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var w=m[u];if(!(2>w.length)){var O=w[1];if(Array.isArray(O)&&!(1>O.length)){var U=O[0];if(U!="noop"&&U!="stop"&&U!="close")for(var W=1;W<O.length;W++)O[W]=""}}}}return em(m)}catch{return f}}var vd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},E0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},im;function wd(){}S(wd,tm),wd.prototype.g=function(){return new XMLHttpRequest},wd.prototype.i=function(){return{}},im=new wd;function di(u,f,m,w){this.j=u,this.i=f,this.l=m,this.R=w||1,this.U=new Ml(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new T0}function T0(){this.i=null,this.g="",this.h=!1}var S0={},sm={};function om(u,f,m){u.L=1,u.v=Sd(Dr(f)),u.m=m,u.P=!0,A0(u,null)}function A0(u,f){u.F=Date.now(),Id(u),u.A=Dr(u.v);var m=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),U0(m.i,"t",w),u.C=0,m=u.j.J,u.h=new T0,u.g=rI(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Nk(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,w=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(p0[0]=O.toString()),O=p0);for(var U=0;U<O.length;U++){var W=l0(m,O[U],w||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Fl(),Mk(u.i,u.u,u.A,u.l,u.R,u.m)}di.prototype.ca=function(u){u=u.target;const f=this.M;f&&Nr(u)==3?f.j():this.Y(u)},di.prototype.Y=function(u){try{if(u==this.g)e:{const Vt=Nr(this.g);var f=this.g.Ba();const Ho=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||H0(this.g)))){this.J||Vt!=4||f==7||(f==8||0>=Ho?Fl(3):Fl(2)),am(this);var m=this.g.Z();this.X=m;t:if(P0(this)){var w=H0(this.g);u="";var O=w.length,U=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ns(this),Bl(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!(U&&f==O-1)});w.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,Lk(this.i,this.u,this.A,this.l,this.R,Vt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,St=this.g;if((Ae=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ae)){var ge=Ae;break t}}ge=null}if(m=ge)zo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lm(this,m);else{this.o=!1,this.s=3,qt(12),Ns(this),Bl(this);break e}}if(this.P){m=!0;let $n;for(;!this.J&&this.C<W.length;)if($n=jk(this,W),$n==sm){Vt==4&&(this.s=4,qt(14),m=!1),zo(this.i,this.l,null,"[Incomplete Response]");break}else if($n==S0){this.s=4,qt(15),zo(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else zo(this.i,this.l,$n,null),lm(this,$n);if(P0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||W.length!=0||this.h.h||(this.s=1,qt(16),m=!1),this.o=this.o&&m,!m)zo(this.i,this.l,W,"[Invalid Chunked Response]"),Ns(this),Bl(this);else if(0<W.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),pm(Ot),Ot.M=!0,qt(11))}}else zo(this.i,this.l,W,null),lm(this,W);Vt==4&&Ns(this),this.o&&!this.J&&(Vt==4?Z0(this.j,this):(this.o=!1,Id(this)))}else rD(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),Ns(this),Bl(this)}}}catch{}finally{}};function P0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function jk(u,f){var m=u.C,w=f.indexOf(`
`,m);return w==-1?sm:(m=Number(f.substring(m,w)),isNaN(m)?S0:(w+=1,w+m>f.length?sm:(f=f.slice(w,w+m),u.C=w+m,f)))}di.prototype.cancel=function(){this.J=!0,Ns(this)};function Id(u){u.S=Date.now()+u.I,x0(u,u.I)}function x0(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ul(p(u.ba,u),f)}function am(u){u.B&&(a.clearTimeout(u.B),u.B=null)}di.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Fk(this.i,this.A),this.L!=2&&(Fl(),qt(17)),Ns(this),this.s=2,Bl(this)):x0(this,this.S-u)};function Bl(u){u.j.G==0||u.J||Z0(u.j,u)}function Ns(u){am(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,m0(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function lm(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||um(m.h,u))){if(!u.K&&um(m.h,u)&&m.G==3){try{var w=m.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var O=w;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Cd(m),bd(m);else break e;fm(m),qt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ul(p(m.Za,m),6e3));if(1>=C0(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Vs(m,11)}else if((u.K||m.g==u)&&Cd(m),!_(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let ge=O[f];if(m.T=ge[0],ge=ge[1],m.G==2)if(ge[0]=="c"){m.K=ge[1],m.ia=ge[2];const Ot=ge[3];Ot!=null&&(m.la=Ot,m.j.info("VER="+m.la));const Vt=ge[4];Vt!=null&&(m.Aa=Vt,m.j.info("SVER="+m.Aa));const Ho=ge[5];Ho!=null&&typeof Ho=="number"&&0<Ho&&(w=1.5*Ho,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const $n=u.g;if($n){const Dd=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dd){var U=w.h;U.g||Dd.indexOf("spdy")==-1&&Dd.indexOf("quic")==-1&&Dd.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(cm(U,U.h),U.h=null))}if(w.D){const mm=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;mm&&(w.ya=mm,be(w.I,w.D,mm))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var W=u;if(w.qa=nI(w,w.J?w.ia:null,w.W),W.K){k0(w.h,W);var Ae=W,St=w.L;St&&(Ae.I=St),Ae.B&&(am(Ae),Id(Ae)),w.g=W}else X0(w);0<m.i.length&&Rd(m)}else ge[0]!="stop"&&ge[0]!="close"||Vs(m,7);else m.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Vs(m,7):hm(m):ge[0]!="noop"&&m.l&&m.l.ta(ge),m.v=0)}}Fl(4)}catch{}}var Bk=class{constructor(u,f){this.g=u,this.map=f}};function b0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function R0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function C0(u){return u.h?1:u.g?u.g.size:0}function um(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function cm(u,f){u.g?u.g.add(f):u.h=f}function k0(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}b0.prototype.cancel=function(){if(this.i=D0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function D0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return T(u.i)}function $k(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,w=0;w<m;w++)f.push(u[w]);return f}f=[],m=0;for(w in u)f[m++]=u[w];return f}function zk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const w in u)f[m++]=w;return f}}}function N0(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=zk(u),w=$k(u),O=w.length,U=0;U<O;U++)f.call(void 0,w[U],m&&m[U],u)}var O0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qk(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var w=u[m].indexOf("="),O=null;if(0<=w){var U=u[m].substring(0,w);O=u[m].substring(w+1)}else U=u[m];f(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Os(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Os){this.h=u.h,Ed(this,u.j),this.o=u.o,this.g=u.g,Td(this,u.s),this.l=u.l;var f=u.i,m=new ql;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),V0(this,m),this.m=u.m}else u&&(f=String(u).match(O0))?(this.h=!1,Ed(this,f[1]||"",!0),this.o=$l(f[2]||""),this.g=$l(f[3]||"",!0),Td(this,f[4]),this.l=$l(f[5]||"",!0),V0(this,f[6]||"",!0),this.m=$l(f[7]||"")):(this.h=!1,this.i=new ql(null,this.h))}Os.prototype.toString=function(){var u=[],f=this.j;f&&u.push(zl(f,M0,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(zl(f,M0,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(zl(m,m.charAt(0)=="/"?Gk:Hk,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",zl(m,Qk)),u.join("")};function Dr(u){return new Os(u)}function Ed(u,f,m){u.j=m?$l(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Td(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function V0(u,f,m){f instanceof ql?(u.i=f,Yk(u.i,u.h)):(m||(f=zl(f,Kk)),u.i=new ql(f,u.h))}function be(u,f,m){u.i.set(f,m)}function Sd(u){return be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function $l(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function zl(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Wk),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var M0=/[#\/\?@]/g,Hk=/[#\?:]/g,Gk=/[#\?]/g,Kk=/[#\?@]/g,Qk=/#/g;function ql(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function hi(u){u.g||(u.g=new Map,u.h=0,u.i&&qk(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=ql.prototype,n.add=function(u,f){hi(this),this.i=null,u=qo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function L0(u,f){hi(u),f=qo(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function F0(u,f){return hi(u),f=qo(u,f),u.g.has(f)}n.forEach=function(u,f){hi(this),this.g.forEach(function(m,w){m.forEach(function(O){u.call(f,O,w,this)},this)},this)},n.na=function(){hi(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let w=0;w<f.length;w++){const O=u[w];for(let U=0;U<O.length;U++)m.push(f[w])}return m},n.V=function(u){hi(this);let f=[];if(typeof u=="string")F0(this,u)&&(f=f.concat(this.g.get(qo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return hi(this),this.i=null,u=qo(this,u),F0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function U0(u,f,m){L0(u,f),0<m.length&&(u.i=null,u.g.set(qo(u,f),T(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var w=f[m];const U=encodeURIComponent(String(w)),W=this.V(w);for(w=0;w<W.length;w++){var O=U;W[w]!==""&&(O+="="+encodeURIComponent(String(W[w]))),u.push(O)}}return this.i=u.join("&")};function qo(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Yk(u,f){f&&!u.j&&(hi(u),u.i=null,u.g.forEach(function(m,w){var O=w.toLowerCase();w!=O&&(L0(this,w),U0(this,O,m))},u)),u.j=f}function Xk(u,f){const m=new jl;if(a.Image){const w=new Image;w.onload=g(fi,m,"TestLoadImage: loaded",!0,f,w),w.onerror=g(fi,m,"TestLoadImage: error",!1,f,w),w.onabort=g(fi,m,"TestLoadImage: abort",!1,f,w),w.ontimeout=g(fi,m,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function Jk(u,f){const m=new jl,w=new AbortController,O=setTimeout(()=>{w.abort(),fi(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then(U=>{clearTimeout(O),U.ok?fi(m,"TestPingServer: ok",!0,f):fi(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),fi(m,"TestPingServer: error",!1,f)})}function fi(u,f,m,w,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),w(m)}catch{}}function Zk(){this.g=new Vk}function eD(u,f,m){const w=m||"";try{N0(u,function(O,U){let W=O;c(O)&&(W=em(O)),f.push(w+U+"="+encodeURIComponent(W))})}catch(O){throw f.push(w+"type="+encodeURIComponent("_badmap")),O}}function Ad(u){this.l=u.Ub||null,this.j=u.eb||!1}S(Ad,tm),Ad.prototype.g=function(){return new Pd(this.l,this.j)},Ad.prototype.i=function(u){return function(){return u}}({});function Pd(u,f){Nt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Pd,Nt),n=Pd.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Hl(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wl(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hl(this)),this.g&&(this.readyState=3,Hl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;j0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function j0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Wl(this):Hl(this),this.readyState==3&&j0(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Wl(this))},n.Qa=function(u){this.g&&(this.response=u,Wl(this))},n.ga=function(){this.g&&Wl(this)};function Wl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Hl(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Hl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function B0(u){let f="";return j(u,function(m,w){f+=w,f+=":",f+=m,f+=`\r
`}),f}function dm(u,f,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=B0(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):be(u,f,m))}function qe(u){Nt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(qe,Nt);var tD=/^https?$/i,nD=["POST","PUT"];n=qe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():im.g(),this.v=this.o?g0(this.o):g0(im),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(U){$0(this,U);return}if(u=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var O in w)m.set(O,w[O]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const U of w.keys())m.set(U,w.get(U));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nD,f,void 0))||w||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,W]of m)this.g.setRequestHeader(U,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{W0(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){$0(this,U)}};function $0(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,z0(u),xd(u)}function z0(u){u.A||(u.A=!0,zt(u,"complete"),zt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,zt(this,"complete"),zt(this,"abort"),xd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xd(this,!0)),qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?q0(this):this.bb())},n.bb=function(){q0(this)};function q0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Nr(u)!=4||u.Z()!=2)){if(u.u&&Nr(u)==4)h0(u.Ea,0,u);else if(zt(u,"readystatechange"),Nr(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var w;if(w=W===0){var O=String(u.D).match(O0)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),w=!tD.test(O?O.toLowerCase():"")}m=w}if(m)zt(u,"complete"),zt(u,"success");else{u.m=6;try{var U=2<Nr(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",z0(u)}}finally{xd(u)}}}}function xd(u,f){if(u.g){W0(u);const m=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||zt(u,"ready");try{m.onreadystatechange=w}catch{}}}function W0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Nr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Ok(f)}};function H0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function rD(u){const f={};u=(u.g&&2<=Nr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(_(u[w]))continue;var m=D(u[w]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=f[O]||[];f[O]=U,U.push(m)}A(f,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gl(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function G0(u){this.Aa=0,this.i=[],this.j=new jl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gl("baseRetryDelayMs",5e3,u),this.cb=Gl("retryDelaySeedMs",1e4,u),this.Wa=Gl("forwardChannelMaxRetries",2,u),this.wa=Gl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new b0(u&&u.concurrentRequestLimit),this.Da=new Zk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=G0.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,w){qt(0),this.W=u,this.H=f||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=nI(this,null,this.W),Rd(this)};function hm(u){if(K0(u),u.G==3){var f=u.U++,m=Dr(u.I);if(be(m,"SID",u.K),be(m,"RID",f),be(m,"TYPE","terminate"),Kl(u,m),f=new di(u,u.j,f),f.L=2,f.v=Sd(Dr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=rI(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Id(f)}tI(u)}function bd(u){u.g&&(pm(u),u.g.cancel(),u.g=null)}function K0(u){bd(u),u.u&&(a.clearTimeout(u.u),u.u=null),Cd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Rd(u){if(!R0(u.h)&&!u.s){u.s=!0;var f=u.Ga;xr||oe(),K||(xr(),K=!0),re.add(f,u),u.B=0}}function iD(u,f){return C0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ul(p(u.Ga,u,f),eI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new di(this,this.j,u);let U=this.o;if(this.S&&(U?(U=v(U),P(U,this.S)):U=this.S),this.m!==null||this.O||(O.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Y0(this,O,f),m=Dr(this.I),be(m,"RID",u),be(m,"CVER",22),this.D&&be(m,"X-HTTP-Session-Id",this.D),Kl(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(B0(U)))+"&"+f:this.m&&dm(m,this.m,U)),cm(this.h,O),this.Ua&&be(m,"TYPE","init"),this.P?(be(m,"$req",f),be(m,"SID","null"),O.T=!0,om(O,m,null)):om(O,m,f),this.G=2}}else this.G==3&&(u?Q0(this,u):this.i.length==0||R0(this.h)||Q0(this))};function Q0(u,f){var m;f?m=f.l:m=u.U++;const w=Dr(u.I);be(w,"SID",u.K),be(w,"RID",m),be(w,"AID",u.T),Kl(u,w),u.m&&u.o&&dm(w,u.m,u.o),m=new di(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Y0(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),cm(u.h,m),om(m,w,f)}function Kl(u,f){u.H&&j(u.H,function(m,w){be(f,w,m)}),u.l&&N0({},function(m,w){be(f,w,m)})}function Y0(u,f,m){m=Math.min(u.i.length,m);var w=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let U=-1;for(;;){const W=["count="+m];U==-1?0<m?(U=O[0].g,W.push("ofs="+U)):U=0:W.push("ofs="+U);let Ae=!0;for(let St=0;St<m;St++){let ge=O[St].g;const Ot=O[St].map;if(ge-=U,0>ge)U=Math.max(0,O[St].g-100),Ae=!1;else try{eD(Ot,W,"req"+ge+"_")}catch{w&&w(Ot)}}if(Ae){w=W.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,w}function X0(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;xr||oe(),K||(xr(),K=!0),re.add(f,u),u.v=0}}function fm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ul(p(u.Fa,u),eI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,J0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ul(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),bd(this),J0(this))};function pm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function J0(u){u.g=new di(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Dr(u.qa);be(f,"RID","rpc"),be(f,"SID",u.K),be(f,"AID",u.T),be(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&be(f,"TO",u.ja),be(f,"TYPE","xmlhttp"),Kl(u,f),u.m&&u.o&&dm(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Sd(Dr(f)),m.m=null,m.P=!0,A0(m,u)}n.Za=function(){this.C!=null&&(this.C=null,bd(this),fm(this),qt(19))};function Cd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Z0(u,f){var m=null;if(u.g==f){Cd(u),pm(u),u.g=null;var w=2}else if(um(u.h,f))m=f.D,k0(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;w=_d(),zt(w,new I0(w,m)),Rd(u)}else X0(u);else if(O=f.s,O==3||O==0&&0<f.X||!(w==1&&iD(u,f)||w==2&&fm(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),O){case 1:Vs(u,5);break;case 4:Vs(u,10);break;case 3:Vs(u,6);break;default:Vs(u,2)}}}function eI(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Vs(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),w=u.Xa;const O=!w;w=new Os(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ed(w,"https"),Sd(w),O?Xk(w.toString(),m):Jk(w.toString(),m)}else qt(2);u.G=0,u.l&&u.l.sa(f),tI(u),K0(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function tI(u){if(u.G=0,u.ka=[],u.l){const f=D0(u.h);(f.length!=0||u.i.length!=0)&&(b(u.ka,f),b(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function nI(u,f,m){var w=m instanceof Os?Dr(m):new Os(m);if(w.g!="")f&&(w.g=f+"."+w.g),Td(w,w.s);else{var O=a.location;w=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var U=new Os(null);w&&Ed(U,w),f&&(U.g=f),O&&Td(U,O),m&&(U.l=m),w=U}return m=u.D,f=u.ya,m&&f&&be(w,m,f),be(w,"VER",u.la),Kl(u,w),w}function rI(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new qe(new Ad({eb:m})):new qe(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function iI(){}n=iI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function kd(){}kd.prototype.g=function(u,f){return new vn(u,f)};function vn(u,f){Nt.call(this),this.g=new G0(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!_(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Wo(this)}S(vn,Nt),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){hm(this.g)},vn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=em(u),u=m);f.i.push(new Bk(f.Ya++,u)),f.G==3&&Rd(f)},vn.prototype.N=function(){this.g.l=null,delete this.j,hm(this.g),delete this.g,vn.aa.N.call(this)};function sI(u){nm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}S(sI,nm);function oI(){rm.call(this),this.status=1}S(oI,rm);function Wo(u){this.g=u}S(Wo,iI),Wo.prototype.ua=function(){zt(this.g,"a")},Wo.prototype.ta=function(u){zt(this.g,new sI(u))},Wo.prototype.sa=function(u){zt(this.g,new oI)},Wo.prototype.ra=function(){zt(this.g,"b")},kd.prototype.createWebChannel=kd.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,NR=function(){return new kd},DR=function(){return _d()},kR=Ds,By={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vd.NO_ERROR=0,vd.TIMEOUT=8,vd.HTTP_ERROR=6,Rh=vd,E0.COMPLETE="complete",CR=E0,y0.EventType=Ll,Ll.OPEN="a",Ll.CLOSE="b",Ll.ERROR="c",Ll.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Eu=y0,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,RR=qe}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const fT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new ap("@firebase/firestore");function ea(){return ls.logLevel}function Yj(n){ls.setLogLevel(n)}function $(n,...e){if(ls.logLevel<=ue.DEBUG){const t=e.map(Qv);ls.debug(`Firestore (${xl}): ${n}`,...t)}}function rt(n,...e){if(ls.logLevel<=ue.ERROR){const t=e.map(Qv);ls.error(`Firestore (${xl}): ${n}`,...t)}}function Sr(n,...e){if(ls.logLevel<=ue.WARN){const t=e.map(Qv);ls.warn(`Firestore (${xl}): ${n}`,...t)}}function Qv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(n="Unexpected state"){const e=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: `+n;throw rt(e),new Error(e)}function Z(n,e){n||X()}function Xj(n,e){n||X()}function G(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Zt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(It.UNAUTHENTICATED))}shutdown(){}}class Zj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class e3{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Ct;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ct,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ct)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new OR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new It(e)}}class t3{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class n3{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new t3(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Z(this.o===void 0);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new r3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=s3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ie(n,e){return n<e?-1:n>e?1:0}function nl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function MR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Me(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Me(0,0))}static max(){return new ee(new Me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(),r===void 0?r=e.length-t:r>e.length-t&&X(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ic.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ic?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class de extends Ic{construct(e,t,r){return new de(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new de(t)}static emptyPath(){return new de([])}}const o3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oe extends Ic{construct(e,t,r){return new Oe(e,t,r)}static isValidIdentifier(e){return o3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Oe(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Oe(t)}static emptyPath(){return new Oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(de.fromString(e))}static fromName(e){return new H(de.fromString(e).popFirst(5))}static empty(){return new H(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return de.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new de(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function $y(n){return n.fields.find(e=>e.kind===2)}function js(n){return n.fields.filter(e=>e.kind!==2)}Ef.UNKNOWN_ID=-1;class Ch{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ec{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ec(0,Pn.min())}}function LR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Me(t+1,0):new Me(t,r));return new Pn(i,H.empty(),e)}function FR(n){return new Pn(n.readTime,n.key,-1)}class Pn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pn(ee.min(),H.empty(),-1)}static max(){return new Pn(ee.max(),H.empty(),-1)}}function Yv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(n){if(n.code!==F.FAILED_PRECONDITION||n.message!==UR)throw n;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof M?t:M.resolve(t)}catch(t){return M.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):M.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):M.reject(t)}static resolve(e){return new M((t,r)=>{t(e)})}static reject(e){return new M((t,r)=>{r(e)})}static waitFor(e){return new M((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=M.resolve(!1);for(const r of e)t=t.next(i=>i?M.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new M((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ct,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Uu(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Xv(r.target.error);this.V.reject(new Uu(e,i))}}static open(e,t,r,i){try{return new vp(t,e.transaction(i,r))}catch(s){throw new Uu(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new l3(t)}}class wr{constructor(e,t,r){this.name=e,this.version=t,this.p=r,wr.S(ze())===12.2&&rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),$s(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hc())return!1;if(wr.v())return!0;const e=ze(),t=wr.S(e),r=0<t&&t<10,i=BR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||($("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new Uu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new B(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new B(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Uu(e,o))},i.onupgradeneeded=s=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=vp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if($("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class a3{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $s(this.B.delete())}}class Uu extends B{constructor(e,t){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xs(n){return n.name==="IndexedDbTransactionError"}class l3{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?($("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$s(r)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),$s(this.store.add(e))}get(e){return $s(this.store.get(e)).next(t=>(t===void 0&&(t=null),$("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),$s(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),$s(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){$("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new M((r,i)=>{t.onerror=s=>{const o=Xv(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new a3(a),c=t(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $s(n){return new M((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Xv(r.target.error);t(i)}})}let pT=!1;function Xv(n){const e=wr.S(ze());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pT||(pT=!0,setTimeout(()=>{throw r},0)),r}}return n}class u3{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){$("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{$("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){xs(t)?$("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Ps(t)}await this.X(6e4)})}}class c3{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>($("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=FR(s);Yv(o,r)>0&&(r=o)}),new Pn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fn.oe=-1;function td(n){return n==null}function Tc(n){return n===0&&1/n==-1/0}function $R(n){return typeof n=="number"&&Number.isInteger(n)&&!Tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mT(e)),e=d3(n.get(t),e);return mT(e)}function d3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function mT(n){return n+""}function mr(n){const e=n.length;if(Z(e>=2),e===2)return Z(n.charAt(0)===""&&n.charAt(1)===""),de.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&X(),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:X()}s=o+2}return new de(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(n,e){return[n,en(e)]}function zR(n,e,t){return[n,en(e),t]}const h3={},f3=["prefixPath","collectionGroup","readTime","documentId"],p3=["prefixPath","collectionGroup","documentId"],m3=["collectionGroup","readTime","prefixPath","documentId"],g3=["canonicalId","targetId"],y3=["targetId","path"],_3=["path","targetId"],v3=["collectionId","parent"],w3=["indexId","uid"],I3=["uid","sequenceNumber"],E3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],T3=["indexId","uid","orderedDocumentKey"],S3=["userId","collectionPath","documentId"],A3=["userId","collectionPath","largestBatchId"],P3=["userId","collectionGroup","largestBatchId"],qR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],x3=[...qR,"documentOverlays"],WR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HR=WR,Jv=[...HR,"indexConfiguration","indexState","indexEntries"],b3=Jv,R3=[...Jv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends jR{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function yt(n,e){const t=G(n);return wr.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new xe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}}class th{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??xt.RED,this.left=i??xt.EMPTY,this.right=s??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new xt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,t,r,i,s){return this}insert(e,t,r){return new xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _T(this.data.getIterator())}getIteratorFrom(e){return new _T(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Te)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Te(this.comparator);return t.data=e,t}}class _T{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qo(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(Oe.comparator)}static empty(){return new pn([])}unionWith(e){let t=new Te(Oe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KR("Invalid base64 string: "+s):s}}(e);return new Xe(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const k3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(n){if(Z(!!n),typeof n=="string"){let e=0;const t=k3.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(n.seconds),nanos:De(n.nanos)}}function De(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function us(n){return typeof n=="string"?Xe.fromBase64String(n):Xe.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Zv(n){const e=n.mapValue.fields.__previous_value__;return wp(e)?Zv(e):e}function Sc(n){const e=ri(n.mapValue.fields.__local_write_time__.timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class cs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new cs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dh={nullValue:"NULL_VALUE"};function So(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wp(n)?4:QR(n)?9007199254740991:Ip(n)?10:11:X()}function Ar(n,e){if(n===e)return!0;const t=So(n);if(t!==So(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sc(n).isEqual(Sc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ri(i.timestampValue),a=ri(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return us(i.bytesValue).isEqual(us(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=De(i.doubleValue),a=De(s.doubleValue);return o===a?Tc(o)===Tc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return nl(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(yT(o)!==yT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ar(o[l],a[l])))return!1;return!0}(n,e);default:return X()}}function Ac(n,e){return(n.values||[]).find(t=>Ar(t,e))!==void 0}function ds(n,e){if(n===e)return 0;const t=So(n),r=So(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=De(s.integerValue||s.doubleValue),l=De(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return vT(n.timestampValue,e.timestampValue);case 4:return vT(Sc(n),Sc(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(s,o){const a=us(s),l=us(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ie(a[c],l[c]);if(d!==0)return d}return ie(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ie(De(s.latitude),De(o.latitude));return a!==0?a:ie(De(s.longitude),De(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return wT(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},p=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,S=(l=p.value)===null||l===void 0?void 0:l.arrayValue,T=ie(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:wT(g,S)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===$i.mapValue&&o===$i.mapValue)return 0;if(s===$i.mapValue)return 1;if(o===$i.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=ie(l[h],d[h]);if(p!==0)return p;const g=ds(a[l[h]],c[d[h]]);if(g!==0)return g}return ie(l.length,d.length)}(n.mapValue,e.mapValue);default:throw X()}}function vT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);const t=ri(n),r=ri(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function wT(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ds(t[i],r[i]);if(s)return s}return ie(t.length,r.length)}function rl(n){return qy(n)}function qy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ri(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return us(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return H.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=qy(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${qy(t.fields[o])}`;return i+"}"}(n.mapValue):X()}function Ao(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wy(n){return!!n&&"integerValue"in n}function Pc(n){return!!n&&"arrayValue"in n}function IT(n){return!!n&&"nullValue"in n}function ET(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nh(n){return!!n&&"mapValue"in n}function Ip(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ju(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Lo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ju(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ju(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const YR={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function N3(n){return"nullValue"in n?Dh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ao(cs.empty(),H.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ip(n)?YR:{mapValue:{}}:X()}function O3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ao(cs.empty(),H.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?YR:"mapValue"in n?Ip(n)?{mapValue:{}}:$i:X()}function TT(n,e){const t=ds(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ST(n,e){const t=ds(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ju(t)}setAll(e){let t=Oe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=ju(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Nh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Lo(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bt(ju(this.value))}}function XR(n){const e=[];return Lo(n.fields,(t,r)=>{const i=new Oe([t]);if(Nh(r)){const s=XR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ce(e,0,ee.min(),ee.min(),ee.min(),bt.empty(),0)}static newFoundDocument(e,t,r,i){return new Ce(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new Ce(e,2,t,ee.min(),ee.min(),bt.empty(),0)}static newUnknownDocument(e,t){return new Ce(e,3,t,ee.min(),ee.min(),bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ce&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ce(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t){this.position=e,this.inclusive=t}}function AT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),t.key):r=ds(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function PT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t="asc"){this.field=e,this.dir=t}}function V3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{}class he extends JR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new M3(e,t,r):t==="array-contains"?new U3(e,r):t==="in"?new i1(e,r):t==="not-in"?new j3(e,r):t==="array-contains-any"?new B3(e,r):new he(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new L3(e,r):new F3(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ds(t,this.value)):t!==null&&So(this.value)===So(t)&&this.matchesComparison(ds(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ie extends JR{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ie(e,t)}matches(e){return il(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function il(n){return n.op==="and"}function Hy(n){return n.op==="or"}function ew(n){return ZR(n)&&il(n)}function ZR(n){for(const e of n.filters)if(e instanceof Ie)return!1;return!0}function Gy(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+rl(n.value);if(ew(n))return n.filters.map(e=>Gy(e)).join(",");{const e=n.filters.map(t=>Gy(t)).join(",");return`${n.op}(${e})`}}function e1(n,e){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&Ar(r.value,i.value)}(n,e):n instanceof Ie?function(r,i){return i instanceof Ie&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&e1(o,i.filters[a]),!0):!1}(n,e):void X()}function t1(n,e){const t=n.filters.concat(e);return Ie.create(t,n.op)}function n1(n){return n instanceof he?function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`}(n):n instanceof Ie?function(t){return t.op.toString()+" {"+t.getFilters().map(n1).join(" ,")+"}"}(n):"Filter"}class M3 extends he{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){const t=H.comparator(e.key,this.key);return this.matchesComparison(t)}}class L3 extends he{constructor(e,t){super(e,"in",t),this.keys=r1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F3 extends he{constructor(e,t){super(e,"not-in",t),this.keys=r1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function r1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}class U3 extends he{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pc(t)&&Ac(t.arrayValue,this.value)}}class i1 extends he{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ac(this.value.arrayValue,t)}}class j3 extends he{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ac(this.value.arrayValue,t)}}class B3 extends he{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ac(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ky(n,e=null,t=[],r=[],i=null,s=null,o=null){return new $3(n,e,t,r,i,s,o)}function Po(n){const e=G(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Gy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),td(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rl(r)).join(",")),e.ue=t}return e.ue}function nd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!e1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PT(n.startAt,e.startAt)&&PT(n.endAt,e.endAt)}function Tf(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Sf(n,e){return n.filters.filter(t=>t instanceof he&&t.field.isEqual(e))}function xT(n,e,t){let r=Dh,i=!0;for(const s of Sf(n,e)){let o=Dh,a=!0;switch(s.op){case"<":case"<=":o=N3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Dh}TT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];TT({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function bT(n,e,t){let r=$i,i=!0;for(const s of Sf(n,e)){let o=$i,a=!0;switch(s.op){case">=":case">":o=O3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=$i}ST({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];ST({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function s1(n,e,t,r,i,s,o,a){return new li(n,e,t,r,i,s,o,a)}function bl(n){return new li(n)}function RT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tw(n){return n.collectionGroup!==null}function Ra(n){const e=G(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Te(Oe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xc(s,r))}),t.has(Oe.keyField().canonicalString())||e.ce.push(new xc(Oe.keyField(),r))}return e.ce}function tn(n){const e=G(n);return e.le||(e.le=z3(e,Ra(n))),e.le}function z3(n,e){if(n.limitType==="F")return Ky(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new xc(i.field,s)});const t=n.endAt?new hs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hs(n.startAt.position,n.startAt.inclusive):null;return Ky(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qy(n,e){const t=n.filters.concat([e]);return new li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Af(n,e,t){return new li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rd(n,e){return nd(tn(n),tn(e))&&n.limitType===e.limitType}function o1(n){return`${Po(tn(n))}|lt:${n.limitType}`}function ta(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>n1(i)).join(", ")}]`),td(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>rl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>rl(i)).join(",")),`Target(${r})`}(tn(n))}; limitType=${n.limitType})`}function id(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Ra(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=AT(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ra(r),i)||r.endAt&&!function(o,a,l){const c=AT(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ra(r),i))}(n,e)}function a1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function l1(n){return(e,t)=>{let r=!1;for(const i of Ra(n)){const s=q3(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function q3(n,e,t){const r=n.field.isKeyField()?H.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ds(l,c):X()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return GR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=new xe(H.comparator);function mn(){return W3}const u1=new xe(H.comparator);function Tu(...n){let e=u1;for(const t of n)e=e.insert(t.key,t);return e}function c1(n){let e=u1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gr(){return Bu()}function d1(){return Bu()}function Bu(){return new bs(n=>n.toString(),(n,e)=>n.isEqual(e))}const H3=new xe(H.comparator),G3=new Te(H.comparator);function se(...n){let e=G3;for(const t of n)e=e.add(t);return e}const K3=new Te(ie);function nw(){return K3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function h1(n){return{integerValue:""+n}}function f1(n,e){return $R(e)?h1(e):rw(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this._=void 0}}function Q3(n,e,t){return n instanceof sl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wp(s)&&(s=Zv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof xo?m1(n,e):n instanceof bo?g1(n,e):function(i,s){const o=p1(i,s),a=CT(o)+CT(i.Pe);return Wy(o)&&Wy(i.Pe)?h1(a):rw(i.serializer,a)}(n,e)}function Y3(n,e,t){return n instanceof xo?m1(n,e):n instanceof bo?g1(n,e):t}function p1(n,e){return n instanceof ol?function(r){return Wy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class sl extends Ep{}class xo extends Ep{constructor(e){super(),this.elements=e}}function m1(n,e){const t=y1(e);for(const r of n.elements)t.some(i=>Ar(i,r))||t.push(r);return{arrayValue:{values:t}}}class bo extends Ep{constructor(e){super(),this.elements=e}}function g1(n,e){let t=y1(e);for(const r of n.elements)t=t.filter(i=>!Ar(i,r));return{arrayValue:{values:t}}}class ol extends Ep{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function CT(n){return De(n.integerValue||n.doubleValue)}function y1(n){return Pc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.field=e,this.transform=t}}function X3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof xo&&i instanceof xo||r instanceof bo&&i instanceof bo?nl(r.elements,i.elements,Ar):r instanceof ol&&i instanceof ol?Ar(r.Pe,i.Pe):r instanceof sl&&i instanceof sl}(n.transform,e.transform)}class J3{constructor(e,t){this.version=e,this.transformResults=t}}class Ve{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ve}static exists(e){return new Ve(void 0,e)}static updateTime(e){return new Ve(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Tp{}function _1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cl(n.key,Ve.none()):new Rl(n.key,n.data,Ve.none());{const t=n.data,r=bt.empty();let i=new Te(Oe.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ui(n.key,r,new pn(i.toArray()),Ve.none())}}function Z3(n,e,t){n instanceof Rl?function(i,s,o){const a=i.value.clone(),l=DT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ui?function(i,s,o){if(!Oh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=DT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(v1(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function $u(n,e,t,r){return n instanceof Rl?function(s,o,a,l){if(!Oh(s.precondition,o))return a;const c=s.value.clone(),d=NT(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof ui?function(s,o,a,l){if(!Oh(s.precondition,o))return a;const c=NT(s.fieldTransforms,l,o),d=o.data;return d.setAll(v1(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return Oh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function eB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=p1(r.transform,i||null);s!=null&&(t===null&&(t=bt.empty()),t.set(r.field,s))}return t||null}function kT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nl(r,i,(s,o)=>X3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Rl extends Tp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ui extends Tp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function v1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function DT(n,e,t){const r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Y3(o,a,t[i]))}return r}function NT(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Q3(s,o,e))}return r}class Cl extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iw extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Z3(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$u(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$u(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=d1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=_1(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,(t,r)=>kT(t,r))&&nl(this.baseMutations,e.baseMutations,(t,r)=>kT(t,r))}}class ow{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return H3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ow(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,pe;function w1(n){switch(n){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function I1(n){if(n===void 0)return rt("GRPC error has no .code"),F.UNKNOWN;switch(n){case lt.OK:return F.OK;case lt.CANCELLED:return F.CANCELLED;case lt.UNKNOWN:return F.UNKNOWN;case lt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case lt.INTERNAL:return F.INTERNAL;case lt.UNAVAILABLE:return F.UNAVAILABLE;case lt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case lt.NOT_FOUND:return F.NOT_FOUND;case lt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case lt.ABORTED:return F.ABORTED;case lt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case lt.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(pe=lt||(lt={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=new ho([4294967295,4294967295],0);function OT(n){const e=E1().encode(n),t=new bR;return t.update(e),new Uint8Array(t.digest())}function VT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ho([t,r],0),new ho([i,s],0)]}class lw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Su(`Invalid padding: ${t}`);if(r<0)throw new Su(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Su(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Su(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ho.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ho.fromNumber(r)));return i.compare(nB)===1&&(i=new ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=OT(e),[r,i]=VT(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lw(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=OT(e),[r,i]=VT(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ad.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new od(ee.min(),i,new xe(ie),mn(),se())}}class ad{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ad(r,t,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class T1{constructor(e,t){this.targetId=e,this.me=t}}class S1{constructor(e,t,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class MT{constructor(){this.fe=0,this.ge=FT(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X()}}),new ad(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=FT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rB{constructor(e){this.Le=e,this.Be=new Map,this.ke=mn(),this.qe=LT(),this.Qe=new xe(ie)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Tf(s))if(r===0){const o=new H(s.path);this.Ue(t,o,Ce.newNoDocument(o,ee.min()))}else Z(r===1);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=us(r).toUint8Array()}catch(l){if(l instanceof KR)return Sr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lw(o,i,s)}catch(l){return Sr(l instanceof Su?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Tf(a.target)){const l=new H(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ce.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new od(e,t,this.Qe,this.ke,r);return this.ke=mn(),this.qe=LT(),this.Qe=new xe(ie),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new MT,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Te(ie),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new MT),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function LT(){return new xe(H.comparator)}function FT(){return new xe(H.comparator)}const iB={asc:"ASCENDING",desc:"DESCENDING"},sB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oB={and:"AND",or:"OR"};class aB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yy(n,e){return n.useProto3Json||td(e)?e:{value:e}}function al(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lB(n,e){return al(n,e.toTimestamp())}function ot(n){return Z(!!n),ee.fromTimestamp(function(t){const r=ri(t);return new Me(r.seconds,r.nanos)}(n))}function uw(n,e){return Xy(n,e).canonicalString()}function Xy(n,e){const t=function(i){return new de(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function P1(n){const e=de.fromString(n);return Z(M1(e)),e}function bc(n,e){return uw(n.databaseId,e.path)}function Ir(n,e){const t=P1(e);if(t.get(1)!==n.databaseId.projectId)throw new B(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(R1(t))}function x1(n,e){return uw(n.databaseId,e)}function b1(n){const e=P1(n);return e.length===4?de.emptyPath():R1(e)}function Jy(n){return new de(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function R1(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function UT(n,e,t){return{name:bc(n,e),fields:t.value.mapValue.fields}}function C1(n,e,t){const r=Ir(n,e.name),i=ot(e.updateTime),s=e.createTime?ot(e.createTime):ee.min(),o=new bt({mapValue:{fields:e.fields}}),a=Ce.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function uB(n,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;const s=Ir(r,i.found.name),o=ot(i.found.updateTime),a=i.found.createTime?ot(i.found.createTime):ee.min(),l=new bt({mapValue:{fields:i.found.fields}});return Ce.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);const s=Ir(r,i.missing),o=ot(i.readTime);return Ce.newNoDocument(s,o)}(n,e):X()}function cB(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Z(d===void 0||typeof d=="string"),Xe.fromBase64String(d||"")):(Z(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Xe.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?F.UNKNOWN:I1(c.code);return new B(d,c.message||"")}(o);t=new S1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ir(n,r.document.name),s=ot(r.document.updateTime),o=r.document.createTime?ot(r.document.createTime):ee.min(),a=new bt({mapValue:{fields:r.document.fields}}),l=Ce.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];t=new Vh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ir(n,r.document),s=r.readTime?ot(r.readTime):ee.min(),o=Ce.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Vh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ir(n,r.document),s=r.removedTargetIds||[];t=new Vh([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new tB(i,s),a=r.targetId;t=new T1(a,o)}}return t}function Rc(n,e){let t;if(e instanceof Rl)t={update:UT(n,e.key,e.value)};else if(e instanceof Cl)t={delete:bc(n,e.key)};else if(e instanceof ui)t={update:UT(n,e.key,e.data),updateMask:gB(e.fieldMask)};else{if(!(e instanceof iw))return X();t={verify:bc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof sl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ol)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:lB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(n,e.precondition)),t}function Zy(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Ve.updateTime(ot(s.updateTime)):s.exists!==void 0?Ve.exists(s.exists):Ve.none()}(e.currentDocument):Ve.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),l=new sl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new xo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new bo(d)}else"increment"in a?l=new ol(o,a.increment):X();const c=Oe.fromServerFormat(a.fieldPath);return new sd(c,l)}(n,i)):[];if(e.update){e.update.name;const i=Ir(n,e.update.name),s=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new pn(c.map(d=>Oe.fromServerFormat(d)))}(e.updateMask);return new ui(i,s,o,t,r)}return new Rl(i,s,t,r)}if(e.delete){const i=Ir(n,e.delete);return new Cl(i,t)}if(e.verify){const i=Ir(n,e.verify);return new iw(i,t)}return X()}function dB(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ot(i.updateTime):ot(s);return o.isEqual(ee.min())&&(o=ot(s)),new J3(o,i.transformResults||[])}(t,e))):[]}function k1(n,e){return{documents:[x1(n,e.path)]}}function D1(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=x1(n,i);const s=function(c){if(c.length!==0)return V1(Ie.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:na(p.field),direction:fB(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Yy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function N1(n){let e=b1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Z(r===1);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){const p=O1(h);return p instanceof Ie&&ew(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(S){return new xc(ra(S.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,td(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new hs(g,p)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const p=!h.before,g=h.values||[];return new hs(g,p)}(t.endAt)),s1(e,i,o,s,a,"F",l,c)}function hB(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function O1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ra(t.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ra(t.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ra(t.unaryFilter.field);return he.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ra(t.unaryFilter.field);return he.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(n):n.fieldFilter!==void 0?function(t){return he.create(ra(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ie.create(t.compositeFilter.filters.map(r=>O1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(t.compositeFilter.op))}(n):X()}function fB(n){return iB[n]}function pB(n){return sB[n]}function mB(n){return oB[n]}function na(n){return{fieldPath:n.canonicalString()}}function ra(n){return Oe.fromServerFormat(n.fieldPath)}function V1(n){return n instanceof he?function(t){if(t.op==="=="){if(ET(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NAN"}};if(IT(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ET(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NOT_NAN"}};if(IT(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:na(t.field),op:pB(t.op),value:t.value}}}(n):n instanceof Ie?function(t){const r=t.getFilters().map(i=>V1(i));return r.length===1?r[0]:{compositeFilter:{op:mB(t.op),filters:r}}}(n):X()}function gB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function M1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t,r,i,s=ee.min(),o=ee.min(),a=Xe.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.ct=e}}function yB(n,e){let t;if(e.document)t=C1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=H.fromSegments(e.noDocument.path),i=Co(e.noDocument.readTime);t=Ce.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return X();{const r=H.fromSegments(e.unknownDocument.path),i=Co(e.unknownDocument.version);t=Ce.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Me(i[0],i[1]);return ee.fromTimestamp(s)}(e.readTime)),t}function jT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:bc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:al(s,o.version.toTimestamp()),createTime:al(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ro(e.version)};else{if(!e.isUnknownDocument())return X();r.unknownDocument={path:t.path.toArray(),version:Ro(e.version)}}return r}function Pf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ro(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Co(n){const e=new Me(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function zs(n,e){const t=(e.baseMutations||[]).map(s=>Zy(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Zy(n.ct,s)),i=Me.fromMillis(e.localWriteTimeMs);return new sw(e.batchId,i,t,r)}function Au(n){const e=Co(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Co(n.lastLimboFreeSnapshotVersion):ee.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Z(s.documents.length===1),tn(bl(b1(s.documents[0])))}(n.query):function(s){return tn(N1(s))}(n.query),new Wr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Xe.fromBase64String(n.resumeToken))}function F1(n,e){const t=Ro(e.snapshotVersion),r=Ro(e.lastLimboFreeSnapshotVersion);let i;i=Tf(e.target)?k1(n.ct,e.target):D1(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Po(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function cw(n){const e=N1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Af(e,e.limit,"L"):e}function tg(n,e){return new aw(e.largestBatchId,Zy(n.ct,e.overlayMutation))}function BT(n,e){const t=e.path.lastSegment();return[n,en(e.path.popLast()),t]}function $T(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ro(r.readTime),documentKey:en(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{getBundleMetadata(e,t){return zT(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Co(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return zT(e).put(function(i){return{bundleId:i.id,createTime:Ro(ot(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return qT(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:cw(s.bundledQuery),readTime:Co(s.readTime)}}(r)})}saveNamedQuery(e,t){return qT(e).put(function(i){return{name:i.name,readTime:Ro(ot(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function zT(n){return yt(n,"bundles")}function qT(n){return yt(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Sp(e,r)}getOverlay(e,t){return ou(e).get(BT(this.userId,t)).next(r=>r?tg(this.serializer,r):null)}getOverlays(e,t){const r=gr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new aw(t,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(en(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ou(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,t,r){const i=gr(),s=en(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ou(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=tg(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=gr();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ou(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=tg(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return ou(e).put(function(i,s,o){const[a,l,c]=BT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Rc(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function ou(n){return yt(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{Pt(e){return yt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Xe.fromUint8Array(r):Xe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(De(e.integerValue));else if("doubleValue"in e){const r=De(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Tc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ri(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(us(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?QR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ip(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):X()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(De(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),H.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}qs.vt=new qs;function wB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function WT(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=wB(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class IB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=WT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=WT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EB{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class TB{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class au{constructor(){this.jt=new IB,this.Ht=new EB(this.jt),this.Jt=new TB(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ws(this.indexId,this.documentKey,this.arrayValue,r)}}function gi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=HT(n.arrayValue,e.arrayValue),t!==0?t:(t=HT(n.directionalValue,e.directionalValue),t!==0?t:H.comparator(n.documentKey,e.documentKey)))}function HT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.Xt=new Te((t,r)=>Oe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Z(e.collectionGroup===this.collectionId),this.nn)return!1;const t=$y(e);if(t!==void 0&&!this.sn(t))return!1;const r=js(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Te(Oe.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ch(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ch(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ch(r.field,r.dir==="asc"?0:1)));return new Ef(Ef.UNKNOWN_ID,this.collectionId,t,Ec.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n){var e,t;if(Z(n instanceof he||n instanceof Ie),n instanceof he){if(n instanceof i1){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>he.create(n.field,"==",s)))||[];return Ie.create(i,"or")}return n}const r=n.filters.map(i=>U1(i));return Ie.create(r,n.op)}function SB(n){if(n.getFilters().length===0)return[];const e=n_(U1(n));return Z(j1(e)),e_(e)||t_(e)?[e]:e.getFilters()}function e_(n){return n instanceof he}function t_(n){return n instanceof Ie&&ew(n)}function j1(n){return e_(n)||t_(n)||function(t){if(t instanceof Ie&&Hy(t)){for(const r of t.getFilters())if(!e_(r)&&!t_(r))return!1;return!0}return!1}(n)}function n_(n){if(Z(n instanceof he||n instanceof Ie),n instanceof he)return n;if(n.filters.length===1)return n_(n.filters[0]);const e=n.filters.map(r=>n_(r));let t=Ie.create(e,n.op);return t=xf(t),j1(t)?t:(Z(t instanceof Ie),Z(il(t)),Z(t.filters.length>1),t.filters.reduce((r,i)=>dw(r,i)))}function dw(n,e){let t;return Z(n instanceof he||n instanceof Ie),Z(e instanceof he||e instanceof Ie),t=n instanceof he?e instanceof he?function(i,s){return Ie.create([i,s],"and")}(n,e):KT(n,e):e instanceof he?KT(e,n):function(i,s){if(Z(i.filters.length>0&&s.filters.length>0),il(i)&&il(s))return t1(i,s.getFilters());const o=Hy(i)?i:s,a=Hy(i)?s:i,l=o.filters.map(c=>dw(c,a));return Ie.create(l,"or")}(n,e),xf(t)}function KT(n,e){if(il(e))return t1(e,n.getFilters());{const t=e.filters.map(r=>dw(n,r));return Ie.create(t,"or")}}function xf(n){if(Z(n instanceof he||n instanceof Ie),n instanceof he)return n;const e=n.getFilters();if(e.length===1)return xf(e[0]);if(ZR(n))return n;const t=e.map(i=>xf(i)),r=[];return t.forEach(i=>{i instanceof he?r.push(i):i instanceof Ie&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ie.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(){this.un=new hw}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Pn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}}class hw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Te(de.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Te(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Uint8Array(0);class PB{constructor(e,t){this.databaseId=t,this.cn=new hw,this.ln=new bs(r=>Po(r),(r,i)=>nd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:en(i)};return QT(e).put(s)}return M.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[MR(t),""],!1,!0);return QT(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(mr(o.parent))}return r})}addFieldIndex(e,t){const r=lu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=Xo(e);return s.next(a=>{o.put($T(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=lu(e),i=Xo(e),s=Yo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=lu(e),r=Yo(e),i=Xo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new GT(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Yo(e);let i=!0;const s=new Map;return M.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=se();const a=[];return M.forEach(s,(l,c)=>{$("IndexedDbIndexManager",`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${Po(t)}`);const d=function(y,k){const V=$y(k);if(V===void 0)return null;for(const j of Sf(y,V.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(c,l),h=function(y,k){const V=new Map;for(const j of js(k))for(const A of Sf(y,j.fieldPath))switch(A.op){case"==":case"in":V.set(j.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return V.set(j.fieldPath.canonicalString(),A.value),Array.from(V.values())}return null}(c,l),p=function(y,k){const V=[];let j=!0;for(const A of js(k)){const v=A.kind===0?xT(y,A.fieldPath,y.startAt):bT(y,A.fieldPath,y.startAt);V.push(v.value),j&&(j=v.inclusive)}return new hs(V,j)}(c,l),g=function(y,k){const V=[];let j=!0;for(const A of js(k)){const v=A.kind===0?bT(y,A.fieldPath,y.endAt):xT(y,A.fieldPath,y.endAt);V.push(v.value),j&&(j=v.inclusive)}return new hs(V,j)}(c,l),S=this.In(l,c,p),T=this.In(l,c,g),b=this.Tn(l,c,h),I=this.En(l.indexId,d,S,p.inclusive,T,g.inclusive,b);return M.forEach(I,_=>r.G(_,t.limit).next(y=>{y.forEach(k=>{const V=H.fromSegments(k.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=SB(Ie.create(e.filters,"and")).map(r=>Ky(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),c=l/(t!=null?t.length:1),d=[];for(let h=0;h<l;++h){const p=t?this.dn(t[h/c]):nh,g=this.An(e,p,r[h%c],i),S=this.Rn(e,p,s[h%c],o),T=a.map(b=>this.An(e,p,b,!0));d.push(...this.createRange(g,S,T))}return d}An(e,t,r,i){const s=new Ws(e,H.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Ws(e,H.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new GT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return M.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Te(Oe.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new au;for(const i of js(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);qs.vt.It(s,o)}return r.zt()}dn(e){const t=new au;return qs.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new au;return qs.vt.It(Ao(this.databaseId,t),r.Yt(function(s){const o=js(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new au);let s=0;for(const o of js(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&Pc(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);qs.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new au;l.seed(a.zt()),qs.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=lu(e),i=Xo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Ec(h.sequenceNumber,new Pn(Co(h.readTime),new H(mr(h.documentKey)),h.largestBatchId)):Ec.empty(),g=d.fields.map(([S,T])=>new Ch(Oe.fromServerFormat(S),T));return new Ef(d.indexId,d.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=lu(e),s=Xo(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,l=>s.put($T(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return M.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.wn(e,i,l).next(c=>{const d=this.Sn(s,l);return c.isEqual(d)?M.resolve():this.bn(e,s,l,c,d)}))))})}Dn(e,t,r,i){return Yo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Yo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Yo(e);let s=new Te(gi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Ws(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Te(gi);const i=this.Vn(t,e);if(i==null)return r;const s=$y(t);if(s!=null){const o=e.data.field(s.fieldPath);if(Pc(o))for(const a of o.arrayValue.values||[])r=r.add(new Ws(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ws(t.indexId,e.key,nh,i));return r}bn(e,t,r,i,s){$("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,d,h,p){const g=l.getIterator(),S=c.getIterator();let T=Qo(g),b=Qo(S);for(;T||b;){let I=!1,_=!1;if(T&&b){const y=d(T,b);y<0?_=!0:y>0&&(I=!0)}else T!=null?_=!0:I=!0;I?(h(b),b=Qo(S)):_?(p(T),T=Qo(g)):(T=Qo(g),b=Qo(S))}}(i,s,gi,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),M.waitFor(o)}yn(e){let t=1;return Xo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>gi(o,a)).filter((o,a,l)=>!a||gi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=gi(o,e),l=gi(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,nh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,nh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return gi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(YT)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||X())).next(YT)}}function QT(n){return yt(n,"collectionParents")}function Yo(n){return yt(n,"indexEntries")}function lu(n){return yt(n,"indexConfiguration")}function Xo(n){return yt(n,"indexState")}function YT(n){Z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Yv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Pn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class un{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{Z(a===1)}));const c=[];for(const d of t.mutations){const h=zR(e,d.key.path,t.batchId);s.push(i.delete(h)),c.push(d.key)}return M.waitFor(s).next(()=>c)}function bf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw X();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(41943040,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);class Ap{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Z(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Ap(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=ia(e),o=yi(e);return o.add({}).next(a=>{Z(typeof a=="number");const l=new sw(a,t,r,i),c=function(g,S,T){const b=T.baseMutations.map(_=>Rc(g.ct,_)),I=T.mutations.map(_=>Rc(g.ct,_));return{userId:S,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:b,mutations:I}}(this.serializer,this.userId,l),d=[];let h=new Te((p,g)=>ie(p.canonicalString(),g.canonicalString()));for(const p of i){const g=zR(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(g,h3))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return yi(e).get(t).next(r=>r?(Z(r.userId===this.userId),zs(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return yi(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Z(a.batchId>=r),s=zs(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yi(e).U("userMutationsIndex",t).next(r=>r.map(i=>zs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=kh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ia(e).J({range:i},(o,a,l)=>{const[c,d,h]=o,p=mr(d);if(c===this.userId&&t.path.isEqual(p))return yi(e).get(h).next(g=>{if(!g)throw X();Z(g.userId===this.userId),s.push(zs(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(ie);const i=[];return t.forEach(s=>{const o=kh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ia(e).J({range:a},(c,d,h)=>{const[p,g,S]=c,T=mr(g);p===this.userId&&s.path.isEqual(T)?r=r.add(S):h.done()});i.push(l)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=kh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Te(ie);return ia(e).J({range:o},(l,c,d)=>{const[h,p,g]=l,S=mr(p);h===this.userId&&r.isPrefixOf(S)?S.length===i&&(a=a.add(g)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(yi(e).get(s).next(o=>{if(o===null)throw X();Z(o.userId===this.userId),r.push(zs(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return B1(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ia(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=mr(s[1]);i.push(l)}else a.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,t){return $1(e,this.userId,t)}Nn(e){return z1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $1(n,e,t){const r=kh(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ia(n).J({range:s,H:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function yi(n){return yt(n,"mutations")}function ia(n){return yt(n,"documentMutations")}function z1(n){return yt(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ko(0)}static kn(){return new ko(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new ko(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ee.fromTimestamp(new Me(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Jo(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Jo(e).J((o,a)=>{const l=Au(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Jo(e).J((r,i)=>{const s=Au(i);t(s)})}qn(e){return JT(e).get("targetGlobalKey").next(t=>(Z(t!==null),t))}Qn(e,t){return JT(e).put("targetGlobalKey",t)}Kn(e,t){return Jo(e).put(F1(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Po(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Jo(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Au(a);nd(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Pi(e);return t.forEach(o=>{const a=en(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,t,r){const i=Pi(e);return M.forEach(t,s=>{const o=en(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Pi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Pi(e);let s=se();return i.J({range:r,H:!0},(o,a,l)=>{const c=mr(o[1]),d=new H(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){const r=en(t.path),i=IDBKeyRange.bound([r],[MR(r)],!1,!0);let s=0;return Pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Jo(e).get(t).next(r=>r?Au(r):null)}}function Jo(n){return yt(n,"targets")}function JT(n){return yt(n,"targetGlobal")}function Pi(n){return yt(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT([n,e],[t,r]){const i=ie(n,t);return i===0?ie(e,r):i}class bB{constructor(e){this.Un=e,this.buffer=new Te(ZT),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ZT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){$("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xs(t)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ps(t)}await this.Hn(3e5)})}}class CB{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(fn.oe);const r=new bB(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(XT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XT):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ea()<=ue.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function kB(n,e){return new CB(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,t){this.db=e,this.garbageCollector=kB(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return rh(e,r)}removeReference(e,t,r){return rh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return rh(e,t)}nr(e,t){return function(i,s){let o=!1;return z1(i).Y(a=>$1(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ee.min()),Pi(e).delete(function(h){return[0,en(h.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return rh(e,t)}tr(e,t){const r=Pi(e);let i,s=fn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==fn.oe&&t(new H(mr(i)),s),s=c,i=l):s=fn.oe}).next(()=>{s!==fn.oe&&t(new H(mr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rh(n,e){return Pi(n).put(function(r,i){return{targetId:0,path:en(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.changes=new bs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ce.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ms(e).put(r)}removeEntry(e,t,r){return Ms(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Pf(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Ce.newInvalidDocument(t);return Ms(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uu(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Ce.newInvalidDocument(t)};return Ms(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uu(t))},(i,s)=>{r={document:this.ir(t,s),size:bf(s)}}).next(()=>r)}getEntries(e,t){let r=mn();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=mn(),i=new xe(H.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,bf(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new Te(nS);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(uu(i.first()),uu(i.last())),o=i.getIterator();let a=o.getNext();return Ms(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const h=H.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&nS(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(uu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ms(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=mn();for(const h of c){const p=this.ir(H.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(id(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=mn();const o=tS(t,r),a=tS(t,Pn.max());return Ms(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.ir(H.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new OB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eS(e).get("remoteDocumentGlobalKey").next(t=>(Z(!!t),t))}rr(e,t){return eS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=yB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return Ce.newInvalidDocument(e)}}function W1(n){return new NB(n)}class OB extends q1{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new bs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Te((s,o)=>ie(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=jT(this.cr.serializer,o);i=i.add(s.path.popLast());const c=bf(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=jT(this.cr.serializer,o.convertToNoDocument(ee.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function eS(n){return yt(n,"remoteDocumentGlobal")}function Ms(n){return yt(n,"remoteDocumentsV14")}function uu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tS(n,e){const t=e.documentKey.path.toArray();return[n,Pf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nS(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ie(t[s],r[s]),i)return i;return i=ie(t.length,r.length),i||(i=ie(t[t.length-2],r[r.length-2]),i||ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$u(r.mutation,i,pn.empty(),Me.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){const i=gr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Tu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=gr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=mn();const o=Bu(),a=function(){return Bu()}();return t.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ui)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),$u(d.mutation,c,d.mutation.getFieldMask(),Me.now())):o.set(c.key,pn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var h;return a.set(c,new VB(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Bu();let i=new xe((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let d=r.get(l)||pn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||se()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=d1();d.forEach(p=>{if(!s.has(p)){const g=_1(t.get(p),r.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(gr());let a=-1,l=s;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,se())).next(d=>({batchId:a,changes:c1(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=Tu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Tu();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const c=function(h,p){return new li(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Ce.newInvalidDocument(d)))});let a=Tu();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&$u(d.mutation,c,pn.empty(),Me.now()),id(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ot(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:cw(i.bundledQuery),readTime:ot(i.readTime)}}(t)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this.overlays=new xe(H.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){const i=gr(),s=t.length+1,o=new H(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new xe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=gr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=gr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aw(t,r));let s=this.Ir.get(t);s===void 0&&(s=se(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.Tr=new Te(vt.Er),this.dr=new Te(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new vt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new vt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new H(new de([])),r=new vt(t,e),i=new vt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new H(new de([])),r=new vt(t,e),i=new vt(t,e+1);let s=se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new vt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return H.comparator(e.key,t.key)||ie(e.wr,t.wr)}static Ar(e,t){return ie(e.wr,t.wr)||H.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Te(vt.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sw(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vt(t,0),i=new vt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(ie);return t.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;H.isDocumentKey(s)||(s=s.child(""));const o=new vt(new H(s),0);let a=new Te(ie);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{const s=new vt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new vt(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.Mr=e,this.docs=function(){return new xe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Ce.newInvalidDocument(t))}getEntries(e,t){let r=mn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ce.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=mn();const o=t.path,a=new H(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Yv(FR(d),r)<=0||(i.has(d.key)||id(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){X()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new BB(this)}getSize(e){return M.resolve(this.size)}}class BB extends q1{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.persistence=e,this.Nr=new bs(t=>Po(t),nd),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fw,this.targetCount=0,this.kr=ko.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ko(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t){this.qr={},this.overlays={},this.Qr=new fn(0),this.Kr=!1,this.Kr=!0,this.$r=new FB,this.referenceDelegate=e(this),this.Ur=new $B(this),this.indexManager=new AB,this.remoteDocumentCache=function(i){return new jB(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new L1(t),this.Gr=new MB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new UB(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);const i=new zB(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class zB extends jR{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.Jr=new fw,this.Yr=null}static Zr(e){return new Pp(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=H.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){this.serializer=e}O(e,t,r,i){const s=new vp("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gT,{unique:!0}),l.createObjectStore("documentMutations")}(e),rS(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),rS(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gT,{unique:!0});const h=c.store("mutations"),p=d.map(g=>h.put(g));return M.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:S3});c.createIndex("collectionPathOverlayIndex",A3,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",P3,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:f3});c.createIndex("documentKeyIndex",p3),c.createIndex("collectionGroupIndex",m3)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:w3}).createIndex("sequenceNumberIndex",I3,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:E3}).createIndex("documentKeyIndex",T3,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=bf(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{Z(l.userId===s.userId);const c=zs(this.serializer,l);return B1(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new de(o),c=function(h){return[0,en(h)]}(l);s.push(t.get(c).next(d=>d?M.resolve():(h=>t.put({targetId:0,path:en(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:v3});const r=t.store("collectionParents"),i=new hw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:en(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new de(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=mr(a);return s(d.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Au(i),o=F1(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=function(h){return h.document?new H(de.fromString(h.document.name).popFirst(5)):h.noDocument?H.fromSegments(h.noDocument.path):h.unknownDocument?H.fromSegments(h.unknownDocument.path):X()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>M.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=W1(this.serializer),s=new G1(Pp.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:se();zs(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),M.forEach(a,(l,c)=>{const d=new It(c),h=Sp.lt(this.serializer,d),p=s.getIndexManager(d),g=Ap.lt(d,this.serializer,p,s.referenceDelegate);return new H1(i,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new zy(t,fn.oe),l).next()})})}}function rS(n){n.createObjectStore("targetDocuments",{keyPath:y3}).createIndex("documentTargetsIndex",_3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",g3,{unique:!0}),n.createObjectStore("targetGlobal")}const ng="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pw{constructor(e,t,r,i,s,o,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!pw.D())throw new B(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new DB(this,i),this.Ai=t+"main",this.serializer=new L1(l),this.Ri=new wr(this.Ai,this.hi,new qB(this.serializer)),this.$r=new vB,this.Ur=new xB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=W1(this.serializer),this.Gr=new _B,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(F.FAILED_PRECONDITION,ng);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new fn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ih(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(xs(e))return $("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return cu(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return ih(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=yt(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):cu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new B(F.FAILED_PRECONDITION,ng);return!1}}return!(!this.networkEnabled||!this.inForeground)||ih(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&$("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new zy(e,fn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ih(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Ap.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new PB(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){$("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?R3:l===16?b3:l===15?Jv:l===14?HR:l===13?WR:l===12?x3:l===11?qR:void X()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new zy(a,this.Qr?this.Qr.next():fn.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new B(F.FAILED_PRECONDITION,UR);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return cu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new B(F.FAILED_PRECONDITION,ng)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cu(e).put("owner",t)}static D(){return wr.D()}bi(e){const t=cu(e);return t.get("owner").next(r=>this.vi(r)?($("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;gb()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return $("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){rt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cu(n){return yt(n,"owner")}function ih(n){return yt(n,"clientMetadata")}function mw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gw(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gb()?8:BR(ze())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new WB;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ea()<=ue.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(ea()<=ue.DEBUG&&$("QueryEngine","Query:",ta(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ea()<=ue.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(t))):M.resolve())}Yi(e,t){if(RT(t))return M.resolve(null);let r=tn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Af(t,null,"F"),r=tn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,Af(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return RT(t)||i.isEqual(ee.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?M.resolve(null):(ea()<=ue.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ta(t)),this.rs(e,o,t,LR(i,-1)).next(a=>a))})}ts(e,t){let r=new Te(l1(e));return t.forEach((i,s)=>{id(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return ea()<=ue.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",ta(t)),this.Ji.getDocumentsMatchingQuery(e,t,Pn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new xe(ie),this._s=new bs(s=>Po(s),nd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Q1(n,e,t,r){return new HB(n,e,t,r)}async function Y1(n,e){const t=G(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=se();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function GB(n,e){const t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let g=M.resolve();return p.forEach(S=>{g=g.next(()=>d.getEntry(l,S)).next(T=>{const b=c.docVersions.get(S);Z(b!==null),T.version.compareTo(b)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),d.addEntry(T)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function X1(n){const e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function KB(n,e){const t=G(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Xe.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(T,b,I){return T.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,g,d)&&a.push(t.Ur.updateTargetData(s,g))});let l=mn(),c=se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(J1(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(ee.min())){const d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}function J1(n,e,t){let r=se(),i=se();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=mn();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function QB(n,e){const t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ll(n,e){const t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function ul(n,e,t){const r=G(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xs(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Rf(n,e,t){const r=G(n);let i=ee.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=G(l),p=h._s.get(d);return p!==void 0?M.resolve(h.os.get(p)):h.Ur.getTargetData(c,d)}(r,o,tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ee.min(),t?s:se())).next(a=>(tC(r,a1(e),a),{documents:a,Ts:s})))}function Z1(n,e){const t=G(n),r=G(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function eC(n,e){const t=G(n),r=t.us.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,LR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(tC(t,e,i),i))}function tC(n,e,t){let r=n.us.get(e)||ee.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}async function YB(n,e,t,r){const i=G(n);let s=se(),o=mn();for(const c of t){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await ll(i,function(d){return tn(bl(de.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>J1(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function XB(n,e,t=se()){const r=await ll(n,tn(cw(e.bundledQuery))),i=G(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ot(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Xe.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function iS(n,e){return`firestore_clients_${n}_${e}`}function sS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rg(n,e){return`firestore_targets_${n}_${e}`}class Cf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new B(i.error.code,i.error.message))),o?new Cf(e,t,i.state,s):(rt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new B(r.error.code,r.error.message))),s?new zu(e,r.state,i):(rt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=nw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=$R(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new kf(e,s):(rt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yw{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new yw(t.clientId,t.onlineState):(rt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class r_{constructor(){this.activeTargetIds=nw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ig{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new xe(ie),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=iS(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new r_),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(iS(this.persistenceKey,r));if(i){const s=kf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(rg(this.persistenceKey,e));if(i){const s=zu.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $("SharedClientState","READ",e,t),t}setItem(e,t){$("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if($("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let o=fn.oe;if(s!=null)try{const a=JSON.parse(s);Z(typeof a=="number"),o=a}catch(a){rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==fn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Cf(this.currentUser,e,t,r),s=sS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=sS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=rg(this.persistenceKey,e),s=new zu(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return kf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Cf.Rs(new It(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return zu.Rs(i,t)}Ls(e){return yw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);$("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=nw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class nC{constructor(){this.so=new r_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new r_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh=null;function sg(){return sh===null?sh=function(){return 268435456+Math.round(2147483648*Math.random())}():sh++,"0x"+sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class t5 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=sg(),l=this.xo(t,r.toUriEncodedString());$("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(d=>($("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Sr("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){const i=ZB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=sg();return new Promise((o,a)=>{const l=new RR;l.setWithCredentials(!0),l.listenOnce(CR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rh.NO_ERROR:const d=l.getResponseJson();$(Ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Rh.TIMEOUT:$(Ft,`RPC '${e}' ${s} timed out`),a(new B(F.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const h=l.getStatus();if($(Ft,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const S=function(b){const I=b.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(I)>=0?I:F.UNKNOWN}(g.status);a(new B(S,g.message))}else a(new B(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new B(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{$(Ft,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);$(Ft,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=sg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NR(),a=DR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=s.join("");$(Ft,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,g=!1;const S=new e5({Io:b=>{g?$(Ft,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(p||($(Ft,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),$(Ft,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},To:()=>h.close()}),T=(b,I,_)=>{b.listen(I,y=>{try{_(y)}catch(k){setTimeout(()=>{throw k},0)}})};return T(h,Eu.EventType.OPEN,()=>{g||($(Ft,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),T(h,Eu.EventType.CLOSE,()=>{g||(g=!0,$(Ft,`RPC '${e}' stream ${i} transport closed`),S.So())}),T(h,Eu.EventType.ERROR,b=>{g||(g=!0,Sr(Ft,`RPC '${e}' stream ${i} transport errored:`,b),S.So(new B(F.UNAVAILABLE,"The operation could not be completed")))}),T(h,Eu.EventType.MESSAGE,b=>{var I;if(!g){const _=b.data[0];Z(!!_);const y=_,k=y.error||((I=y[0])===null||I===void 0?void 0:I.error);if(k){$(Ft,`RPC '${e}' stream ${i} received error:`,k);const V=k.status;let j=function(x){const P=lt[x];if(P!==void 0)return I1(P)}(V),A=k.message;j===void 0&&(j=F.INTERNAL,A="Unknown error status: "+V+" with message "+k.message),g=!0,S.So(new B(j,A)),h.close()}else $(Ft,`RPC '${e}' stream ${i} received:`,_),S.bo(_)}}),T(a,kR.STAT_EVENT,b=>{b.stat===By.PROXY?$(Ft,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===By.NOPROXY&&$(Ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(){return typeof window<"u"?window:null}function Mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n){return new aB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _w(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(rt(t.toString()),rt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new B(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n5 extends iC{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=cB(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?ot(o.readTime):ee.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Jy(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Tf(l)?{documents:k1(s,l)}:{query:D1(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=A1(s,o.resumeToken);const c=Yy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=al(s,o.snapshotVersion.toTimestamp());const c=Yy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=hB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Jy(this.serializer),t.removeTarget=e,this.a_(t)}}class r5 extends iC{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=dB(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Jy(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Rc(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Xy(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(F.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Xy(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class s5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rt(t),this.D_=!1):$("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Rs(this)&&($("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=G(l);c.L_.add(4),await kl(c),c.q_.set("Unknown"),c.L_.delete(4),await ud(c)}(this))})}),this.q_=new s5(r,i)}}async function ud(n){if(Rs(n))for(const e of n.B_)await e(!0)}async function kl(n){for(const e of n.B_)await e(!1)}function xp(n,e){const t=G(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Iw(t)?ww(t):Nl(t).r_()&&vw(t,e))}function cl(n,e){const t=G(n),r=Nl(t);t.N_.delete(e),r.r_()&&sC(t,e),t.N_.size===0&&(r.r_()?r.o_():Rs(t)&&t.q_.set("Unknown"))}function vw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nl(n).A_(e)}function sC(n,e){n.Q_.xe(e),Nl(n).R_(e)}function ww(n){n.Q_=new rB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Nl(n).start(),n.q_.v_()}function Iw(n){return Rs(n)&&!Nl(n).n_()&&n.N_.size>0}function Rs(n){return G(n).L_.size===0}function oC(n){n.Q_=void 0}async function a5(n){n.q_.set("Online")}async function l5(n){n.N_.forEach((e,t)=>{vw(n,e)})}async function u5(n,e){oC(n),Iw(n)?(n.q_.M_(e),ww(n)):n.q_.set("Unknown")}async function c5(n,e,t){if(n.q_.set("Online"),e instanceof S1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(n,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Df(n,r)}else if(e instanceof Vh?n.Q_.Ke(e):e instanceof T1?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{const r=await X1(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Xe.EMPTY_BYTE_STRING,d.snapshotVersion)),sC(s,l);const h=new Wr(d.target,l,c,d.sequenceNumber);vw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){$("RemoteStore","Failed to raise snapshot:",r),await Df(n,r)}}async function Df(n,e,t){if(!xs(e))throw e;n.L_.add(1),await kl(n),n.q_.set("Offline"),t||(t=()=>X1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await ud(n)})}function aC(n,e){return e().catch(t=>Df(n,t,e))}async function Dl(n){const e=G(n),t=fs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;d5(e);)try{const i=await QB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,h5(e,i)}catch(i){await Df(e,i)}lC(e)&&uC(e)}function d5(n){return Rs(n)&&n.O_.length<10}function h5(n,e){n.O_.push(e);const t=fs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function lC(n){return Rs(n)&&!fs(n).n_()&&n.O_.length>0}function uC(n){fs(n).start()}async function f5(n){fs(n).p_()}async function p5(n){const e=fs(n);for(const t of n.O_)e.m_(t.mutations)}async function m5(n,e,t){const r=n.O_.shift(),i=ow.from(r,e,t);await aC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Dl(n)}async function g5(n,e){e&&fs(n).V_&&await async function(r,i){if(function(o){return w1(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();fs(r).s_(),await aC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Dl(r)}}(n,e),lC(n)&&uC(n)}async function aS(n,e){const t=G(n);t.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const r=Rs(t);t.L_.add(3),await kl(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await ud(t)}async function i_(n,e){const t=G(n);e?(t.L_.delete(2),await ud(t)):e||(t.L_.add(2),await kl(t),t.q_.set("Unknown"))}function Nl(n){return n.K_||(n.K_=function(t,r,i){const s=G(t);return s.w_(),new n5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:a5.bind(null,n),Ro:l5.bind(null,n),mo:u5.bind(null,n),d_:c5.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Iw(n)?ww(n):n.q_.set("Unknown")):(await n.K_.stop(),oC(n))})),n.K_}function fs(n){return n.U_||(n.U_=function(t,r,i){const s=G(t);return s.w_(),new r5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:f5.bind(null,n),mo:g5.bind(null,n),f_:p5.bind(null,n),g_:m5.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Dl(n)):(await n.U_.stop(),n.O_.length>0&&($("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Ew(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ol(n,e){if(rt("AsyncQueue",`${e}: ${n}`),xs(n))return new B(F.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=Tu(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new Ca(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ca;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.W_=new xe(H.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class dl{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new dl(e,t,Ca.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _5{constructor(){this.queries=uS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=G(t),s=i.queries;i.queries=uS(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new B(F.ABORTED,"Firestore shutting down"))}}function uS(){return new bs(n=>o1(n),rd)}async function Tw(n,e){const t=G(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new y5,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Ol(o,`Initialization of query '${ta(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Aw(t)}async function Sw(n,e){const t=G(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function v5(n,e){const t=G(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Aw(t)}function w5(n,e,t){const r=G(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function Aw(n){n.Y_.forEach(e=>{e.next()})}var s_,cS;(cS=s_||(s_={})).ea="default",cS.Cache="cache";class Pw{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new dl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==s_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.serializer=e}Es(e){return Ir(this.serializer,e)}ds(e){return e.metadata.exists?C1(this.serializer,e.document,!1):Ce.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ot(e)}}class E5{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cC(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=de.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new dS(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||se()).add(s);t.set(o,a)}}return t}async complete(){const e=await YB(this.localStore,new dS(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await XB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function cC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.key=e}}class hC{constructor(e){this.key=e}}class fC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=l1(e),this.Ra=new Ca(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new lS,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),g=id(this.query,h)?h:null,S=!!p&&this.mutatedKeys.has(p.key),T=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?S!==T&&(r.track({type:3,doc:g}),b=!0):this.ga(p,g)||(r.track({type:2,doc:g}),b=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),b=!0):p&&!g&&(r.track({type:1,doc:p}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),s=T?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,S){const T=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return T(g)-T(S)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new dl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new hC(r))}),this.da.forEach(r=>{e.has(r)||t.push(new dC(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return dl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class T5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class S5{constructor(e){this.key=e,this.va=!1}}class A5{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new bs(a=>o1(a),rd),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(H.comparator),this.Na=new Map,this.La=new fw,this.Ba={},this.ka=new Map,this.qa=ko.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P5(n,e,t=!0){const r=bp(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await pC(r,e,t,!0),i}async function x5(n,e){const t=bp(n);await pC(t,e,!0,!1)}async function pC(n,e,t,r){const i=await ll(n.localStore,tn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await xw(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&xp(n.remoteStore,i),a}async function xw(n,e,t,r,i){n.Ka=(h,p,g)=>async function(T,b,I,_){let y=b.view.ma(I);y.ns&&(y=await Rf(T.localStore,b.query,!1).then(({documents:A})=>b.view.ma(A,y)));const k=_&&_.targetChanges.get(b.targetId),V=_&&_.targetMismatches.get(b.targetId)!=null,j=b.view.applyChanges(y,T.isPrimaryClient,k,V);return o_(T,b.targetId,j.wa),j.snapshot}(n,h,p,g);const s=await Rf(n.localStore,e,!0),o=new fC(e,s.Ts),a=o.ma(s.documents),l=ad.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);o_(n,t,c.wa);const d=new T5(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function b5(n,e,t){const r=G(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!rd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ul(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&cl(r.remoteStore,i.targetId),hl(r,i.targetId)}).catch(Ps)):(hl(r,i.targetId),await ul(r.localStore,i.targetId,!0))}async function R5(n,e){const t=G(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cl(t.remoteStore,r.targetId))}async function C5(n,e,t){const r=kw(n);try{const i=await function(o,a){const l=G(o),c=Me.now(),d=a.reduce((g,S)=>g.add(S.key),se());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let S=mn(),T=se();return l.cs.getEntries(g,d).next(b=>{S=b,S.forEach((I,_)=>{_.isValidDocument()||(T=T.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,S)).next(b=>{h=b;const I=[];for(const _ of a){const y=eB(_,h.get(_.key).overlayedDocument);y!=null&&I.push(new ui(_.key,y,XR(y.value.mapValue),Ve.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,I,a)}).next(b=>{p=b;const I=b.applyToLocalDocumentSet(h,T);return l.documentOverlayCache.saveOverlays(g,b.batchId,I)})}).then(()=>({batchId:p.batchId,changes:c1(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new xe(ie)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),await ci(r,i.changes),await Dl(r.remoteStore)}catch(i){const s=Ol(i,"Failed to persist write");t.reject(s)}}async function mC(n,e){const t=G(n);try{const r=await KB(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Z(o.va):i.removedDocuments.size>0&&(Z(o.va),o.va=!1))}),await ci(t,r,e)}catch(r){await Ps(r)}}function hS(n,e,t){const r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=G(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&Aw(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function k5(n,e,t){const r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new xe(H.comparator);o=o.insert(s,Ce.newNoDocument(s,ee.min()));const a=se().add(s),l=new od(ee.min(),new Map,new xe(ie),o,a);await mC(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Cw(r)}else await ul(r.localStore,e,!1).then(()=>hl(r,e,t)).catch(Ps)}async function D5(n,e){const t=G(n),r=e.batch.batchId;try{const i=await GB(t.localStore,e);Rw(t,r,null),bw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ci(t,i)}catch(i){await Ps(i)}}async function N5(n,e,t){const r=G(n);try{const i=await function(o,a){const l=G(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Z(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Rw(r,e,t),bw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ci(r,i)}catch(i){await Ps(i)}}async function O5(n,e){const t=G(n);Rs(t.remoteStore)||$("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=G(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===-1)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Ol(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function bw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Rw(n,e,t){const r=G(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function hl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||gC(n,r)})}function gC(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(cl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Cw(n))}function o_(n,e,t){for(const r of t)r instanceof dC?(n.La.addReference(r.key,e),V5(n,r)):r instanceof hC?($("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||gC(n,r.key)):X()}function V5(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||($("SyncEngine","New document in limbo: "+t),n.xa.add(r),Cw(n))}function Cw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new H(de.fromString(e)),r=n.qa.next();n.Na.set(r,new S5(t)),n.Oa=n.Oa.insert(t,r),xp(n.remoteStore,new Wr(tn(bl(t.path)),r,"TargetPurposeLimboResolution",fn.oe))}}async function ci(n,e,t){const r=G(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var d;if((c||t)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=t==null?void 0:t.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=gw.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=G(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,p=>M.forEach(p.$i,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>M.forEach(p.Ui,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!xs(h))throw h;$("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const g=d.os.get(p),S=g.snapshotVersion,T=g.withLastLimboFreeSnapshotVersion(S);d.os=d.os.insert(p,T)}}}(r.localStore,s))}async function M5(n,e){const t=G(n);if(!t.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const r=await Y1(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new B(F.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ci(t,r.hs)}}function L5(n,e){const t=G(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function F5(n,e){const t=G(n),r=await Rf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&o_(t,e.targetId,i.wa),i}async function U5(n,e){const t=G(n);return eC(t.localStore,e).then(r=>ci(t,r))}async function j5(n,e,t,r){const i=G(n),s=await function(a,l){const c=G(a),d=G(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):M.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await Dl(i.remoteStore):t==="acknowledged"||t==="rejected"?(Rw(i,e,r||null),bw(i,e),function(a,l){G(G(a).mutationQueue).On(l)}(i.localStore,e)):X(),await ci(i,s)):$("SyncEngine","Cannot apply mutation batch with id: "+e)}async function B5(n,e){const t=G(n);if(bp(t),kw(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await fS(t,r.toArray());t.Qa=!0,await i_(t.remoteStore,!0);for(const s of i)xp(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(hl(t,o),ul(t.localStore,o,!0))),cl(t.remoteStore,o)}),await i,await fS(t,r),function(o){const a=G(o);a.Na.forEach((l,c)=>{cl(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new xe(H.comparator)}(t),t.Qa=!1,await i_(t.remoteStore,!1)}}async function fS(n,e,t){const r=G(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await ll(r.localStore,tn(l[0]));for(const c of l){const d=r.Fa.get(c),h=await F5(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await Z1(r.localStore,o);a=await ll(r.localStore,c),await xw(r,yC(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function yC(n){return s1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $5(n){return function(t){return G(G(t).persistence).Qi()}(G(n).localStore)}async function z5(n,e,t,r){const i=G(n);if(i.Qa)return void $("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await eC(i.localStore,a1(s[0])),a=od.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Xe.EMPTY_BYTE_STRING);await ci(i,o,a);break}case"rejected":await ul(i.localStore,e,!0),hl(i,e,r);break;default:X()}}async function q5(n,e,t){const r=bp(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$("SyncEngine","Adding an already active target "+i);continue}const s=await Z1(r.localStore,i),o=await ll(r.localStore,s);await xw(r,yC(s),o.targetId,!1,o.resumeToken),xp(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&await ul(r.localStore,i,!1).then(()=>{cl(r.remoteStore,i),hl(r,i)}).catch(Ps)}}function bp(n){const e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k5.bind(null,e),e.Ca.d_=v5.bind(null,e.eventManager),e.Ca.$a=w5.bind(null,e.eventManager),e}function kw(n){const e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N5.bind(null,e),e}function W5(n,e,t){const r=G(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,S){const T=G(g),b=ot(S.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",I=>T.Gr.getBundleMetadata(I,S.id)).then(I=>!!I&&I.createTime.compareTo(b)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(cC(l));const c=new E5(l,s.localStore,o.serializer);let d=await o.Ua();for(;d;){const p=await c.la(d);p&&a._updateProgress(p),d=await o.Ua()}const h=await c.complete();return await ci(s,h.Ia,void 0),await function(g,S){const T=G(g);return T.persistence.runTransaction("Save bundle","readwrite",b=>T.Gr.saveBundleMetadata(b,S))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return Sr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ld(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Q1(this.persistence,new K1,e.initialUser,this.serializer)}Ga(e){return new G1(Pp.Zr,this.serializer)}Wa(e){return new nC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class _C extends Cc{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await kw(this.Ja.syncEngine),await Dl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return Q1(this.persistence,new K1,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new RB(r,e.asyncQueue,t)}Ha(e,t){const r=new c3(t,this.persistence);return new u3(e.asyncQueue,r)}Ga(e){const t=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new pw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rC(),Mh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new nC}}class H5 extends _C{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof ig&&(this.sharedClientState.syncEngine={no:j5.bind(null,t),ro:z5.bind(null,t),io:q5.bind(null,t),Qi:$5.bind(null,t),eo:U5.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await B5(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=rC();if(!ig.D(t))throw new B(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ig(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=M5.bind(null,this.syncEngine),await i_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _5}()}createDatastore(e){const t=ld(e.databaseInfo.databaseId),r=function(s){return new t5(s)}(e.databaseInfo);return function(s,o,a,l){return new i5(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new o5(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>hS(this.syncEngine,t,0),function(){return oS.D()?new oS:new JB}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,d){const h=new A5(i,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=G(i);$("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await kl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}kc.provider={build:()=>new kc};function pS(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Ct,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(r);return new I5(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=G(i),a={documents:s.map(h=>bc(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,de.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=uB(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=c.get(h.toString());Z(!!p),d.push(p)}),d}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=H.fromPath(r);this.mutations.push(new iw(i,this.precondition(i)))}),await async function(r,i){const s=G(r),o={writes:i.map(a=>Rc(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,de.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw X();t=ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new B(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?Ve.exists(!1):Ve.updateTime(t):Ve.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new B(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ve.updateTime(t)}return Ve.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new _w(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new K5(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const t=this.updateFunction(e);return!td(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!w1(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=VR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ol(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function og(n,e){n.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Y1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function mS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Dw(n);$("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>aS(e.remoteStore,i)),n._onlineComponents=e}async function Dw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{await og(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Sr("Error using user provided cache. Falling back to memory cache: "+t),await og(n,new Cc)}}else $("FirestoreClient","Using default OfflineComponentProvider"),await og(n,new Cc);return n._offlineComponents}async function Cp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),await mS(n,n._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),await mS(n,new kc))),n._onlineComponents}function vC(n){return Dw(n).then(e=>e.persistence)}function Nw(n){return Dw(n).then(e=>e.localStore)}function wC(n){return Cp(n).then(e=>e.remoteStore)}function Ow(n){return Cp(n).then(e=>e.syncEngine)}function X5(n){return Cp(n).then(e=>e.datastore)}async function fl(n){const e=await Cp(n),t=e.eventManager;return t.onListen=P5.bind(null,e.syncEngine),t.onUnlisten=b5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=x5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=R5.bind(null,e.syncEngine),t}function J5(n){return n.asyncQueue.enqueue(async()=>{const e=await vC(n),t=await wC(n);return e.setNetworkEnabled(!0),function(i){const s=G(i);return s.L_.delete(0),ud(s)}(t)})}function Z5(n){return n.asyncQueue.enqueue(async()=>{const e=await vC(n),t=await wC(n);return e.setNetworkEnabled(!1),async function(i){const s=G(i);s.L_.add(0),await kl(s),s.q_.set("Offline")}(t)})}function e$(n,e){const t=new Ct;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const h=G(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new B(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ol(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Nw(n),e,t)),t.promise}function IC(n,e,t={}){const r=new Ct;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Rp({next:p=>{d.Za(),o.enqueueAndForget(()=>Sw(s,h));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new B(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new B(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Pw(bl(a.path),d,{includeMetadataChanges:!0,_a:!0});return Tw(s,h)}(await fl(n),n.asyncQueue,e,t,r)),r.promise}function t$(n,e){const t=new Ct;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Rf(i,s,!0),l=new fC(s,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ol(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Nw(n),e,t)),t.promise}function EC(n,e,t={}){const r=new Ct;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Rp({next:p=>{d.Za(),o.enqueueAndForget(()=>Sw(s,h)),p.fromCache&&l.source==="server"?c.reject(new B(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Pw(a,d,{includeMetadataChanges:!0,_a:!0});return Tw(s,h)}(await fl(n),n.asyncQueue,e,t,r)),r.promise}function n$(n,e){const t=new Rp(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){G(i).Y_.add(s),s.next()}(await fl(n),t)),()=>{t.Za(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){G(i).Y_.delete(s)}(await fl(n),t))}}function r$(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?E1().encode(o):o,function(d,h){return new G5(d,h)}(function(d,h){if(d instanceof Uint8Array)return pS(d,h);if(d instanceof ArrayBuffer)return pS(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,ld(e));n.asyncQueue.enqueueAndForget(async()=>{W5(await Ow(n),i,r)})}function i$(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=G(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await Nw(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(n,e,t){if(!t)throw new B(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SC(n,e,t,r){if(e===!0&&r===!0)throw new B(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yS(n){if(!H.isDocumentKey(n))throw new B(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _S(n){if(H.isDocumentKey(n))throw new B(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X()}function ye(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kp(n);throw new B(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AC(n,e){if(e<=0)throw new B(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Jj;switch(r.type){case"firstParty":return new n3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=gS.get(t);r&&($("ComponentProvider","Removing Datastore"),gS.delete(t),r.terminate())}(this),Promise.resolve()}}function s$(n,e,t,r={}){var i;const s=(n=ye(n,cd))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=It.MOCK_USER;else{a=mM(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new B(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new It(c)}n._authCredentials=new Zj(new OR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class PC{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new PC(this.firestore,e,this._query)}},Be=class xC{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xC(this.firestore,e,this._key)}},ts=class bC extends nn{constructor(e,t,r){super(e,t,bl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new H(e))}withConverter(e){return new bC(this.firestore,e,this._path)}};function RC(n,e,...t){if(n=ne(n),Vw("collection","path",e),n instanceof cd){const r=de.fromString(e,...t);return _S(r),new ts(n,null,r)}{if(!(n instanceof Be||n instanceof ts))throw new B(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(de.fromString(e,...t));return _S(r),new ts(n.firestore,null,r)}}function o$(n,e){if(n=ye(n,cd),Vw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new nn(n,null,function(r){return new li(de.emptyPath(),r)}(e))}function Nf(n,e,...t){if(n=ne(n),arguments.length===1&&(e=VR.newId()),Vw("doc","path",e),n instanceof cd){const r=de.fromString(e,...t);return yS(r),new Be(n,null,new H(r))}{if(!(n instanceof Be||n instanceof ts))throw new B(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(de.fromString(e,...t));return yS(r),new Be(n.firestore,n instanceof ts?n.converter:null,new H(r))}}function CC(n,e){return n=ne(n),e=ne(e),(n instanceof Be||n instanceof ts)&&(e instanceof Be||e instanceof ts)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kC(n,e){return n=ne(n),e=ne(e),n instanceof nn&&e instanceof nn&&n.firestore===e.firestore&&rd(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _w(this,"async_queue_retry"),this.Vu=()=>{const r=Mh();r&&$("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Mh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Mh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Ct;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xs(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Ew.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function a_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class a${constructor(){this._progressObserver={},this._taskCompletionResolver=new Ct,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=-1;let at=class extends cd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wS(e),this._firestoreClient=void 0,await e}}};function $t(n){if(n._terminated)throw new B(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||DC(n),n._firestoreClient}function DC(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,d){return new D3(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,TC(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Y5(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function u$(n,e){Sr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return NC(n,kc.provider,{build:r=>new _C(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function c$(n){Sr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();NC(n,kc.provider,{build:t=>new H5(t,e.cacheSizeBytes)})}function NC(n,e,t){if((n=ye(n,at))._firestoreClient||n._terminated)throw new B(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new B(F.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},DC(n)}function d$(n){if(n._initialized&&!n._terminated)throw new B(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ct;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!wr.D())return Promise.resolve();const i=r+"main";await wr.delete(i)}(mw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function h$(n){return function(t){const r=new Ct;return t.asyncQueue.enqueueAndForget(async()=>O5(await Ow(t),r)),r.promise}($t(n=ye(n,at)))}function f$(n){return J5($t(n=ye(n,at)))}function p$(n){return Z5($t(n=ye(n,at)))}function m$(n,e){const t=$t(n=ye(n,at)),r=new a$;return r$(t,n._databaseId,e,r),r}function g$(n,e){return i$($t(n=ye(n,at)),e).then(t=>t?new nn(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pr(Xe.fromBase64String(e))}catch(t){throw new B(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pr(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ps=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=/^__.*__$/;class _${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rl(e,this.data,t,this.fieldTransforms)}}class OC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Np{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Np(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Of(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(VC(this.Cu)&&y$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class v${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ld(e)}Qu(e,t,r,i=!1){return new Np({Cu:e,methodName:t,qu:r,path:Oe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uo(n){const e=n._freezeSettings(),t=ld(n._databaseId);return new v$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Op(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);zw("Data must be an object, but it was:",o,r);const a=FC(r,o);let l,c;if(s.merge)l=new pn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=l_(e,h,t);if(!o.contains(p))throw new B(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);jC(d,p)||d.push(p)}l=new pn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new _$(new bt(a),l,c)}class dd extends Fo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dd}}function MC(n,e,t){return new Np({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lw extends Fo{_toFieldTransform(e){return new sd(e.path,new sl)}isEqual(e){return e instanceof Lw}}class Fw extends Fo{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=MC(this,e,!0),r=this.Ku.map(s=>jo(s,t)),i=new xo(r);return new sd(e.path,i)}isEqual(e){return e instanceof Fw&&fc(this.Ku,e.Ku)}}class Uw extends Fo{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=MC(this,e,!0),r=this.Ku.map(s=>jo(s,t)),i=new bo(r);return new sd(e.path,i)}isEqual(e){return e instanceof Uw&&fc(this.Ku,e.Ku)}}class jw extends Fo{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new ol(e.serializer,f1(e.serializer,this.$u));return new sd(e.path,t)}isEqual(e){return e instanceof jw&&this.$u===e.$u}}function Bw(n,e,t,r){const i=n.Qu(1,e,t);zw("Data must be an object, but it was:",i,r);const s=[],o=bt.empty();Lo(r,(l,c)=>{const d=qw(e,l,t);c=ne(c);const h=i.Nu(d);if(c instanceof dd)s.push(d);else{const p=jo(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new pn(s);return new OC(o,a,i.fieldTransforms)}function $w(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[l_(e,r,t)],l=[i];if(s.length%2!=0)throw new B(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(l_(e,s[p])),l.push(s[p+1]);const c=[],d=bt.empty();for(let p=a.length-1;p>=0;--p)if(!jC(c,a[p])){const g=a[p];let S=l[p];S=ne(S);const T=o.Nu(g);if(S instanceof dd)c.push(g);else{const b=jo(S,T);b!=null&&(c.push(g),d.set(g,b))}}const h=new pn(c);return new OC(d,h,o.fieldTransforms)}function LC(n,e,t,r=!1){return jo(t,n.Qu(r?4:3,e))}function jo(n,e){if(UC(n=ne(n)))return zw("Unsupported field value:",e,n),FC(n,e);if(n instanceof Fo)return function(r,i){if(!VC(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=jo(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Me.fromDate(r);return{timestampValue:al(i.serializer,s)}}if(r instanceof Me){const s=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:al(i.serializer,s)}}if(r instanceof Dp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pr)return{bytesValue:A1(i.serializer,r._byteString)};if(r instanceof Be){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mw)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return rw(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${kp(r)}`)}(n,e)}function FC(n,e){const t={};return GR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lo(n,(r,i)=>{const s=jo(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function UC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Me||n instanceof Dp||n instanceof Pr||n instanceof Be||n instanceof Fo||n instanceof Mw)}function zw(n,e,t){if(!UC(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=kp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function l_(n,e,t){if((e=ne(e))instanceof ps)return e._internalPath;if(typeof e=="string")return qw(n,e);throw Of("Field path arguments must be of type string or ",n,!1,void 0,t)}const w$=new RegExp("[~\\*/\\[\\]]");function qw(n,e,t){if(e.search(w$)>=0)throw Of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ps(...e.split("."))._internalPath}catch{throw Of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Of(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new B(F.INVALID_ARGUMENT,a+n+l)}function jC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class I$ extends Dc{data(){return super.data()}}function Vp(n,e){return typeof e=="string"?qw(n,e):e instanceof ps?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}class hd extends Ww{}function _i(n,e,...t){let r=[];e instanceof Ww&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Hw).length,a=s.filter(l=>l instanceof Mp).length;if(o>1||o>0&&a>0)throw new B(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Mp extends hd{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mp(e,t,r)}_apply(e){const t=this._parse(e);return zC(e._query,t),new nn(e.firestore,e.converter,Qy(e._query,t))}_parse(e){const t=Uo(e.firestore);return function(s,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){ES(h,d);const g=[];for(const S of h)g.push(IS(l,s,S));p={arrayValue:{values:g}}}else p=IS(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||ES(h,d),p=LC(a,o,h,d==="in"||d==="not-in");return he.create(c,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function E$(n,e,t){const r=e,i=Vp("where",n);return Mp._create(i,r,t)}class Hw extends Ww{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hw(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ie.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)zC(o,l),o=Qy(o,l)}(e._query,t),new nn(e.firestore,e.converter,Qy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gw extends hd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gw(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new B(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xc(s,o)}(e._query,this._field,this._direction);return new nn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new li(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function T$(n,e="asc"){const t=e,r=Vp("orderBy",n);return Gw._create(r,t)}class Lp extends hd{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Lp(e,t,r)}_apply(e){return new nn(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function S$(n){return AC("limit",n),Lp._create("limit",n,"F")}function A$(n){return AC("limitToLast",n),Lp._create("limitToLast",n,"L")}class Fp extends hd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Fp(e,t,r)}_apply(e){const t=$C(e,this.type,this._docOrFields,this._inclusive);return new nn(e.firestore,e.converter,function(i,s){return new li(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function P$(...n){return Fp._create("startAt",n,!0)}function x$(...n){return Fp._create("startAfter",n,!1)}class Up extends hd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Up(e,t,r)}_apply(e){const t=$C(e,this.type,this._docOrFields,this._inclusive);return new nn(e.firestore,e.converter,function(i,s){return new li(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function b$(...n){return Up._create("endBefore",n,!1)}function R$(...n){return Up._create("endAt",n,!0)}function $C(n,e,t,r){if(t[0]=ne(t[0]),t[0]instanceof Dc)return function(s,o,a,l,c){if(!l)throw new B(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Ra(s))if(h.field.isKeyField())d.push(Ao(o,l.key));else{const p=l.data.field(h.field);if(wp(p))throw new B(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=h.field.canonicalString();throw new B(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new hs(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Uo(n.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new B(F.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let S=0;S<d.length;S++){const T=d[S];if(p[S].field.isKeyField()){if(typeof T!="string")throw new B(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!tw(o)&&T.indexOf("/")!==-1)throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const b=o.path.child(de.fromString(T));if(!H.isDocumentKey(b))throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const I=new H(b);g.push(Ao(a,I))}else{const b=LC(l,c,T);g.push(b)}}return new hs(g,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function IS(n,e,t){if(typeof(t=ne(t))=="string"){if(t==="")throw new B(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tw(e)&&t.indexOf("/")!==-1)throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(de.fromString(t));if(!H.isDocumentKey(r))throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ao(n,new H(r))}if(t instanceof Be)return Ao(n,t._key);throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kp(t)}.`)}function ES(n,e){if(!Array.isArray(n)||n.length===0)throw new B(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zC(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new B(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Kw{convertValue(e,t="none"){switch(So(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Lo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>De(o.doubleValue));return new Mw(s)}convertGeoPoint(e){return new Dp(De(e.latitude),De(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sc(e));default:return null}}convertTimestamp(e){const t=ri(e);return new Me(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=de.fromString(e);Z(M1(r));const i=new cs(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(t)||rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class C$ extends Kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ii=class extends Dc{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Vp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},qu=class extends ii{data(e={}){return super.data(e)}},ms=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qu(this._firestore,this._userDataWriter,r.key,r,new Xs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new qu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new qu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:k$(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function k$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}function qC(n,e){return n instanceof ii&&e instanceof ii?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ms&&e instanceof ms&&n._firestore===e._firestore&&kC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D$(n){n=ye(n,Be);const e=ye(n.firestore,at);return IC($t(e),n._key).then(t=>Qw(e,n,t))}class Bo extends Kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,t)}}function N$(n){n=ye(n,Be);const e=ye(n.firestore,at),t=$t(e),r=new Bo(e);return e$(t,n._key).then(i=>new ii(e,r,n._key,i,new Xs(i!==null&&i.hasLocalMutations,!0),n.converter))}function O$(n){n=ye(n,Be);const e=ye(n.firestore,at);return IC($t(e),n._key,{source:"server"}).then(t=>Qw(e,n,t))}function V$(n){n=ye(n,nn);const e=ye(n.firestore,at),t=$t(e),r=new Bo(e);return BC(n._query),EC(t,n._query).then(i=>new ms(e,r,n,i))}function M$(n){n=ye(n,nn);const e=ye(n.firestore,at),t=$t(e),r=new Bo(e);return t$(t,n._query).then(i=>new ms(e,r,n,i))}function L$(n){n=ye(n,nn);const e=ye(n.firestore,at),t=$t(e),r=new Bo(e);return EC(t,n._query,{source:"server"}).then(i=>new ms(e,r,n,i))}function TS(n,e,t){n=ye(n,Be);const r=ye(n.firestore,at),i=jp(n.converter,e,t);return fd(r,[Op(Uo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ve.none())])}function SS(n,e,t,...r){n=ye(n,Be);const i=ye(n.firestore,at),s=Uo(i);let o;return o=typeof(e=ne(e))=="string"||e instanceof ps?$w(s,"updateDoc",n._key,e,t,r):Bw(s,"updateDoc",n._key,e),fd(i,[o.toMutation(n._key,Ve.exists(!0))])}function F$(n){return fd(ye(n.firestore,at),[new Cl(n._key,Ve.none())])}function U$(n,e){const t=ye(n.firestore,at),r=Nf(n),i=jp(n.converter,e);return fd(t,[Op(Uo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ve.exists(!1))]).then(()=>r)}function WC(n,...e){var t,r,i;n=ne(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||a_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(a_(e[o])){const h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,d;if(n instanceof Be)c=ye(n.firestore,at),d=bl(n._key.path),l={next:h=>{e[o]&&e[o](Qw(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=ye(n,nn);c=ye(h.firestore,at),d=h._query;const p=new Bo(c);l={next:g=>{e[o]&&e[o](new ms(c,p,h,g))},error:e[o+1],complete:e[o+2]},BC(n._query)}return function(p,g,S,T){const b=new Rp(T),I=new Pw(g,b,S);return p.asyncQueue.enqueueAndForget(async()=>Tw(await fl(p),I)),()=>{b.Za(),p.asyncQueue.enqueueAndForget(async()=>Sw(await fl(p),I))}}($t(c),d,a,l)}function j$(n,e){return n$($t(n=ye(n,at)),a_(e)?e:{next:e})}function fd(n,e){return function(r,i){const s=new Ct;return r.asyncQueue.enqueueAndForget(async()=>C5(await Ow(r),i,s)),s.promise}($t(n),e)}function Qw(n,e,t){const r=t.docs.get(e._key),i=new Bo(n);return new ii(n,i,e._key,r,new Xs(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $$=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Uo(e)}set(e,t,r){this._verifyNotCommitted();const i=xi(e,this._firestore),s=jp(i.converter,t,r),o=Op(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ve.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=xi(e,this._firestore);let o;return o=typeof(t=ne(t))=="string"||t instanceof ps?$w(this._dataReader,"WriteBatch.update",s._key,t,r,i):Bw(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ve.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xi(e,this._firestore);return this._mutations=this._mutations.concat(new Cl(t._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function xi(n,e){if((n=ne(n)).firestore!==e)throw new B(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z$=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Uo(t)}get(t){const r=xi(t,this._firestore),i=new C$(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return X();const o=s[0];if(o.isFoundDocument())return new Dc(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Dc(this._firestore,i,r._key,null,r.converter);throw X()})}set(t,r,i){const s=xi(t,this._firestore),o=jp(s.converter,r,i),a=Op(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=xi(t,this._firestore);let a;return a=typeof(r=ne(r))=="string"||r instanceof ps?$w(this._dataReader,"Transaction.update",o._key,r,i,s):Bw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=xi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xi(e,this._firestore),r=new Bo(this._firestore);return super.get(e).then(i=>new ii(this._firestore,r,t._key,i._document,new Xs(!1,!1),t.converter))}};function q$(n,e,t){n=ye(n,at);const r=Object.assign(Object.assign({},B$),t);return function(s){if(s.maxAttempts<1)throw new B(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Ct;return s.asyncQueue.enqueueAndForget(async()=>{const c=await X5(s);new Q5(s.asyncQueue,c,a,o,l).au()}),l.promise}($t(n),i=>e(new z$(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(){return new dd("deleteField")}function H$(){return new Lw("serverTimestamp")}function G$(...n){return new Fw("arrayUnion",n)}function K$(...n){return new Uw("arrayRemove",n)}function Q$(n){return new jw("increment",n)}(function(e,t=!0){(function(i){xl=i})(Ss),as(new Er("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new at(new e3(r.getProvider("auth-internal")),new i3(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new B(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cs(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xn(fT,"4.7.3",e),Xn(fT,"4.7.3","esm2017")})();const Y$="@firebase/firestore-compat",X$="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function PS(){if(!C3())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Nc{constructor(e){this._delegate=e}static fromBase64String(e){return PS(),new Nc(Pr.fromBase64String(e))}static fromUint8Array(e){return AS(),new Nc(Pr.fromUint8Array(e))}toBase64(){return PS(),this._delegate.toBase64()}toUint8Array(){return AS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(n){return J$(n,["next","error","complete"])}function J$(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${enableIndexedDbPersistence(e,t){return u$(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return c$(e._delegate)}clearIndexedDbPersistence(e){return d$(e._delegate)}}class HC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof cs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){s$(this._delegate,e,t,r)}enableNetwork(){return f$(this._delegate)}disableNetwork(){return p$(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,SC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return h$(this._delegate)}onSnapshotsInSync(e){return j$(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pl(this,RC(this._delegate,e))}catch(t){throw Yt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Mn(this,Nf(this._delegate,e))}catch(t){throw Yt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Kt(this,o$(this._delegate,e))}catch(t){throw Yt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return q$(this._delegate,t=>e(new GC(this,t)))}batch(){return $t(this._delegate),new KC(new $$(this._delegate,e=>fd(this._delegate,e)))}loadBundle(e){return m$(this._delegate,e)}namedQuery(e){return g$(this._delegate,e).then(t=>t?new Kt(this,t):null)}}class Bp extends Kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nc(new Pr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Mn.forKey(t,this.firestore,null)}}function e6(n){Yj(n)}class GC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bp(e)}get(e){const t=Js(e);return this._delegate.get(t).then(r=>new Oc(this._firestore,new ii(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Js(e);return r?(Yw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Js(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Js(e);return this._delegate.delete(t),this}}class KC{constructor(e){this._delegate=e}set(e,t,r){const i=Js(e);return r?(Yw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Js(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Js(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Do{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new qu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Do.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Do(e,new Bp(e),t),i.set(t,s)),s}}Do.INSTANCES=new WeakMap;class Mn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Mn(t,new Be(t._delegate,r,new H(e)))}static forKey(e,t,r){return new Mn(t,new Be(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new pl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pl(this.firestore,RC(this._delegate,e))}catch(t){throw Yt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ne(e),e instanceof Be?CC(this._delegate,e):!1}set(e,t){t=Yw("DocumentReference.set",t);try{return t?TS(this._delegate,e,t):TS(this._delegate,e)}catch(r){throw Yt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?SS(this._delegate,e):SS(this._delegate,e,t,...r)}catch(i){throw Yt(i,"updateDoc()","DocumentReference.update()")}}delete(){return F$(this._delegate)}onSnapshot(...e){const t=QC(e),r=YC(e,i=>new Oc(this.firestore,new ii(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WC(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=N$(this._delegate):(e==null?void 0:e.source)==="server"?t=O$(this._delegate):t=D$(this._delegate),t.then(r=>new Oc(this.firestore,new ii(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Mn(this.firestore,e?this._delegate.withConverter(Do.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Yt(n,e,t){return n.message=n.message.replace(e,t),n}function QC(n){for(const e of n)if(typeof e=="object"&&!u_(e))return e;return{}}function YC(n,e){var t,r;let i;return u_(n[0])?i=n[0]:u_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Oc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Mn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qC(this._delegate,e._delegate)}}class Vc extends Oc{data(e){const t=this._delegate.data(e);return this._delegate._converter||Xj(t!==void 0),t}}class Kt{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bp(e)}where(e,t,r){try{return new Kt(this.firestore,_i(this._delegate,E$(e,t,r)))}catch(i){throw Yt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Kt(this.firestore,_i(this._delegate,T$(e,t)))}catch(r){throw Yt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Kt(this.firestore,_i(this._delegate,S$(e)))}catch(t){throw Yt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Kt(this.firestore,_i(this._delegate,A$(e)))}catch(t){throw Yt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Kt(this.firestore,_i(this._delegate,P$(...e)))}catch(t){throw Yt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Kt(this.firestore,_i(this._delegate,x$(...e)))}catch(t){throw Yt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Kt(this.firestore,_i(this._delegate,b$(...e)))}catch(t){throw Yt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Kt(this.firestore,_i(this._delegate,R$(...e)))}catch(t){throw Yt(t,"endAt()","Query.endAt()")}}isEqual(e){return kC(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=M$(this._delegate):(e==null?void 0:e.source)==="server"?t=L$(this._delegate):t=V$(this._delegate),t.then(r=>new c_(this.firestore,new ms(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=QC(e),r=YC(e,i=>new c_(this.firestore,new ms(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WC(this._delegate,t,r)}withConverter(e){return new Kt(this.firestore,e?this._delegate.withConverter(Do.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class t6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class c_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Kt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new t6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Vc(this._firestore,r))})}isEqual(e){return qC(this._delegate,e._delegate)}}class pl extends Kt{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Mn(this.firestore,e):null}doc(e){try{return e===void 0?new Mn(this.firestore,Nf(this._delegate)):new Mn(this.firestore,Nf(this._delegate,e))}catch(t){throw Yt(t,"doc()","CollectionReference.doc()")}}add(e){return U$(this._delegate,e).then(t=>new Mn(this.firestore,t))}isEqual(e){return CC(this._delegate,e._delegate)}withConverter(e){return new pl(this.firestore,e?this._delegate.withConverter(Do.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Js(n){return ye(n,Be)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(...e){this._delegate=new ps(...e)}static documentId(){return new Xw(Oe.keyField().canonicalString())}isEqual(e){return e=ne(e),e instanceof ps?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._delegate=e}static serverTimestamp(){const e=H$();return e._methodName="FieldValue.serverTimestamp",new Hs(e)}static delete(){const e=W$();return e._methodName="FieldValue.delete",new Hs(e)}static arrayUnion(...e){const t=G$(...e);return t._methodName="FieldValue.arrayUnion",new Hs(t)}static arrayRemove(...e){const t=K$(...e);return t._methodName="FieldValue.arrayRemove",new Hs(t)}static increment(e){const t=Q$(e);return t._methodName="FieldValue.increment",new Hs(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={Firestore:HC,GeoPoint:Dp,Timestamp:Me,Blob:Nc,Transaction:GC,WriteBatch:KC,DocumentReference:Mn,DocumentSnapshot:Oc,Query:Kt,QueryDocumentSnapshot:Vc,QuerySnapshot:c_,CollectionReference:pl,FieldPath:Xw,FieldValue:Hs,setLogLevel:e6,CACHE_SIZE_UNLIMITED:l$};function r6(n,e){n.INTERNAL.registerComponent(new Er("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},n6)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(n){r6(n,(e,t)=>new HC(e,t,new Z$)),n.registerVersion(Y$,X$)}i6(vr);const s6={apiKey:"AIzaSyBHsXEPlISYSp19ZLUTFU-nzNreKaIU13Y",authDomain:"traveller365.firebaseapp.com",projectId:"traveller365",storageBucket:"traveller365.firebasestorage.app",messagingSenderId:"103148920406",appId:"1:103148920406:web:1cac2a2a402ca5fe0325f7"};vr.apps.length?vr.app():vr.initializeApp(s6);const gs=vr.auth(),o6=vr.firestore(),XC=L.createContext(void 0),a6=({children:n})=>{const[e,t]=L.useState(null),[r,i]=L.useState(!0);return L.useEffect(()=>{const s=gs.onAuthStateChanged(o=>{t(o),i(!1)});return()=>s()},[]),E.jsx(XC.Provider,{value:{user:e,loading:r},children:n})},pd=()=>{const n=L.useContext(XC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n};let oh;const l6=new Uint8Array(16);function u6(){if(!oh&&(oh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!oh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oh(l6)}const At=[];for(let n=0;n<256;++n)At.push((n+256).toString(16).slice(1));function c6(n,e=0){return At[n[e+0]]+At[n[e+1]]+At[n[e+2]]+At[n[e+3]]+"-"+At[n[e+4]]+At[n[e+5]]+"-"+At[n[e+6]]+At[n[e+7]]+"-"+At[n[e+8]]+At[n[e+9]]+"-"+At[n[e+10]]+At[n[e+11]]+At[n[e+12]]+At[n[e+13]]+At[n[e+14]]+At[n[e+15]]}const d6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xS={randomUUID:d6};function Vf(n,e,t){if(xS.randomUUID&&!n)return xS.randomUUID();n=n||{};const r=n.random||(n.rng||u6)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,c6(r)}const d_=(n,e)=>e.some(t=>n instanceof t);let bS,RS;function h6(){return bS||(bS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f6(){return RS||(RS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h_=new WeakMap,ag=new WeakMap,$p=new WeakMap;function p6(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(fo(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return $p.set(e,n),e}function m6(n){if(h_.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});h_.set(n,e)}let f_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return h_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JC(n){f_=n(f_)}function g6(n){return f6().includes(n)?function(...e){return n.apply(p_(this),e),fo(this.request)}:function(...e){return fo(n.apply(p_(this),e))}}function y6(n){return typeof n=="function"?g6(n):(n instanceof IDBTransaction&&m6(n),d_(n,h6())?new Proxy(n,f_):n)}function fo(n){if(n instanceof IDBRequest)return p6(n);if(ag.has(n))return ag.get(n);const e=y6(n);return e!==n&&(ag.set(n,e),$p.set(e,n)),e}const p_=n=>$p.get(n);function _6(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=fo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(fo(o.result),l.oldVersion,l.newVersion,fo(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const v6=["get","getKey","getAll","getAllKeys","count"],w6=["put","add","delete","clear"],lg=new Map;function CS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=w6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||v6.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return lg.set(e,s),s}JC(n=>({...n,get:(e,t,r)=>CS(e,t)||n.get(e,t,r),has:(e,t)=>!!CS(e,t)||n.has(e,t)}));const I6=["continue","continuePrimaryKey","advance"],kS={},m_=new WeakMap,ZC=new WeakMap,E6={get(n,e){if(!I6.includes(e))return n[e];let t=kS[e];return t||(t=kS[e]=function(...r){m_.set(this,ZC.get(this)[e](...r))}),t}};async function*T6(...n){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...n)),!e)return;e=e;const t=new Proxy(e,E6);for(ZC.set(t,e),$p.set(t,p_(e));e;)yield t,e=await(m_.get(t)||e.continue()),m_.delete(t)}function DS(n,e){return e===Symbol.asyncIterator&&d_(n,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&d_(n,[IDBIndex,IDBObjectStore])}JC(n=>({...n,get(e,t,r){return DS(e,t)?T6:n.get(e,t,r)},has(e,t){return DS(e,t)||n.has(e,t)}}));const S6="india-travel-log-db",A6=1;let ug=null;const Cs=()=>(ug||(ug=_6(S6,A6,{upgrade(n){n.objectStoreNames.contains("events")||n.createObjectStore("events",{keyPath:"id"}).createIndex("by-userId-occurredAt",["userId","occurredAt"]),n.objectStoreNames.contains("queue")||n.createObjectStore("queue",{keyPath:"id"}).createIndex("by-enqueuedAt","enqueuedAt"),n.objectStoreNames.contains("summaryCache")||n.createObjectStore("summaryCache",{keyPath:"key"})}})),ug),g_=async n=>(await Cs()).getAllFromIndex("events","by-userId-occurredAt",IDBKeyRange.bound([n,""],[n,""])),zp=async n=>{await(await Cs()).put("events",n)},ek=async n=>{await(await Cs()).delete("events",n)},P6=async()=>(await Cs()).getAllFromIndex("queue","by-enqueuedAt"),Jw=async n=>{await(await Cs()).put("queue",n)},x6=async n=>{await(await Cs()).delete("queue",n)},b6=async()=>(await Cs()).get("summaryCache","last-summary"),R6=async n=>{await(await Cs()).put("summaryCache",{...n,key:"last-summary"})};function ae(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Ge(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Zw(n,e){const t=ae(n);return isNaN(e)?Ge(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const tk=6048e5,C6=864e5,qp=6e4,e0=36e5,k6=1e3,ah=43200,NS=1440;let D6={};function $o(){return D6}function ys(n,e){var a,l,c,d;const t=$o(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((d=(c=t.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=ae(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ml(n){return ys(n,{weekStartsOn:1})}function nk(n){const e=ae(n),t=e.getFullYear(),r=Ge(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=ml(r),s=Ge(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=ml(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function OS(n){const e=ae(n);return e.setHours(0,0,0,0),e}function gl(n){const e=ae(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function N6(n,e){const t=OS(n),r=OS(e),i=+t-gl(t),s=+r-gl(r);return Math.round((i-s)/C6)}function O6(n){const e=nk(n),t=Ge(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ml(t)}function Lh(n,e){const t=ae(n),r=ae(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}function V6(n){return Ge(n,Date.now())}function M6(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function L6(n){if(!M6(n)&&typeof n!="number")return!1;const e=ae(n);return!isNaN(Number(e))}function F6(n,e){const t=ae(n),r=ae(e),i=t.getFullYear()-r.getFullYear(),s=t.getMonth()-r.getMonth();return i*12+s}function rk(n){return e=>{const t=Math.trunc,r=t(e);return r===0?0:r}}function ns(n,e){return+ae(n)-+ae(e)}function U6(n,e,t){const r=ns(n,e)/qp;return rk()(r)}function j6(n){const e=ae(n);return e.setHours(23,59,59,999),e}function B6(n){const e=ae(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function $6(n){const e=ae(n);return+j6(e)==+B6(e)}function z6(n,e){const t=ae(n),r=ae(e),i=Lh(t,r),s=Math.abs(F6(t,r));let o;if(s<1)o=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-i*s);let a=Lh(t,r)===-i;$6(ae(n))&&s===1&&Lh(n,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function q6(n,e,t){const r=ns(n,e)/1e3;return rk()(r)}function W6(n){const e=ae(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function H6(n){const e=ae(n),t=Ge(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const G6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},K6=(n,e,t)=>{let r;const i=G6[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function cg(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Q6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Y6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},X6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},J6={date:cg({formats:Q6,defaultWidth:"full"}),time:cg({formats:Y6,defaultWidth:"full"}),dateTime:cg({formats:X6,defaultWidth:"full"})},Z6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ez=(n,e,t,r)=>Z6[n];function du(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const tz={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nz={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rz={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iz={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},az=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},lz={ordinalNumber:az,era:du({values:tz,defaultWidth:"wide"}),quarter:du({values:nz,defaultWidth:"wide",argumentCallback:n=>n-1}),month:du({values:rz,defaultWidth:"wide"}),day:du({values:iz,defaultWidth:"wide"}),dayPeriod:du({values:sz,defaultWidth:"wide",formattingValues:oz,defaultFormattingWidth:"wide"})};function hu(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?cz(a,h=>h.test(o)):uz(a,h=>h.test(o));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function uz(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function cz(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function dz(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const hz=/^(\d+)(th|st|nd|rd)?/i,fz=/\d+/i,pz={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mz={any:[/^b/i,/^(a|c)/i]},gz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yz={any:[/1/i,/2/i,/3/i,/4/i]},_z={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vz={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Iz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ez={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Sz={ordinalNumber:dz({matchPattern:hz,parsePattern:fz,valueCallback:n=>parseInt(n,10)}),era:hu({matchPatterns:pz,defaultMatchWidth:"wide",parsePatterns:mz,defaultParseWidth:"any"}),quarter:hu({matchPatterns:gz,defaultMatchWidth:"wide",parsePatterns:yz,defaultParseWidth:"any",valueCallback:n=>n+1}),month:hu({matchPatterns:_z,defaultMatchWidth:"wide",parsePatterns:vz,defaultParseWidth:"any"}),day:hu({matchPatterns:wz,defaultMatchWidth:"wide",parsePatterns:Iz,defaultParseWidth:"any"}),dayPeriod:hu({matchPatterns:Ez,defaultMatchWidth:"any",parsePatterns:Tz,defaultParseWidth:"any"})},t0={code:"en-US",formatDistance:K6,formatLong:J6,formatRelative:ez,localize:lz,match:Sz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Az(n){const e=ae(n);return N6(e,H6(e))+1}function ik(n){const e=ae(n),t=+ml(e)-+O6(e);return Math.round(t/tk)+1}function n0(n,e){var d,h,p,g;const t=ae(n),r=t.getFullYear(),i=$o(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(p=i.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=Ge(n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=ys(o,e),l=Ge(n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=ys(l,e);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function Pz(n,e){var a,l,c,d;const t=$o(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(c=t.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=n0(n,e),s=Ge(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),ys(s,e)}function sk(n,e){const t=ae(n),r=+ys(t,e)-+Pz(t,e);return Math.round(r/tk)+1}function we(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const vi={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return we(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):we(t+1,2)},d(n,e){return we(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return we(n.getHours()%12||12,e.length)},H(n,e){return we(n.getHours(),e.length)},m(n,e){return we(n.getMinutes(),e.length)},s(n,e){return we(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return we(i,e.length)}},Zo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VS={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return vi.y(n,e)},Y:function(n,e,t,r){const i=n0(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return we(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):we(s,e.length)},R:function(n,e){const t=nk(n);return we(t,e.length)},u:function(n,e){const t=n.getFullYear();return we(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return we(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return we(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return vi.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return we(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=sk(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):we(i,e.length)},I:function(n,e,t){const r=ik(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):we(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):vi.d(n,e)},D:function(n,e,t){const r=Az(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):we(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return we(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return we(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return we(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Zo.noon:r===0?i=Zo.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Zo.evening:r>=12?i=Zo.afternoon:r>=4?i=Zo.morning:i=Zo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return vi.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):vi.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):we(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):we(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):vi.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):vi.s(n,e)},S:function(n,e){return vi.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return LS(r);case"XXXX":case"XX":return Bs(r);case"XXXXX":case"XXX":default:return Bs(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return LS(r);case"xxxx":case"xx":return Bs(r);case"xxxxx":case"xxx":default:return Bs(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+MS(r,":");case"OOOO":default:return"GMT"+Bs(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+MS(r,":");case"zzzz":default:return"GMT"+Bs(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return we(r,e.length)},T:function(n,e,t){const r=n.getTime();return we(r,e.length)}};function MS(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+we(s,2)}function LS(n,e){return n%60===0?(n>0?"-":"+")+we(Math.abs(n)/60,2):Bs(n,e)}function Bs(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=we(Math.trunc(r/60),2),s=we(r%60,2);return t+i+e+s}const FS=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ok=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},xz=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return FS(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",FS(r,e)).replace("{{time}}",ok(i,e))},y_={p:ok,P:xz},bz=/^D+$/,Rz=/^Y+$/,Cz=["D","DD","YY","YYYY"];function ak(n){return bz.test(n)}function lk(n){return Rz.test(n)}function __(n,e,t){const r=kz(n,e,t);if(console.warn(r),Cz.includes(n))throw new RangeError(r)}function kz(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Dz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oz=/^'([^]*?)'?$/,Vz=/''/g,Mz=/[a-zA-Z]/;function zi(n,e,t){var d,h,p,g,S,T,b,I;const r=$o(),i=(t==null?void 0:t.locale)??r.locale??t0,s=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((T=(S=t==null?void 0:t.locale)==null?void 0:S.options)==null?void 0:T.weekStartsOn)??r.weekStartsOn??((I=(b=r.locale)==null?void 0:b.options)==null?void 0:I.weekStartsOn)??0,a=ae(n);if(!L6(a))throw new RangeError("Invalid time value");let l=e.match(Nz).map(_=>{const y=_[0];if(y==="p"||y==="P"){const k=y_[y];return k(_,i.formatLong)}return _}).join("").match(Dz).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const y=_[0];if(y==="'")return{isToken:!1,value:Lz(_)};if(VS[y])return{isToken:!0,value:_};if(y.match(Mz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(_=>{if(!_.isToken)return _.value;const y=_.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&lk(y)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&ak(y))&&__(y,e,String(n));const k=VS[y[0]];return k(a,y,i.localize,c)}).join("")}function Lz(n){const e=n.match(Oz);return e?e[1].replace(Vz,"'"):n}function Fz(n,e,t){const r=$o(),i=(t==null?void 0:t.locale)??r.locale??t0,s=2520,o=Lh(n,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:o});let l,c;o>0?(l=ae(e),c=ae(n)):(l=ae(n),c=ae(e));const d=q6(c,l),h=(gl(c)-gl(l))/1e3,p=Math.round((d-h)/60);let g;if(p<2)return t!=null&&t.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,a):d<10?i.formatDistance("lessThanXSeconds",10,a):d<20?i.formatDistance("lessThanXSeconds",20,a):d<40?i.formatDistance("halfAMinute",0,a):d<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):p===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",p,a);if(p<45)return i.formatDistance("xMinutes",p,a);if(p<90)return i.formatDistance("aboutXHours",1,a);if(p<NS){const S=Math.round(p/60);return i.formatDistance("aboutXHours",S,a)}else{if(p<s)return i.formatDistance("xDays",1,a);if(p<ah){const S=Math.round(p/NS);return i.formatDistance("xDays",S,a)}else if(p<ah*2)return g=Math.round(p/ah),i.formatDistance("aboutXMonths",g,a)}if(g=z6(c,l),g<12){const S=Math.round(p/ah);return i.formatDistance("xMonths",S,a)}else{const S=g%12,T=Math.trunc(g/12);return S<3?i.formatDistance("aboutXYears",T,a):S<9?i.formatDistance("overXYears",T,a):i.formatDistance("almostXYears",T+1,a)}}function Uz(n,e){return Fz(n,V6(n),e)}function uk(){return Object.assign({},$o())}function jz(n){let t=ae(n).getDay();return t===0&&(t=7),t}function Bz(n){return ae(n).getMonth()}function ck(n){return ae(n).getFullYear()}function US(n,e){const t=ae(n),r=ae(e);return t.getTime()>r.getTime()}function $z(n,e){const t=ae(n),r=ae(e);return+t<+r}function zz(n,e){const t=e instanceof Date?Ge(e,0):new e(0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}const qz=10;class dk{constructor(){Y(this,"subPriority",0)}validate(e,t){return!0}}class Wz extends dk{constructor(e,t,r,i,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class Hz extends dk{constructor(){super(...arguments);Y(this,"priority",qz);Y(this,"subPriority",-1)}set(t,r){return r.timestampIsSet?t:Ge(t,zz(t,Date))}}class _e{run(e,t,r,i){const s=this.parse(e,t,r,i);return s?{setter:new Wz(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class Gz extends _e{constructor(){super(...arguments);Y(this,"priority",140);Y(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const it={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},dr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function st(n,e){return n&&{value:e(n.value),rest:n.rest}}function Ue(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function hr(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:r*(i*e0+s*qp+o*k6),rest:e.slice(t[0].length)}}function hk(n){return Ue(it.anyDigitsSigned,n)}function Je(n,e){switch(n){case 1:return Ue(it.singleDigit,e);case 2:return Ue(it.twoDigits,e);case 3:return Ue(it.threeDigits,e);case 4:return Ue(it.fourDigits,e);default:return Ue(new RegExp("^\\d{1,"+n+"}"),e)}}function Mf(n,e){switch(n){case 1:return Ue(it.singleDigitSigned,e);case 2:return Ue(it.twoDigitsSigned,e);case 3:return Ue(it.threeDigitsSigned,e);case 4:return Ue(it.fourDigitsSigned,e);default:return Ue(new RegExp("^-?\\d{1,"+n+"}"),e)}}function r0(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function fk(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=n>=s%100;i=n+o-(a?100:0)}return t?i:1-i}function pk(n){return n%400===0||n%4===0&&n%100!==0}class Kz extends _e{constructor(){super(...arguments);Y(this,"priority",130);Y(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return st(Je(4,t),s);case"yo":return st(i.ordinalNumber(t,{unit:"year"}),s);default:return st(Je(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const s=t.getFullYear();if(i.isTwoDigitYear){const a=fk(i.year,s);return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}const o=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class Qz extends _e{constructor(){super(...arguments);Y(this,"priority",130);Y(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return st(Je(4,t),s);case"Yo":return st(i.ordinalNumber(t,{unit:"year"}),s);default:return st(Je(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,s){const o=n0(t,s);if(i.isTwoDigitYear){const l=fk(i.year,o);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),ys(t,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(a,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),ys(t,s)}}class Yz extends _e{constructor(){super(...arguments);Y(this,"priority",130);Y(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return Mf(r==="R"?4:r.length,t)}set(t,r,i){const s=Ge(t,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),ml(s)}}class Xz extends _e{constructor(){super(...arguments);Y(this,"priority",130);Y(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return Mf(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class Jz extends _e{constructor(){super(...arguments);Y(this,"priority",120);Y(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return Je(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class Zz extends _e{constructor(){super(...arguments);Y(this,"priority",120);Y(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return Je(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class e9 extends _e{constructor(){super(...arguments);Y(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Y(this,"priority",110)}parse(t,r,i){const s=o=>o-1;switch(r){case"M":return st(Ue(it.month,t),s);case"MM":return st(Je(2,t),s);case"Mo":return st(i.ordinalNumber(t,{unit:"month"}),s);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class t9 extends _e{constructor(){super(...arguments);Y(this,"priority",110);Y(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const s=o=>o-1;switch(r){case"L":return st(Ue(it.month,t),s);case"LL":return st(Je(2,t),s);case"Lo":return st(i.ordinalNumber(t,{unit:"month"}),s);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function n9(n,e,t){const r=ae(n),i=sk(r,t)-e;return r.setDate(r.getDate()-i*7),r}class r9 extends _e{constructor(){super(...arguments);Y(this,"priority",100);Y(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return Ue(it.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Je(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,s){return ys(n9(t,i,s),s)}}function i9(n,e){const t=ae(n),r=ik(t)-e;return t.setDate(t.getDate()-r*7),t}class s9 extends _e{constructor(){super(...arguments);Y(this,"priority",100);Y(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return Ue(it.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Je(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return ml(i9(t,i))}}const o9=[31,28,31,30,31,30,31,31,30,31,30,31],a9=[31,29,31,30,31,30,31,31,30,31,30,31];class l9 extends _e{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"subPriority",1);Y(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return Ue(it.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Je(r.length,t)}}validate(t,r){const i=t.getFullYear(),s=pk(i),o=t.getMonth();return s?r>=1&&r<=a9[o]:r>=1&&r<=o9[o]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class u9 extends _e{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"subpriority",1);Y(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return Ue(it.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Je(r.length,t)}}validate(t,r){const i=t.getFullYear();return pk(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function i0(n,e,t){var h,p,g,S;const r=$o(),i=(t==null?void 0:t.weekStartsOn)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((S=(g=r.locale)==null?void 0:g.options)==null?void 0:S.weekStartsOn)??0,s=ae(n),o=s.getDay(),l=(e%7+7)%7,c=7-i,d=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Zw(s,d)}class c9 extends _e{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=i0(t,i,s),t.setHours(0,0,0,0),t}}class d9 extends _e{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return st(Je(r.length,t),o);case"eo":return st(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=i0(t,i,s),t.setHours(0,0,0,0),t}}class h9 extends _e{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return st(Je(r.length,t),o);case"co":return st(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=i0(t,i,s),t.setHours(0,0,0,0),t}}function f9(n,e){const t=ae(n),r=jz(t),i=e-r;return Zw(t,i)}class p9 extends _e{constructor(){super(...arguments);Y(this,"priority",90);Y(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Je(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return st(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return st(i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return st(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return st(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=f9(t,i),t.setHours(0,0,0,0),t}}class m9 extends _e{constructor(){super(...arguments);Y(this,"priority",80);Y(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(r0(i),0,0,0),t}}class g9 extends _e{constructor(){super(...arguments);Y(this,"priority",80);Y(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(r0(i),0,0,0),t}}class y9 extends _e{constructor(){super(...arguments);Y(this,"priority",80);Y(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(r0(i),0,0,0),t}}class _9 extends _e{constructor(){super(...arguments);Y(this,"priority",70);Y(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return Ue(it.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Je(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const s=t.getHours()>=12;return s&&i<12?t.setHours(i+12,0,0,0):!s&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class v9 extends _e{constructor(){super(...arguments);Y(this,"priority",70);Y(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return Ue(it.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Je(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class w9 extends _e{constructor(){super(...arguments);Y(this,"priority",70);Y(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return Ue(it.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Je(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class I9 extends _e{constructor(){super(...arguments);Y(this,"priority",70);Y(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return Ue(it.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Je(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const s=i<=24?i%24:i;return t.setHours(s,0,0,0),t}}class E9 extends _e{constructor(){super(...arguments);Y(this,"priority",60);Y(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return Ue(it.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Je(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class T9 extends _e{constructor(){super(...arguments);Y(this,"priority",50);Y(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return Ue(it.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Je(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class S9 extends _e{constructor(){super(...arguments);Y(this,"priority",30);Y(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return st(Je(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class A9 extends _e{constructor(){super(...arguments);Y(this,"priority",10);Y(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return hr(dr.basicOptionalMinutes,t);case"XX":return hr(dr.basic,t);case"XXXX":return hr(dr.basicOptionalSeconds,t);case"XXXXX":return hr(dr.extendedOptionalSeconds,t);case"XXX":default:return hr(dr.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Ge(t,t.getTime()-gl(t)-i)}}class P9 extends _e{constructor(){super(...arguments);Y(this,"priority",10);Y(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return hr(dr.basicOptionalMinutes,t);case"xx":return hr(dr.basic,t);case"xxxx":return hr(dr.basicOptionalSeconds,t);case"xxxxx":return hr(dr.extendedOptionalSeconds,t);case"xxx":default:return hr(dr.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Ge(t,t.getTime()-gl(t)-i)}}class x9 extends _e{constructor(){super(...arguments);Y(this,"priority",40);Y(this,"incompatibleTokens","*")}parse(t){return hk(t)}set(t,r,i){return[Ge(t,i*1e3),{timestampIsSet:!0}]}}class b9 extends _e{constructor(){super(...arguments);Y(this,"priority",20);Y(this,"incompatibleTokens","*")}parse(t){return hk(t)}set(t,r,i){return[Ge(t,i),{timestampIsSet:!0}]}}const R9={G:new Gz,y:new Kz,Y:new Qz,R:new Yz,u:new Xz,Q:new Jz,q:new Zz,M:new e9,L:new t9,w:new r9,I:new s9,d:new l9,D:new u9,E:new c9,e:new d9,c:new h9,i:new p9,a:new m9,b:new g9,B:new y9,h:new _9,H:new v9,K:new w9,k:new I9,m:new E9,s:new T9,S:new S9,X:new A9,x:new P9,t:new x9,T:new b9},C9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D9=/^'([^]*?)'?$/,N9=/''/g,O9=/\S/,V9=/[a-zA-Z]/;function jS(n,e,t,r){var T,b,I,_;const i=uk(),s=i.locale??t0,o=i.firstWeekContainsDate??((b=(T=i.locale)==null?void 0:T.options)==null?void 0:b.firstWeekContainsDate)??1,a=i.weekStartsOn??((_=(I=i.locale)==null?void 0:I.options)==null?void 0:_.weekStartsOn)??0,l={firstWeekContainsDate:o,weekStartsOn:a,locale:s},c=[new Hz],d=e.match(k9).map(y=>{const k=y[0];if(k in y_){const V=y_[k];return V(y,s.formatLong)}return y}).join("").match(C9),h=[];for(let y of d){lk(y)&&__(y,e,n),ak(y)&&__(y,e,n);const k=y[0],V=R9[k];if(V){const{incompatibleTokens:j}=V;if(Array.isArray(j)){const v=h.find(x=>j.includes(x.token)||x.token===k);if(v)throw new RangeError(`The format string mustn't contain \`${v.fullToken}\` and \`${y}\` at the same time`)}else if(V.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${y}\` and any other token at the same time`);h.push({token:k,fullToken:y});const A=V.run(n,y,s.match,l);if(!A)return Ge(t,NaN);c.push(A.setter),n=A.rest}else{if(k.match(V9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");if(y==="''"?y="'":k==="'"&&(y=M9(y)),n.indexOf(y)===0)n=n.slice(y.length);else return Ge(t,NaN)}}if(n.length>0&&O9.test(n))return Ge(t,NaN);const p=c.map(y=>y.priority).sort((y,k)=>k-y).filter((y,k,V)=>V.indexOf(y)===k).map(y=>c.filter(k=>k.priority===y).sort((k,V)=>V.subPriority-k.subPriority)).map(y=>y[0]);let g=ae(t);if(isNaN(g.getTime()))return Ge(t,NaN);const S={};for(const y of p){if(!y.validate(g,l))return Ge(t,NaN);const k=y.set(g,S,l);Array.isArray(k)?(g=k[0],Object.assign(S,k[1])):g=k}return Ge(t,g)}function M9(n){return n.match(D9)[1].replace(N9,"'")}function BS(n,e){return Zw(n,-e)}function dn(n,e){const r=j9(n);let i;if(r.date){const l=B9(r.date,2);i=$9(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(r.time&&(o=z9(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(a=q9(r.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const lh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},L9=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,F9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,U9=/^([+-])(\d{2})(?::?(\d{2}))?$/;function j9(n){const e={},t=n.split(lh.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],lh.timeZoneDelimiter.test(e.date)&&(e.date=n.split(lh.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=lh.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function B9(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function $9(n,e){if(e===null)return new Date(NaN);const t=n.match(L9);if(!t)return new Date(NaN);const r=!!t[4],i=fu(t[1]),s=fu(t[2])-1,o=fu(t[3]),a=fu(t[4]),l=fu(t[5])-1;if(r)return Q9(e,a,l)?W9(e,a,l):new Date(NaN);{const c=new Date(0);return!G9(e,s,o)||!K9(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function fu(n){return n?parseInt(n):1}function z9(n){const e=n.match(F9);if(!e)return NaN;const t=dg(e[1]),r=dg(e[2]),i=dg(e[3]);return Y9(t,r,i)?t*e0+r*qp+i*1e3:NaN}function dg(n){return n&&parseFloat(n.replace(",","."))||0}function q9(n){if(n==="Z")return 0;const e=n.match(U9);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return X9(r,i)?t*(r*e0+i*qp):NaN}function W9(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const H9=[31,null,31,30,31,30,31,31,30,31,30,31];function mk(n){return n%400===0||n%4===0&&n%100!==0}function G9(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(H9[e]||(mk(n)?29:28))}function K9(n,e){return e>=1&&e<=(mk(n)?366:365)}function Q9(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Y9(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function X9(n,e){return e>=0&&e<=59}function $S(n,e,t){const r=uk(),i=eq(n,t.timeZone,t.locale??r.locale);return"formatToParts"in i?J9(i,e):Z9(i,e)}function J9(n,e){const t=n.formatToParts(e);for(let r=t.length-1;r>=0;--r)if(t[r].type==="timeZoneName")return t[r].value}function Z9(n,e){const t=n.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(t);return r?r[0].substr(1):""}function eq(n,e,t){return new Intl.DateTimeFormat(t?[t.code,"en-US"]:void 0,{timeZone:e,timeZoneName:n})}function tq(n,e){const t=oq(e);return"formatToParts"in t?rq(t,n):iq(t,n)}const nq={year:0,month:1,day:2,hour:3,minute:4,second:5};function rq(n,e){try{const t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){const s=nq[t[i].type];s!==void 0&&(r[s]=parseInt(t[i].value,10))}return r}catch(t){if(t instanceof RangeError)return[NaN];throw t}}function iq(n,e){const t=n.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(t);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const hg={},zS=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),sq=zS==="06/25/2014, 00:00:00"||zS==="06/25/2014 00:00:00";function oq(n){return hg[n]||(hg[n]=sq?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),hg[n]}function gk(n,e,t,r,i,s,o){const a=new Date(0);return a.setUTCFullYear(n,e,t),a.setUTCHours(r,i,s,o),a}const qS=36e5,aq=6e4,fg={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function s0(n,e,t){if(!n)return 0;let r=fg.timezoneZ.exec(n);if(r)return 0;let i,s;if(r=fg.timezoneHH.exec(n),r)return i=parseInt(r[1],10),WS(i)?-(i*qS):NaN;if(r=fg.timezoneHHMM.exec(n),r){i=parseInt(r[2],10);const o=parseInt(r[3],10);return WS(i,o)?(s=Math.abs(i)*qS+o*aq,r[1]==="+"?-s:s):NaN}if(cq(n)){e=new Date(e||Date.now());const o=t?e:lq(e),a=v_(o,n);return-(t?a:uq(e,a,n))}return NaN}function lq(n){return gk(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function v_(n,e){const t=tq(n,e),r=gk(t[0],t[1]-1,t[2],t[3]%24,t[4],t[5],0).getTime();let i=n.getTime();const s=i%1e3;return i-=s>=0?s:1e3+s,r-i}function uq(n,e,t){let i=n.getTime()-e;const s=v_(new Date(i),t);if(e===s)return e;i-=s-e;const o=v_(new Date(i),t);return s===o?s:Math.max(s,o)}function WS(n,e){return-23<=n&&n<=23&&(e==null||0<=e&&e<=59)}const HS={};function cq(n){if(HS[n])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:n}),HS[n]=!0,!0}catch{return!1}}const dq=60*1e3,hq={X:function(n,e,t){const r=pg(t.timeZone,n);if(r===0)return"Z";switch(e){case"X":return GS(r);case"XXXX":case"XX":return sa(r);case"XXXXX":case"XXX":default:return sa(r,":")}},x:function(n,e,t){const r=pg(t.timeZone,n);switch(e){case"x":return GS(r);case"xxxx":case"xx":return sa(r);case"xxxxx":case"xxx":default:return sa(r,":")}},O:function(n,e,t){const r=pg(t.timeZone,n);switch(e){case"O":case"OO":case"OOO":return"GMT"+fq(r,":");case"OOOO":default:return"GMT"+sa(r,":")}},z:function(n,e,t){switch(e){case"z":case"zz":case"zzz":return $S("short",n,t);case"zzzz":default:return $S("long",n,t)}}};function pg(n,e){const t=n?s0(n,e,!0)/dq:(e==null?void 0:e.getTimezoneOffset())??0;if(Number.isNaN(t))throw new RangeError("Invalid time zone specified: "+n);return t}function Lf(n,e){const t=n<0?"-":"";let r=Math.abs(n).toString();for(;r.length<e;)r="0"+r;return t+r}function sa(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Lf(Math.floor(r/60),2),s=Lf(Math.floor(r%60),2);return t+i+e+s}function GS(n,e){return n%60===0?(n>0?"-":"+")+Lf(Math.abs(n)/60,2):sa(n,e)}function fq(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Lf(s,2)}function KS(n){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+n-+e}const pq=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,mg=36e5,QS=6e4,mq=2,Xt={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:pq};function yk(n,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(n===null)return new Date(NaN);const t=e.additionalDigits==null?mq:Number(e.additionalDigits);if(t!==2&&t!==1&&t!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]")return new Date(n.getTime());if(typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]")return new Date(n);if(Object.prototype.toString.call(n)!=="[object String]")return new Date(NaN);const r=gq(n),{year:i,restDateString:s}=yq(r.date,t),o=_q(s,i);if(o===null||isNaN(o.getTime()))return new Date(NaN);if(o){const a=o.getTime();let l=0,c;if(r.time&&(l=vq(r.time),l===null||isNaN(l)))return new Date(NaN);if(r.timeZone||e.timeZone){if(c=s0(r.timeZone||e.timeZone,new Date(a+l)),isNaN(c))return new Date(NaN)}else c=KS(new Date(a+l)),c=KS(new Date(a+l+c));return new Date(a+l+c)}else return new Date(NaN)}function gq(n){const e={};let t=Xt.dateTimePattern.exec(n),r;if(t?(e.date=t[1],r=t[3]):(t=Xt.datePattern.exec(n),t?(e.date=t[1],r=t[2]):(e.date=null,r=n)),r){const i=Xt.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function yq(n,e){if(n){const t=Xt.YYY[e],r=Xt.YYYYY[e];let i=Xt.YYYY.exec(n)||r.exec(n);if(i){const s=i[1];return{year:parseInt(s,10),restDateString:n.slice(s.length)}}if(i=Xt.YY.exec(n)||t.exec(n),i){const s=i[1];return{year:parseInt(s,10)*100,restDateString:n.slice(s.length)}}}return{year:null}}function _q(n,e){if(e===null)return null;let t,r,i;if(!n||!n.length)return t=new Date(0),t.setUTCFullYear(e),t;let s=Xt.MM.exec(n);if(s)return t=new Date(0),r=parseInt(s[1],10)-1,XS(e,r)?(t.setUTCFullYear(e,r),t):new Date(NaN);if(s=Xt.DDD.exec(n),s){t=new Date(0);const o=parseInt(s[1],10);return Eq(e,o)?(t.setUTCFullYear(e,0,o),t):new Date(NaN)}if(s=Xt.MMDD.exec(n),s){t=new Date(0),r=parseInt(s[1],10)-1;const o=parseInt(s[2],10);return XS(e,r,o)?(t.setUTCFullYear(e,r,o),t):new Date(NaN)}if(s=Xt.Www.exec(n),s)return i=parseInt(s[1],10)-1,JS(i)?YS(e,i):new Date(NaN);if(s=Xt.WwwD.exec(n),s){i=parseInt(s[1],10)-1;const o=parseInt(s[2],10)-1;return JS(i,o)?YS(e,i,o):new Date(NaN)}return null}function vq(n){let e,t,r=Xt.HH.exec(n);if(r)return e=parseFloat(r[1].replace(",",".")),gg(e)?e%24*mg:NaN;if(r=Xt.HHMM.exec(n),r)return e=parseInt(r[1],10),t=parseFloat(r[2].replace(",",".")),gg(e,t)?e%24*mg+t*QS:NaN;if(r=Xt.HHMMSS.exec(n),r){e=parseInt(r[1],10),t=parseInt(r[2],10);const i=parseFloat(r[3].replace(",","."));return gg(e,t,i)?e%24*mg+t*QS+i*1e3:NaN}return null}function YS(n,e,t){e=e||0,t=t||0;const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=e*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const wq=[31,28,31,30,31,30,31,31,30,31,30,31],Iq=[31,29,31,30,31,30,31,31,30,31,30,31];function _k(n){return n%400===0||n%4===0&&n%100!==0}function XS(n,e,t){if(e<0||e>11)return!1;if(t!=null){if(t<1)return!1;const r=_k(n);if(r&&t>Iq[e]||!r&&t>wq[e])return!1}return!0}function Eq(n,e){if(e<1)return!1;const t=_k(n);return!(t&&e>366||!t&&e>365)}function JS(n,e){return!(n<0||n>52||e!=null&&(e<0||e>6))}function gg(n,e,t){return!(n<0||n>=25||e!=null&&(e<0||e>=60)||t!=null&&(t<0||t>=60))}const Tq=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Sq(n,e,t={}){e=String(e);const r=e.match(Tq);if(r){const i=yk(t.originalDate||n,t);e=r.reduce(function(s,o){if(o[0]==="'")return s;const a=s.indexOf(o),l=s[a-1]==="'",c=s.replace(o,"'"+hq[o[0]](i,o,t)+"'");return l?c.substring(0,a-1)+c.substring(a+1):c},e)}return zi(n,e,t)}function w_(n,e,t){n=yk(n,t);const r=s0(e,n,!0),i=new Date(n.getTime()-r),s=new Date(0);return s.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),s.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),s}function Aq(n,e,t,r){return r={...r,timeZone:e,originalDate:n},Sq(w_(n,e,{timeZone:r.timeZone}),t,r)}const o0=()=>new Date().toISOString(),Pq=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,Mc=n=>{const e=dn(n);return zi(e,"MMM d, yyyy, h:mm a")},xq=(n,e)=>{try{return Aq(dn(n),e,"MMM d, yyyy, h:mm a (z)")}catch{return console.warn(`Invalid timezone '${e}', falling back to local formatting.`),Mc(n)}},bq=n=>Uz(dn(n),{addSuffix:!0}),ZS=(n,e,t)=>Math.abs(U6(dn(n),dn(e)))<=t,vk=n=>o6.collection("users").doc(n).collection("events"),Rq=async(n,e=!1)=>{const t=await g_(n);if(e||t.length===0)try{const r=await Oq(n),i=(await g_(n)).map(s=>ek(s.id));return await Promise.all(i),await Promise.all(r.map(s=>zp({...s,syncStatus:"synced"}))),r}catch(r){return console.warn("Could not fetch from Firestore, returning local data.",r),t}return t},Cq=async(n,e)=>{const t=o0(),r={...n,id:n.id||Vf(),userId:e,createdAt:t,updatedAt:t,syncStatus:"queued"};return await zp(r),await Jw({id:Vf(),action:"create",payload:r,enqueuedAt:t}),Wp(),r},kq=async(n,e)=>{const t=await g_(e).then(s=>s.find(o=>o.id===n.id));if(!t)throw new Error("Event not found for update");const r=o0(),i={...t,...n,updatedAt:r,syncStatus:"queued"};return await zp(i),await Jw({id:Vf(),action:"update",payload:i,enqueuedAt:r}),Wp(),i},Dq=async(n,e)=>{await ek(n),await Jw({id:Vf(),action:"delete",payload:{id:n,userId:e},enqueuedAt:o0()}),Wp()};let uh=!1;const Wp=async()=>{if(uh||!navigator.onLine)return!1;uh=!0;const n=await P6();if(n.length===0)return uh=!1,!0;console.log(`Syncing ${n.length} items...`);try{for(const e of n)await Nq(e),await x6(e.id);return console.log("Sync complete."),!0}catch(e){return console.error("Sync failed:",e),!1}finally{uh=!1}},Nq=async n=>{const{action:e,payload:t}=n,r=t.userId||t.userId;if(!r)throw new Error("userId missing in queue payload");const i=vk(r);switch(e){case"create":case"update":{const s=t,{syncStatus:o,...a}=s;await i.doc(s.id).set(a,{merge:!0}),await zp({...s,syncStatus:"synced"});break}case"delete":{const{id:s}=t;await i.doc(s).delete();break}}},Oq=async n=>(await vk(n).get()).docs.map(t=>({...t.data(),id:t.id})),Ut="events",Hp=()=>{const{user:n}=pd(),e=ep(),t=n==null?void 0:n.uid,{data:r=[],isLoading:i,isError:s,error:o}=Bx({queryKey:[Ut,t],queryFn:()=>t?Rq(t,!0):Promise.resolve([]),enabled:!!t}),a=[...r].sort((g,S)=>S.occurredAt.localeCompare(g.occurredAt)),l=a.length>0?a[0]:null,c=(l==null?void 0:l.type)==="ENTRY"?"EXIT":"ENTRY",d=zm({mutationFn:g=>{if(!t)throw new Error("User not authenticated");return Cq(g,t)},onMutate:async g=>{await e.cancelQueries({queryKey:[Ut,t]});const S=e.getQueryData([Ut,t])||[],T={id:g.id||`temp-${Date.now()}`,userId:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"queued",...g};return e.setQueryData([Ut,t],[...S,T]),{previousEvents:S}},onError:(g,S,T)=>{mt.error("Failed to add event."),T!=null&&T.previousEvents&&e.setQueryData([Ut,t],T.previousEvents)},onSettled:()=>{e.invalidateQueries({queryKey:[Ut,t]}),e.invalidateQueries({queryKey:["summary",t]})}}),h=zm({mutationFn:g=>{if(!t)throw new Error("User not authenticated");return kq(g,t)},onMutate:async g=>{await e.cancelQueries({queryKey:[Ut,t]});const S=e.getQueryData([Ut,t])||[];return e.setQueryData([Ut,t],S.map(T=>T.id===g.id?{...T,...g}:T)),{previousEvents:S}},onError:(g,S,T)=>{mt.error("Failed to update event."),T!=null&&T.previousEvents&&e.setQueryData([Ut,t],T.previousEvents)},onSettled:()=>{e.invalidateQueries({queryKey:[Ut,t]}),e.invalidateQueries({queryKey:["summary",t]})}}),p=zm({mutationFn:g=>{if(!t)throw new Error("User not authenticated");return Dq(g,t)},onMutate:async g=>{await e.cancelQueries({queryKey:[Ut,t]});const S=e.getQueryData([Ut,t])||[];return e.setQueryData([Ut,t],S.filter(T=>T.id!==g)),{previousEvents:S}},onError:(g,S,T)=>{mt.error("Failed to delete event."),T!=null&&T.previousEvents&&e.setQueryData([Ut,t],T.previousEvents)},onSettled:()=>{e.invalidateQueries({queryKey:[Ut,t]}),e.invalidateQueries({queryKey:["summary",t]})}});return{events:a,isLoading:i,isError:s,error:o,latestEvent:l,nextEventType:c,addEvent:d.mutateAsync,updateEvent:h.mutateAsync,deleteEvent:p.mutateAsync}},wk=()=>L.useCallback((e=200)=>{if(typeof window<"u"&&"vibrate"in window.navigator)try{window.navigator.vibrate(e)}catch(t){console.warn("Vibration failed",t)}},[]),eA="local-analytics",Vq=()=>({logEvent:L.useCallback(e=>{try{const t=localStorage.getItem(eA),r=t?JSON.parse(t):{eventCounts:{},lastLogged:{}};r.eventCounts[e]=(r.eventCounts[e]||0)+1,r.lastLogged[e]=new Date().toISOString(),localStorage.setItem(eA,JSON.stringify(r))}catch(t){console.warn("Could not log analytics event:",t)}},[])}),xn=({children:n,className:e="",variant:t="primary",size:r="md",isLoading:i=!1,...s})=>{const o="inline-flex items-center justify-center font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",a={primary:"bg-brand-primary text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-indigo-500",danger:"bg-brand-danger text-white hover:bg-red-600 focus:ring-red-500",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-indigo-500"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg",xl:"px-8 py-4 text-xl"},c=`${o} ${a[t]} ${l[r]} ${e}`;return E.jsx("button",{className:c,disabled:i||s.disabled,...s,children:i?E.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):n})},Ik=({isOpen:n,onClose:e,onConfirm:t,title:r,children:i,confirmText:s="Confirm",cancelText:o="Cancel"})=>n?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm",children:[E.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:r}),E.jsx("div",{className:"mt-2",children:E.jsx("p",{className:"text-sm text-gray-500",children:i})}),E.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[E.jsx(xn,{onClick:t,variant:"danger",children:s}),E.jsx(xn,{onClick:e,variant:"secondary",children:o})]})]})}):null,Mq=()=>{const{events:n,latestEvent:e,nextEventType:t,addEvent:r,isLoading:i}=Hp(),s=wk(),{logEvent:o}=Vq(),[a,l]=L.useState(!1),c=e&&ZS(e.createdAt,new Date().toISOString(),10),d=n.length>1?n[1]:null,h=async()=>{if(e&&e.type===t&&ZS(e.occurredAt,new Date().toISOString(),2)){l(!0);return}await p()},p=async()=>{l(!1);try{await r({type:t,occurredAt:new Date().toISOString(),occurredTz:Pq(),source:"quick"}),mt.success(`Logged ${t} successfully!`),s(),o(`quick_log_${t.toLowerCase()}`)}catch(g){mt.error("Failed to log event."),console.error(g)}};return E.jsxs("div",{className:"flex flex-col h-full items-center justify-between text-center pt-8 pb-4",children:[E.jsxs("div",{className:"w-full",children:[E.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back!"}),e?E.jsxs("p",{className:"text-gray-600",children:["Your current status is"," ",E.jsx("span",{className:`font-semibold ${e.type==="ENTRY"?"text-green-600":"text-red-600"}`,children:e.type==="ENTRY"?"In India":"Outside India"})]}):E.jsx("p",{className:"text-gray-600",children:"Ready to log your travel?"})]}),E.jsx("div",{className:"my-8 w-full px-4",children:E.jsx(xn,{onClick:h,isLoading:i,size:"xl",className:`w-full h-24 text-2xl transition-all duration-300 ${t==="ENTRY"?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-red-600 hover:bg-red-700 focus:ring-red-500"}`,children:t==="ENTRY"?"Log Entry Into India":"Log Exit From India"})}),E.jsxs("div",{className:"w-full space-y-4",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Last Event"}),i&&E.jsx("p",{children:"Loading..."}),!i&&e?E.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg w-full max-w-sm mx-auto",children:[E.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[E.jsxs("p",{className:`font-medium ${e.type==="ENTRY"?"text-green-800":"text-red-800"}`,children:[e.type,": ",Mc(e.occurredAt)]}),c&&E.jsx(Gr,{to:`/custom-entry/${e.id}`,className:"px-2 py-1 text-xs bg-brand-primary text-white rounded-md hover:bg-indigo-700",children:"Edit"})]}),d&&E.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previous: ",d.type," on ",Mc(d.occurredAt).split(",")[0]]})]}):E.jsx("p",{className:"text-sm text-gray-500",children:"No events logged yet."})]}),E.jsxs("div",{className:"flex justify-center space-x-4",children:[E.jsx(Gr,{to:"/summary",className:"text-brand-primary font-semibold hover:underline",children:"View Summary"}),E.jsx(Gr,{to:"/history",className:"text-brand-primary font-semibold hover:underline",children:"View History"})]})]}),E.jsxs(Ik,{isOpen:a,onClose:()=>l(!1),onConfirm:p,title:`Confirm ${t}`,confirmText:`Yes, log ${t}`,children:["You just logged an ",t," event less than 2 minutes ago. Are you sure you want to log another one?"]})]})},Lq=({event:n,onDelete:e})=>{const t=n.type==="ENTRY";return E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-between space-x-4",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${t?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t?E.jsx(Fq,{}):E.jsx(Uq,{})}),E.jsxs("div",{children:[E.jsx("p",{className:`text-lg font-semibold ${t?"text-green-800":"text-red-800"}`,children:n.type}),E.jsx("p",{className:"text-sm text-gray-600",children:xq(n.occurredAt,n.occurredTz)}),E.jsx("p",{className:"text-xs text-gray-400",children:bq(n.occurredAt)})]})]}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsx(Gr,{to:`/custom-entry/${n.id}`,className:"p-2 text-gray-500 hover:text-brand-primary rounded-full hover:bg-gray-100",children:E.jsx(jq,{})}),E.jsx("button",{onClick:()=>e(n.id),className:"p-2 text-gray-500 hover:text-brand-danger rounded-full hover:bg-gray-100",children:E.jsx(Bq,{})})]})]})},Ek="w-6 h-6",Fq=()=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ek,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0110.5 3h6a2.25 2.25 0 012.25 2.25v13.5A2.25 2.25 0 0116.5 21h-6a2.25 2.25 0 01-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3h12"})}),Uq=()=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ek,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0-3-3m0 0 3-3m-3 3H3"})}),jq=()=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Bq=()=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Tk=({title:n,message:e,action:t})=>E.jsxs("div",{className:"text-center py-16 px-4",children:[E.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:E.jsx("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),E.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:n}),E.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e}),t&&E.jsx("div",{className:"mt-6",children:t})]}),Sk=(n,e)=>{const t=n.filter(c=>{if(!e.start||!e.end)return!0;const d=new Date(c.occurredAt).getTime(),h=new Date(e.start).getTime(),p=new Date(e.end).getTime();return d>=h&&d<=p});if(t.length===0){alert("No events found in the selected date range.");return}const r=["type","occurredAt(UTC)","occurredTz","notes","createdAt(UTC)","updatedAt(UTC)"],i=t.map(c=>[c.type,c.occurredAt,c.occurredTz,c.notes||"",c.createdAt,c.updatedAt]);let s="data:text/csv;charset=utf-8,"+r.join(",")+`
`+i.map(c=>c.join(",")).join(`
`);const o=encodeURI(s),a=document.createElement("a");a.setAttribute("href",o);const l=new Date().toISOString().split("T")[0];a.setAttribute("download",`india_travel_log_${l}.csv`),document.body.appendChild(a),a.click(),document.body.removeChild(a)},$q=()=>{const{events:n,isLoading:e,deleteEvent:t}=Hp(),[r,i]=L.useState(null),s=async()=>{if(r)try{await t(r),mt.success("Event deleted.")}catch{mt.error("Failed to delete event.")}finally{i(null)}},o=()=>{Sk(n,{})};return E.jsxs("div",{className:"p-4 space-y-4",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Travel History"}),n.length>0&&E.jsx(xn,{onClick:o,size:"sm",variant:"secondary",children:"Export CSV"})]}),e&&E.jsx("div",{className:"text-center p-8",children:"Loading events..."}),!e&&n.length===0&&E.jsx(Tk,{title:"No travel history",message:"Get started by logging your first entry or exit.",action:E.jsx(Gr,{to:"/",children:E.jsx(xn,{children:"Log First Event"})})}),!e&&n.length>0&&E.jsx("div",{className:"space-y-3",children:n.map(a=>E.jsx(Lq,{event:a,onDelete:()=>i(a.id)},a.id))}),E.jsx(Ik,{isOpen:!!r,onClose:()=>i(null),onConfirm:s,title:"Delete Event",confirmText:"Delete",children:"Are you sure you want to delete this event? This action cannot be undone."})]})},zq=({label:n,value:e,onChange:t})=>{const r=s=>{const o=s.target.value,a=zi(e,"HH:mm"),l=jS(`${o} ${a}`,"yyyy-MM-dd HH:mm",new Date);t(l)},i=s=>{const o=s.target.value,a=zi(e,"yyyy-MM-dd"),l=jS(`${a} ${o}`,"yyyy-MM-dd HH:mm",new Date);t(l)};return E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),E.jsxs("div",{className:"flex space-x-2",children:[E.jsx("input",{type:"date",value:zi(e,"yyyy-MM-dd"),onChange:r,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm"}),E.jsx("input",{type:"time",value:zi(e,"HH:mm"),onChange:i,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm"})]})]})},tA=()=>{const{id:n}=B2(),e=rp(),{events:t,addEvent:r,updateEvent:i,isLoading:s}=Hp(),o=wk(),[a,l]=L.useState("ENTRY"),[c,d]=L.useState(new Date),[h,p]=L.useState(""),[g,S]=L.useState(!1);L.useEffect(()=>{if(n){const b=t.find(I=>I.id===n);b&&(S(!0),l(b.type),d(new Date(b.occurredAt)),p(b.notes||""))}},[n,t]);const T=async b=>{b.preventDefault();const I={type:a,occurredAt:c.toISOString(),occurredTz:Intl.DateTimeFormat().resolvedOptions().timeZone,source:"custom",notes:h};try{g&&n?(await i({id:n,...I}),mt.success("Event updated successfully!")):(await r(I),mt.success("Event added successfully!")),o(),e("/history")}catch(_){mt.error("Failed to save event."),console.error(_)}};return E.jsxs("div",{className:"p-4 space-y-6",children:[E.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:g?"Edit Event":"Add Custom Event"}),E.jsxs("form",{onSubmit:T,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),E.jsxs("div",{className:"grid grid-cols-2 gap-2 rounded-lg bg-gray-200 p-1",children:[E.jsx("button",{type:"button",onClick:()=>l("ENTRY"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${a==="ENTRY"?"bg-white text-green-700 shadow":"text-gray-600"}`,children:"ENTRY"}),E.jsx("button",{type:"button",onClick:()=>l("EXIT"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${a==="EXIT"?"bg-white text-red-700 shadow":"text-gray-600"}`,children:"EXIT"})]})]}),E.jsx(zq,{label:"Date & Time",value:c,onChange:d}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),E.jsx("textarea",{id:"notes",rows:3,value:h,onChange:b=>p(b.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm",placeholder:"e.g., Flight AI-102"})]}),E.jsxs("div",{className:"flex space-x-2 pt-4",children:[E.jsx(xn,{type:"submit",isLoading:s,className:"w-full",children:g?"Save Changes":"Add Event"}),E.jsx(xn,{type:"button",variant:"secondary",onClick:()=>e(-1),className:"w-full",children:"Cancel"})]})]})]})},Ak=n=>{const e=[...n].sort((i,s)=>i.occurredAt.localeCompare(s.occurredAt)),t=[];let r=null;for(let i=0;i<e.length;i++){const s=e[i],o=[],a=e[i-1];if(a&&a.type===s.type&&ns(dn(s.occurredAt),dn(a.occurredAt))<2*60*1e3&&o.push("Duplicate event type within 2 minutes of previous."),s.type==="ENTRY")r&&t.push({entry:r,exit:null,durationMs:0,warnings:["Missing EXIT event."]}),r=s;else if(s.type==="EXIT"&&r){const l=ns(dn(s.occurredAt),dn(r.occurredAt));t.push({entry:r,exit:s,durationMs:l,warnings:o}),r=null}}if(r){const i=ns(new Date,dn(r.occurredAt)),s=[];i>120*24*60*60*1e3&&s.push("Open trip is older than 120 days. Please review."),t.push({entry:r,exit:null,durationMs:i,warnings:s})}return t},qq=(n,e,t,r)=>{const i=US(n,t)?n:t,s=$z(e,r)?e:r;return US(i,s)?0:ns(s,i)},Pu=(n,e,t)=>n.reduce((i,s)=>{const o=dn(s.entry.occurredAt),a=s.exit?dn(s.exit.occurredAt):new Date;return i+qq(o,a,e,t)},0)/(1e3*60*60*24),nA=(n,e="UTC")=>{const t=w_(new Date(n,3,1),e),r=w_(new Date(n+1,2,31,23,59,59,999),e);return{start:t,end:r}},Wq=n=>{if(!n||n.length===0)return{status:"Outside India",currentStayDuration:null,rolling182Days:0,rolling365Days:0,currentFyDays:0,previousFyDays:0,trips:[]};const e=Ak(n),t=new Date,r=t,i=BS(t,182),s=Pu(e,i,r),o=t,a=BS(t,365),l=Pu(e,a,o),c=ck(t),d=Bz(t)>=3?c:c-1,{start:h,end:p}=nA(d),g=Pu(e,h,p),{start:S,end:T}=nA(d-1),b=Pu(e,S,T),I=e[e.length-1],_=I&&!I.exit?"In India":"Outside India";let y=null;if(_==="In India"){const k=ns(t,dn(I.entry.occurredAt)),V=Math.floor(k/(1e3*60*60*24)),j=Math.floor(k%(1e3*60*60*24)/(1e3*60*60)),A=Math.floor(k%(1e3*60*60)/(1e3*60));y=`${V}d ${j}h ${A}m`}return{status:_,currentStayDuration:y,rolling182Days:s,rolling365Days:l,currentFyDays:g,previousFyDays:b,trips:e}},Hq=(n,e,t)=>{const r=Ak(n),i=new Date,s=dn(e),o=Pu(r,i,s),a=ns(s,i)/(1e3*60*60*24),l=t-o;return Math.max(0,Math.floor(Math.min(l,a)))},rA=n=>{if(!n||n.length===0)return"no-events";const e=n.map(r=>`${r.id}:${r.updatedAt}`).join(",");let t=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);t=(t<<5)-t+i,t|=0}return t.toString()},Gq=({summary:n})=>{const r=(i,s)=>{const o=i>=s;return E.jsxs("div",{className:"flex items-baseline space-x-2",children:[E.jsx("span",{className:`text-2xl font-bold ${o?"text-brand-danger":"text-gray-900"}`,children:i.toFixed(2)}),E.jsx("span",{className:"text-sm text-gray-500",children:"days"}),o&&E.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Warning"})]})};return E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm col-span-1 md:col-span-2",children:[E.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Current Status"}),E.jsx("p",{className:`text-2xl font-bold ${n.status==="In India"?"text-green-600":"text-gray-900"}`,children:n.status}),n.status==="In India"&&n.currentStayDuration&&E.jsxs("p",{className:"text-sm text-gray-500",children:["Ongoing stay: ",n.currentStayDuration]})]}),E.jsx(ch,{title:"Last 182 Days",children:r(n.rolling182Days,182)}),E.jsx(ch,{title:"Last 365 Days",children:r(n.rolling365Days,365)}),E.jsx(ch,{title:"Current FY",children:r(n.currentFyDays,182)}),E.jsx(ch,{title:"Previous FY",children:r(n.previousFyDays,182)})]})},ch=({title:n,children:e})=>E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[E.jsx("h3",{className:"text-sm font-medium text-gray-500",children:n}),E.jsx("div",{className:"mt-1",children:e})]}),Kq=({trips:n})=>{const e=[...n].sort((t,r)=>r.entry.occurredAt.localeCompare(t.entry.occurredAt));return E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Trip Breakdown"}),E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{scope:"col",className:"px-4 py-3",children:"Entry"}),E.jsx("th",{scope:"col",className:"px-4 py-3",children:"Exit"}),E.jsx("th",{scope:"col",className:"px-4 py-3",children:"Duration"})]})}),E.jsx("tbody",{children:e.map((t,r)=>E.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[E.jsx("td",{className:"px-4 py-2 font-medium text-gray-900 whitespace-nowrap",children:Mc(t.entry.occurredAt)}),E.jsx("td",{className:"px-4 py-2",children:t.exit?Mc(t.exit.occurredAt):E.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Open"})}),E.jsxs("td",{className:"px-4 py-2",children:[Qq(t.durationMs),t.warnings.length>0&&E.jsx("span",{title:t.warnings.join(" "),className:"ml-2 px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"!"})]})]},r))})]})})]})},Qq=n=>{if(n<=0)return"-";const e=Math.floor(n/(1e3*60*60*24)),t=Math.floor(n%(1e3*60*60*24)/(1e3*60*60));return`${e}d ${t}h`},Wu=({label:n,id:e,...t})=>E.jsxs("div",{children:[E.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),E.jsx("input",{id:e,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm",...t})]}),Yq=()=>{const n=new Date,e=n.getMonth(),t=ck(n),r=e<3?t:t+1;return W6(new Date(r,2,31))},Xq=({events:n})=>{const[e,t]=L.useState(zi(Yq(),"yyyy-MM-dd")),[r,i]=L.useState(182),s=L.useMemo(()=>{if(!e)return 0;const o=new Date(e).toISOString();return Hq(n,o,r)},[n,e,r]);return E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Stay Forecast"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsx(Wu,{label:"Target Date",type:"date",value:e,onChange:o=>t(o.target.value)}),E.jsx(Wu,{label:"Target Threshold (days)",type:"number",value:r,onChange:o=>i(Number(o.target.value))})]}),E.jsx("div",{className:"bg-indigo-50 p-4 rounded-lg text-center",children:E.jsxs("p",{className:"text-gray-700",children:["You can stay for another ",E.jsx("br",{}),E.jsx("span",{className:"text-3xl font-bold text-brand-primary mx-2",children:s}),"day(s) in India before hitting ",E.jsxs("span",{className:"font-semibold",children:[r," days"]})," by ",E.jsx("span",{className:"font-semibold",children:zi(new Date(e),"MMM d, yyyy")}),"."]})})]})},Jq=()=>{const{user:n}=pd(),{events:e,isLoading:t}=Hp(),{data:r,isLoading:i}=Bx({queryKey:["summary",n==null?void 0:n.uid,rA(e)],queryFn:async()=>{if(!e||e.length===0)return null;const a=rA(e),l=await b6();if(l&&l.dataHash===a)return l;const d={...Wq(e),dataHash:a};return await R6(d),d},enabled:!!n&&!t&&e.length>0}),s=t||i,o=()=>{Sk(e,{})};return s?E.jsx("div",{className:"text-center p-8",children:"Calculating summary..."}):r?E.jsxs("div",{className:"p-4 space-y-6",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Summary"}),E.jsx(xn,{onClick:o,size:"sm",variant:"secondary",children:"Export All Data"})]}),E.jsx(Gq,{summary:r}),E.jsx(Kq,{trips:r.trips}),E.jsx(Xq,{events:e})]}):E.jsx(Tk,{title:"No summary to display",message:"You need at least one travel event to see a summary.",action:E.jsx(Gr,{to:"/",children:E.jsx(xn,{children:"Log First Event"})})})},Zq={VITE_GMAIL_CLIENT_ID:"your_client_id",VITE_GMAIL_REDIRECT_URI:"your_redirect_uri",VITE_GMAIL_TOKEN_ENDPOINT:"your_token_endpoint"},{VITE_GMAIL_CLIENT_ID:eW,VITE_GMAIL_REDIRECT_URI:tW,VITE_GMAIL_TOKEN_ENDPOINT:nW}=Zq,rW=()=>{const n=new URLSearchParams({client_id:eW,redirect_uri:tW,response_type:"code",scope:"https://www.googleapis.com/auth/gmail.readonly",access_type:"offline",prompt:"consent"});window.location.href=`https://accounts.google.com/o/oauth2/v2/auth?${n.toString()}`},iW=async n=>{const e=gs.currentUser;if(!e)throw new Error("User not authenticated");const t=await e.getIdToken(),r=await fetch(nW,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({code:n})});if(!r.ok){let i="Token exchange failed";try{const s=await r.json();s.error&&(i+=`: ${s.error}`)}catch{}throw new Error(i)}return r.json()},sW=()=>{const[n,e]=L.useState(!1),[t,r]=gV(),{user:i}=pd(),s=()=>{try{rW()}catch{mt.error("Missing Gmail configuration")}};return L.useEffect(()=>{const o=t.get("code"),a=t.get("error");o&&i?(e(!0),iW(o).then(()=>{mt.success("Gmail connected")}).catch(l=>{mt.error(l.message||"Failed to connect Gmail")}).finally(()=>{e(!1),r({})})):a&&(mt.error("Gmail authorization failed"),r({}))},[t,i,r]),E.jsxs("div",{className:"max-w-md mx-auto",children:[E.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Account"}),E.jsx(xn,{onClick:s,isLoading:n,className:"w-full",children:"Connect Gmail"})]})},I_="emailForSignIn",oW=async n=>{const e={url:window.location.origin,handleCodeInApp:!0};await gs.sendSignInLinkToEmail(n,e),window.localStorage.setItem(I_,n)},aW=async n=>{if(gs.isSignInWithEmailLink(n)){let e=window.localStorage.getItem(I_);if(!e&&(e=window.prompt("Please provide your email for confirmation"),!e))throw new Error("Email is required to complete sign-in.");const t=await gs.signInWithEmailLink(e,n);return window.localStorage.removeItem(I_),t.user}throw new Error("Not a valid sign-in link.")},lW=async(n,e)=>(await gs.createUserWithEmailAndPassword(n,e)).user,uW=async(n,e)=>(await gs.signInWithEmailAndPassword(n,e)).user,cW=async()=>{await gs.signOut()},iA=()=>{const[n,e]=L.useState("signIn"),[t,r]=L.useState(""),[i,s]=L.useState(""),[o,a]=L.useState(!1),[l,c]=L.useState(!1),[d,h]=L.useState(!1),p=async T=>{T.preventDefault(),a(!0);try{await oW(t),c(!0)}catch(b){console.error(b),mt.error("Failed to send sign-in link. Please try again.")}finally{a(!1)}},g=async T=>{T.preventDefault(),a(!0);try{n==="register"?(await lW(t,i),mt.success("Account created successfully! Please sign in."),e("signIn"),s("")):await uW(t,i)}catch(b){const I=b.code;let _="An error occurred. Please try again.";I==="auth/email-already-in-use"?_="An account with this email already exists.":I==="auth/invalid-email"?_="Please enter a valid email address.":I==="auth/weak-password"?_="Password should be at least 6 characters.":(I==="auth/user-not-found"||I==="auth/wrong-password"||I==="auth/invalid-credential")&&(_="Invalid email or password."),console.error("Authentication error:",b),mt.error(_)}finally{a(!1)}},S=({currentMode:T,targetMode:b,children:I})=>E.jsx("button",{onClick:()=>e(b),className:`w-full py-2.5 text-sm font-medium leading-5 rounded-lg
        focus:outline-none focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white ring-opacity-60
        ${T===b?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"}`,children:I});return d?E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-8",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in with Email Link"}),E.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your email to receive a password-less sign-in link."})]}),l?E.jsxs("div",{className:"text-center p-4 bg-green-100 text-green-800 rounded-lg",children:[E.jsx("h3",{className:"font-semibold",children:"Check your email!"}),E.jsxs("p",{children:["A sign-in link has been sent to ",E.jsx("span",{className:"font-bold",children:t}),". Click the link to complete sign-in."]})]}):E.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[E.jsx(Wu,{id:"email-address-link",name:"email",type:"email",label:"Email address",autoComplete:"email",required:!0,value:t,onChange:T=>r(T.target.value),placeholder:"Email address"}),E.jsx("div",{children:E.jsx(xn,{type:"submit",isLoading:o,className:"w-full",children:"Send Sign-In Link"})})]}),E.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:E.jsx("button",{onClick:()=>h(!1),className:"font-medium text-brand-primary hover:text-indigo-500",children:"Back to password sign-in"})})]})}):E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-8",children:[E.jsx("div",{children:E.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:n==="signIn"?"Sign in to India Log":"Create an Account"})}),E.jsx("div",{className:"w-full max-w-md px-2 py-2 sm:px-0",children:E.jsxs("div",{className:"flex space-x-1 rounded-xl bg-brand-primary/80 p-1",children:[E.jsx(S,{currentMode:n,targetMode:"signIn",children:"Sign In"}),E.jsx(S,{currentMode:n,targetMode:"register",children:"Register"})]})}),E.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[E.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[E.jsx(Wu,{id:"email-address",name:"email",type:"email",label:"Email address",autoComplete:"email",required:!0,value:t,onChange:T=>r(T.target.value),placeholder:"Email address"}),E.jsx(Wu,{id:"password",name:"password",type:"password",label:"Password",autoComplete:n==="signIn"?"current-password":"new-password",required:!0,value:i,onChange:T=>s(T.target.value),placeholder:"Password"})]}),E.jsx("div",{children:E.jsx(xn,{type:"submit",isLoading:o,className:"w-full",children:n==="signIn"?"Sign In":"Create Account"})})]}),E.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",E.jsx("button",{onClick:()=>h(!0),className:"font-medium text-brand-primary hover:text-indigo-500",children:"get a sign-in link emailed to you"})]})]})})},dW=()=>E.jsxs("div",{className:"text-center py-16 px-4",children:[E.jsx("h1",{className:"text-4xl font-bold text-brand-primary",children:"404"}),E.jsx("h2",{className:"mt-2 text-2xl font-semibold text-gray-800",children:"Page Not Found"}),E.jsx("p",{className:"mt-4 text-gray-600",children:"Sorry, the page you are looking for does not exist."}),E.jsx("div",{className:"mt-6",children:E.jsx(Gr,{to:"/",children:E.jsx(xn,{children:"Go Back Home"})})})]}),Pk=()=>{const[n,e]=L.useState(navigator.onLine?"online":"offline"),t=ep(),r=L.useCallback(async()=>{if(!navigator.onLine){e("offline");return}e("syncing"),await Wp()&&(t.invalidateQueries({queryKey:["events"]}),t.invalidateQueries({queryKey:["summary"]})),e("online")},[t]);return L.useEffect(()=>{r();const i=()=>r(),s=()=>e("offline");window.addEventListener("online",i),window.addEventListener("offline",s);const o=setInterval(()=>{navigator.onLine&&r()},1e3*60*5);return()=>{window.removeEventListener("online",i),window.removeEventListener("offline",s),clearInterval(o)}},[r]),{status:n,forceSync:r}},hW=()=>{const{status:n}=Pk(),e=()=>{switch(n){case"online":return{icon:E.jsx(fW,{}),text:"Synced",color:"text-green-600"};case"syncing":return{icon:E.jsx(pW,{}),text:"Syncing...",color:"text-blue-600"};case"offline":return{icon:E.jsx(mW,{}),text:"Offline",color:"text-gray-500"};default:return{icon:null,text:"",color:""}}},{icon:t,text:r,color:i}=e();return E.jsxs("div",{className:`flex items-center space-x-1 text-sm ${i}`,children:[t,E.jsx("span",{className:"hidden sm:inline",children:r})]})},a0="w-5 h-5",fW=()=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a0,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3 3m3-3 3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})}),pW=()=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`${a0} animate-spin`,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.696a8.25 8.25 0 00-11.667 0A8.25 8.25 0 009.645 2.985c2.25 0 4.33.92 5.855 2.408M21.015 14.652A8.25 8.25 0 0011.355 2.985"})}),mW=()=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a0,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),gW=()=>{var i;const{user:n}=pd(),[e,t]=L.useState(!1),r=async()=>{try{await cW(),mt.success("Signed out successfully.")}catch(s){mt.error("Failed to sign out."),console.error(s)}};return E.jsx("header",{className:"bg-white shadow-md sticky top-0 z-10",children:E.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[E.jsx(Gr,{to:"/",className:"text-xl font-bold text-brand-primary",children:"India Log"}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx(hW,{}),n&&E.jsxs("div",{className:"relative",children:[E.jsx("button",{onClick:()=>t(!e),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary",children:(i=n.email)==null?void 0:i.charAt(0).toUpperCase()}),e&&E.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20",children:[E.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700 border-b",children:["Signed in as ",E.jsx("br",{}),E.jsx("span",{className:"font-medium truncate",children:n.email})]}),E.jsx(ji,{to:"/",className:({isActive:s})=>`block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 ${s?"bg-gray-100":""}`,onClick:()=>t(!1),children:"Home"}),E.jsx(ji,{to:"/history",className:({isActive:s})=>`block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 ${s?"bg-gray-100":""}`,onClick:()=>t(!1),children:"History"}),E.jsx(ji,{to:"/summary",className:({isActive:s})=>`block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 ${s?"bg-gray-100":""}`,onClick:()=>t(!1),children:"Summary"}),E.jsx(ji,{to:"/account",className:({isActive:s})=>`block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 ${s?"bg-gray-100":""}`,onClick:()=>t(!1),children:"Account"}),E.jsx("button",{onClick:r,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign Out"})]})]})]})]})})},yW=()=>{const n=({isActive:t})=>`flex flex-col items-center justify-center text-xs p-2 rounded-lg transition-colors ${t?"text-brand-primary bg-indigo-100":"text-gray-500 hover:text-brand-primary"}`,e="w-6 h-6 mb-1";return E.jsx("footer",{className:"bg-white border-t border-gray-200 sticky bottom-0 z-10",children:E.jsxs("nav",{className:"container mx-auto px-4 h-16 grid grid-cols-4 gap-2",children:[E.jsxs(ji,{to:"/",end:!0,className:n,children:[E.jsx(_W,{className:e}),E.jsx("span",{children:"Home"})]}),E.jsxs(ji,{to:"/history",className:n,children:[E.jsx(vW,{className:e}),E.jsx("span",{children:"History"})]}),E.jsxs(ji,{to:"/summary",className:n,children:[E.jsx(wW,{className:e}),E.jsx("span",{children:"Summary"})]}),E.jsxs(ji,{to:"/custom-entry",className:n,children:[E.jsx(IW,{className:e}),E.jsx("span",{children:"Custom"})]})]})})},_W=n=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955a1.5 1.5 0 012.122 0l8.954 8.955M2.25 12V21a.75.75 0 00.75.75H21a.75.75 0 00.75-.75V12M12 21V12"})}),vW=n=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),wW=n=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"})}),IW=n=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),EW=({children:n})=>E.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[E.jsx(gW,{}),E.jsx("div",{className:"flex-grow container mx-auto w-full max-w-2xl",children:n}),E.jsx(yW,{})]}),TW=()=>{const n=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(n)},SW=()=>"standalone"in window.navigator&&window.navigator.standalone,AW=()=>{const[n,e]=L.useState(!1);return L.useEffect(()=>{TW()&&!SW()&&e(!0)},[]),n?E.jsxs("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 w-11/12 max-w-md bg-white p-4 rounded-lg shadow-lg border z-50",children:[E.jsx("button",{onClick:()=>e(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("img",{src:"/icons/android-chrome-192x192.png",alt:"App Icon",className:"w-12 h-12"}),E.jsxs("div",{children:[E.jsx("p",{className:"font-semibold text-gray-800",children:"Install India Log"}),E.jsx("p",{className:"text-sm text-gray-600",children:"Add to your Home Screen for a better experience."})]})]}),E.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Tap the 'Share' icon and then 'Add to Home Screen'."})]}):null},PW=()=>{const{user:n,loading:e}=pd(),t=rp();return L.useEffect(()=>{window.location.href.includes("apiKey")&&window.location.href.includes("oobCode")&&aW(window.location.href).then(()=>{t("/",{replace:!0})}).catch(r=>{console.error("Sign in completion error:",r),t("/auth",{replace:!0})})},[t]),Pk(),e?E.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:E.jsx("div",{className:"w-16 h-16 border-4 border-brand-primary border-t-transparent rounded-full animate-spin"})}):n?E.jsxs(EW,{children:[E.jsx("main",{className:"flex-grow p-4 md:p-6",children:E.jsxs(kE,{children:[E.jsx(tr,{path:"/",element:E.jsx(Mq,{})}),E.jsx(tr,{path:"/history",element:E.jsx($q,{})}),E.jsx(tr,{path:"/summary",element:E.jsx(Jq,{})}),E.jsx(tr,{path:"/account",element:E.jsx(sW,{})}),E.jsx(tr,{path:"/custom-entry",element:E.jsx(tA,{})}),E.jsx(tr,{path:"/custom-entry/:id",element:E.jsx(tA,{})}),E.jsx(tr,{path:"/auth",element:E.jsx(iA,{})}),E.jsx(tr,{path:"*",element:E.jsx(dW,{})})]})}),E.jsx(AW,{})]}):E.jsx(kE,{children:E.jsx(tr,{path:"*",element:E.jsx(iA,{})})})},xW=()=>E.jsx(a6,{children:E.jsx(PW,{})}),bW=new XO({defaultOptions:{queries:{staleTime:1e3*60*5}}}),xk=document.getElementById("root");if(!xk)throw new Error("Could not find root element to mount to");const RW=yg.createRoot(xk);RW.render(E.jsx(AA.StrictMode,{children:E.jsx(n2,{client:bW,children:E.jsxs(dV,{children:[E.jsx(xW,{}),E.jsx(sM,{position:"bottom-center"})]})})}));
